{
  "00e8243f831f49f0af38697ecd2255d2.material": {
    "blendState": {
      "blendDst": "OneMinusSrcAlphaFactor",
      "blendEquation": "AddEquation",
      "blendSrc": "SrcAlphaFactor",
      "blending": "NoBlending"
    },
    "created": "2015-06-26T08:09:49.026Z",
    "cullState": {
      "cullFace": "Back",
      "enabled": true,
      "frontFace": "CCW"
    },
    "dataModelVersion": 2,
    "deleted": false,
    "depthState": {
      "enabled": true,
      "write": true
    },
    "dualTransparency": false,
    "flat": false,
    "id": "00e8243f831f49f0af38697ecd2255d2.material",
    "license": "CC0",
    "modified": "2015-06-26T08:14:06.854623+00:00",
    "name": "Material 11",
    "renderQueue": -1,
    "shaderRef": "GOO_ENGINE_SHADERS/uber",
    "texturesMapping": {},
    "uniforms": {
      "discardThreshold": {
        "enabled": true,
        "value": 0.1
      },
      "etaRatio": {
        "enabled": true,
        "value": -0.5
      },
      "fresnel": {
        "enabled": true,
        "value": 0
      },
      "materialAmbient": {
        "enabled": true,
        "value": [
          0,
          0,
          0,
          1
        ]
      },
      "materialDiffuse": {
        "enabled": true,
        "value": [
          0,
          0,
          0,
          1
        ]
      },
      "materialEmissive": {
        "enabled": true,
        "value": [
          0,
          0,
          0,
          1
        ]
      },
      "materialSpecular": {
        "enabled": true,
        "value": [
          0,
          0,
          0,
          1
        ]
      },
      "materialSpecularPower": {
        "enabled": true,
        "value": 64
      },
      "normalMultiplier": {
        "enabled": true,
        "value": 1
      },
      "opacity": {
        "enabled": false,
        "value": 1
      },
      "reflectivity": {
        "enabled": true,
        "value": 0
      },
      "refractivity": {
        "enabled": false,
        "value": 0
      },
      "vertexColorAmount": {
        "enabled": true,
        "value": 1
      },
      "wrapSettings": {
        "enabled": true,
        "value": [
          0,
          0
        ]
      }
    },
    "wireframe": false
  },
  "018a5179eb0b4a65b28b447b6f6355e3.entity": {
    "components": {
      "transform": {
        "children": {
          "49db0b325efe45538922859601fb4300.entity": {
            "entityRef": "49db0b325efe45538922859601fb4300.entity",
            "sortValue": 4
          },
          "66f3a41b8b9f421ab5be66895fcb26a2.entity": {
            "entityRef": "66f3a41b8b9f421ab5be66895fcb26a2.entity",
            "sortValue": 0
          },
          "9e9d25350e064ad3ac8d42fe31f38749.entity": {
            "entityRef": "9e9d25350e064ad3ac8d42fe31f38749.entity",
            "sortValue": 3
          },
          "d298c54123b243499e278422c83012b7.entity": {
            "entityRef": "d298c54123b243499e278422c83012b7.entity",
            "sortValue": 1
          },
          "fc6e9482700045dd97127269d9a3cf09.entity": {
            "entityRef": "fc6e9482700045dd97127269d9a3cf09.entity",
            "sortValue": 2
          }
        },
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          0,
          0,
          0
        ]
      }
    },
    "created": "2015-06-26T07:08:18.583Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": true,
    "id": "018a5179eb0b4a65b28b447b6f6355e3.entity",
    "license": "CC0",
    "modified": "2015-07-03T10:52:34.290760+00:00",
    "name": "Refractors",
    "static": false,
    "tags": {}
  },
  "07f70ee258ae4d139b55d31514d1ffb6.entity": {
    "components": {
      "html": {
        "imageRefs": {},
        "innerHtml": "<p style=\"font-size: 10vh\">\n\t3\n</p>",
        "useTransformComponent": true
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          0,
          0,
          0
        ]
      }
    },
    "created": "2015-07-03T08:36:57.018Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "07f70ee258ae4d139b55d31514d1ffb6.entity",
    "license": "CC0",
    "modified": "2015-07-03T08:37:52.919035+00:00",
    "name": "Html Entity 2",
    "static": false,
    "tags": {}
  },
  "08d67522f60f4ce6a5e0b577235c4701.entity": {
    "components": {
      "html": {
        "imageRefs": {},
        "innerHtml": "<p style=\"font-size: 10vh; color: white; padding: 4px; margin: 0; text-transform:uppercase\">\n\tSelect level\n</p>",
        "useTransformComponent": true
      },
      "script": {
        "scripts": {}
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          0.001191895455121994,
          0.1074720025062561,
          0
        ]
      }
    },
    "created": "2015-07-02T19:32:37.907076+00:00",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "08d67522f60f4ce6a5e0b577235c4701.entity",
    "license": "CC0",
    "modified": "2015-07-03T12:06:26.796296+00:00",
    "name": "Select level title",
    "static": false,
    "tags": {}
  },
  "0ad479660e064a3a818b799baf61b8c9.entity": {
    "components": {
      "meshData": {
        "shape": "Quad"
      },
      "meshRenderer": {
        "castShadows": true,
        "cullMode": "Dynamic",
        "materials": {
          "aac76e1a866341a8b63fd964fdac379f.material": {
            "materialRef": "aac76e1a866341a8b63fd964fdac379f.material",
            "sortValue": 0
          }
        },
        "receiveShadows": true,
        "reflectable": true
      },
      "transform": {
        "rotation": [
          0,
          0,
          21.788851575021567
        ],
        "scale": [
          0.05,
          0.05,
          0.05
        ],
        "translation": [
          0.17505717277526855,
          0.14137868583202362,
          2
        ]
      }
    },
    "created": "2015-06-25T20:03:10.642Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "0ad479660e064a3a818b799baf61b8c9.entity",
    "license": "CC0",
    "modified": "2015-06-26T08:37:54.561772+00:00",
    "name": "Start",
    "static": false,
    "tags": {}
  },
  "11f4ddb63abd49e7812b9d27599b3cb5.entity": {
    "components": {
      "light": {
        "angle": 30,
        "color": [
          1,
          1,
          1,
          1
        ],
        "direction": [
          0,
          0,
          0
        ],
        "intensity": 0.4,
        "penumbra": 5,
        "range": 60,
        "shadowCaster": false,
        "shadowSettings": {
          "darkness": 1,
          "far": 60,
          "fov": 55,
          "near": 1,
          "resolution": [
            256,
            256
          ],
          "shadowType": "Basic",
          "size": 100
        },
        "specularIntensity": 1,
        "type": "DirectionalLight"
      },
      "transform": {
        "rotation": [
          -31,
          129,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          15,
          11.6,
          -12.2
        ]
      }
    },
    "created": "2015-06-22T17:42:15.124242+00:00",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "11f4ddb63abd49e7812b9d27599b3cb5.entity",
    "license": "CC0",
    "modified": "2015-06-22T17:42:15.124242+00:00",
    "name": "Directional 1",
    "static": false,
    "tags": {}
  },
  "1377c4c8462645928bfd37ac0971f93f.script": {
    "body": "'use strict';\n\nvar setup = function(args, ctx, goo) {\n\tctx.worldData.renderDirty = 10;\n};\n\nvar cleanup = function(args, ctx, goo) {\n\tctx.world.gooRunner.doRender = true;\n};\n\nvar update = function(args, ctx, goo) {\n\tctx.world.gooRunner.doRender = false;\n\tif(ctx.worldData.renderDirty || ctx.worldData.gamestate === 'editing'){\n\t\tctx.world.gooRunner.doRender = true;\n\t\tif(ctx.worldData.renderDirty > 0)\n\t\t\tctx.worldData.renderDirty -= 1;\n\t}\n};\n\nvar parameters = [];",
    "created": "2015-06-26T09:54:01.429Z",
    "dataModelVersion": 2,
    "deleted": false,
    "dependencies": {},
    "id": "1377c4c8462645928bfd37ac0971f93f.script",
    "license": "CC0",
    "modified": "2015-07-02T19:37:37.842831+00:00",
    "name": "DirtyRender"
  },
  "1475c51c694b4da4bbbca303537f6e6a.entity": {
    "components": {
      "html": {
        "imageRefs": {},
        "innerHtml": "<p style=\"color: white; font-size: 10vh; padding: 4px; margin: 0\">\n\tAll levels finished!<br>\n\tYou're awesome.\n</p>",
        "useTransformComponent": true
      },
      "script": {
        "scripts": {}
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          0,
          0,
          0
        ]
      }
    },
    "created": "2015-07-03T11:57:04.181Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "1475c51c694b4da4bbbca303537f6e6a.entity",
    "license": "CC0",
    "modified": "2015-07-03T11:58:45.726899+00:00",
    "name": "Refract title",
    "static": false,
    "tags": {}
  },
  "15cd9a6da347432bba16bca6ab3361e5.script": {
    "body": "/**\n * Changes the diffuse texture when the mainCamera mouseposition ray is intersecting the AABB of the entity.\n */\nvar setup = function(args, ctx, goo) {\n\tvar el = ctx.world.gooRunner.renderer.domElement;\n\tctx.mouseState = {\n\t\tx: el.width / 2, // center of screen\n\t\ty: el.height / 2\n\t};\n\tctx.ray = new goo.Ray();\n\tctx.isHovering = false;\n\t\n\tctx.click = function(){\n\t\tif(!ctx.entity.isVisiblyHidden() && ctx.intersects()){\n\t\t\tctx.worldData.gamestate = args.gotoGameState;\n\t\t\tif(args.isLevelButton){\n\t\t\t\tctx.worldData.level = parseInt(ctx.entity.name.split(' ')[1], 10);\n\t\t\t}\n\t\t}\n\t};\n\t\n\tfunction dpr(){\n\t\treturn ctx.world.gooRunner.renderer.devicePixelRatio;\n\t}\n\t\n\tctx.startTexure = ctx.entity.meshRendererComponent.materials[0].getTexture('DIFFUSE_MAP');\n\tctx.startScale = ctx.entity.getScale().clone();\n\tctx.listeners = {\n\t\tmousemove: function(evt){\n\t\t\tctx.mouseState.x = evt.clientX*dpr();\n\t\t\tctx.mouseState.y = evt.clientY*dpr();\n\t\t},\n\t\tmousedown: function(evt){\n\t\t\tctx.mouseState.x = evt.clientX*dpr();\n\t\t\tctx.mouseState.y = evt.clientY*dpr();\n\t\t\tctx.click();\n\t\t},\n\t\ttouchstart: function(evt){\n\t\t\tctx.mouseState.x = evt.touches[0].clientX*dpr();\n\t\t\tctx.mouseState.y = evt.touches[0].clientY*dpr();\n\t\t\tctx.click();\n\t\t}\n\t};\n\t\n\tfor(var key in ctx.listeners){\n\t\twindow.addEventListener(key, ctx.listeners[key]);\n\t}\n\t\n\tctx.intersects = function(){\n\t\tgoo.Renderer.mainCamera.getPickRay(\n\t\t\tctx.mouseState.x,\n\t\t\tctx.mouseState.y,\n\t\t\tctx.viewportWidth, // DevicePixelRatio?\n\t\t\tctx.viewportHeight,\n\t\t\tctx.ray\n\t\t);\n\t\treturn ctx.entity.meshRendererComponent.worldBound.intersectsRay(ctx.ray);\n\t}\n};\n\nvar cleanup = function(args, ctx, goo) {\n\tfor(var key in ctx.listeners){\n\t\twindow.removeEventListener(key, ctx.listeners[key]);\n\t}\n};\n\nvar update = function(args, ctx, goo) {\n\tvar isHovering = !ctx.entity.isVisiblyHidden() && ctx.intersects();\n\t\n\tvar el = ctx.world.gooRunner.renderer.domElement;\n\t\n\tif(args.hoverTexture){\n\t\tctx.entity.meshRendererComponent.materials[0].setTexture('DIFFUSE_MAP', isHovering ? args.hoverTexture : ctx.startTexure);\n\t}\n\t\n\t// Message on the SystemBus and stuff\n\tvar eventData = { entity: ctx.entity };\n\t\n\tif(!ctx.isHovering && isHovering){\n\t\tvar scale = ctx.startScale.clone();\n\t\tscale.mul(args.hoverScale);\n\t\t\n\t\t// Tween the scale\n\t\t//ctx.entity.setScale(scale);\n\t\tel.style.cursor = args.hoverCursor;\n\t\tgoo.SystemBus.emit('HoverScript.hoverStart', eventData);\n\t} else if(ctx.isHovering && !isHovering){\n\t\t\n\t\tctx.entity.setScale(ctx.startScale);\n\t\tel.style.cursor = 'default';\n\t\tgoo.SystemBus.emit('HoverScript.hoverEnd', eventData);\n\t}\n\t\n\tctx.isHovering = isHovering;\n};\n\nvar parameters = [{\n\tname: 'hoverScale',\n\tkey: 'hoverScale',\n\ttype: 'vec3',\n\t'default': [1,1,1]\n},{\n\tname: 'hoverScaleTime',\n\tkey: 'hoverScaleTime',\n\ttype: 'float',\n\t'default': 100\n},{\n\tname: 'hoverCursor',\n\tkey: 'hoverCursor',\n\ttype: 'string',\n\t'default': 'pointer'\n},{\n\tkey: 'hoverTexture',\n\tname: 'hoverTexture',\n\ttype: 'texture',\n\t'default': null,\n\tdescription: 'A texture to set on the diffuse material when hovering.'\n},{\n\tkey: 'gotoGameState',\n\ttype: 'string',\n\t'default': 'levelselect'\n},{\n\tkey: 'isLevelButton',\n\ttype: 'boolean',\n\t'default': false\n}];",
    "created": "2015-07-02T20:04:49.082649+00:00",
    "dataModelVersion": 2,
    "deleted": false,
    "dependencies": {},
    "id": "15cd9a6da347432bba16bca6ab3361e5.script",
    "license": "CC0",
    "modified": "2015-07-03T08:51:38.439663+00:00",
    "name": "Play button 2"
  },
  "1ab1314db05c46e1a6dd7618a6b04cca.entity": {
    "components": {
      "html": {
        "imageRefs": {},
        "innerHtml": "<p style=\"font-size: 10vh\">\n\tâˆž\n</p>",
        "useTransformComponent": true
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          0,
          0,
          0
        ]
      }
    },
    "created": "2015-07-03T12:57:54.331041+00:00",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "1ab1314db05c46e1a6dd7618a6b04cca.entity",
    "license": "CC0",
    "modified": "2015-07-03T12:57:54.331041+00:00",
    "name": "Html Entity 2",
    "static": false,
    "tags": {}
  },
  "213f720f23ce4cf2bc95c129aab15676.entity": {
    "components": {
      "html": {
        "imageRefs": {},
        "innerHtml": "<p style=\"font-size: 10vh\">\n\t7\n</p>",
        "useTransformComponent": true
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          0,
          0,
          0
        ]
      }
    },
    "created": "2015-07-03T11:48:03.648Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "213f720f23ce4cf2bc95c129aab15676.entity",
    "license": "CC0",
    "modified": "2015-07-03T12:43:32.362662+00:00",
    "name": "Html Entity 2",
    "static": false,
    "tags": {}
  },
  "2161372501524ae195e5a3b607e17bb6.entity": {
    "components": {
      "meshData": {
        "shape": "Quad"
      },
      "meshRenderer": {
        "castShadows": true,
        "cullMode": "Dynamic",
        "materials": {
          "a7cb6adbf35a4eb0a9be19bd1c43d358.material": {
            "materialRef": "a7cb6adbf35a4eb0a9be19bd1c43d358.material",
            "sortValue": 0
          }
        },
        "receiveShadows": true,
        "reflectable": true
      },
      "script": {
        "scripts": {
          "d909a969c5d5496e9705156f802471f4.scriptInstance": {
            "name": "Custom script",
            "options": {
              "enabled": true,
              "gotoGameState": "hint",
              "hoverCursor": "pointer",
              "hoverScale": [
                1,
                1,
                1
              ],
              "hoverScaleTime": 100,
              "hoverTexture": {},
              "isLevelButton": true
            },
            "scriptRef": "15cd9a6da347432bba16bca6ab3361e5.script",
            "sortValue": 0
          }
        }
      },
      "transform": {
        "children": {
          "27d6d5601003422ba9a3a0047ffefaa8.entity": {
            "entityRef": "27d6d5601003422ba9a3a0047ffefaa8.entity",
            "sortValue": 0
          }
        },
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          0.18290665745735168,
          0.1840209811925888,
          0.3852245509624481
        ],
        "translation": [
          -0.2183673083782196,
          -0.0684739500284195,
          0.39484453201293945
        ]
      }
    },
    "created": "2015-07-02T20:11:59.522Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "2161372501524ae195e5a3b607e17bb6.entity",
    "license": "CC0",
    "modified": "2015-07-03T08:54:19.781013+00:00",
    "name": "Level 1",
    "static": false,
    "tags": {}
  },
  "21c113c229a74a5a8bf0e33948ea098c.entity": {
    "components": {
      "meshData": {
        "shape": "Quad"
      },
      "meshRenderer": {
        "castShadows": true,
        "cullMode": "Dynamic",
        "materials": {
          "a7cb6adbf35a4eb0a9be19bd1c43d358.material": {
            "materialRef": "a7cb6adbf35a4eb0a9be19bd1c43d358.material",
            "sortValue": 0
          }
        },
        "receiveShadows": true,
        "reflectable": true
      },
      "script": {
        "scripts": {
          "4c1738aa9c1a4d1b9331a0de130692a7.scriptinstance": {
            "name": "Custom script",
            "options": {
              "enabled": true,
              "gotoGameState": "hint",
              "hoverCursor": "pointer",
              "hoverScale": [
                1,
                1,
                1
              ],
              "hoverScaleTime": 100,
              "hoverTexture": {},
              "isLevelButton": true
            },
            "scriptRef": "15cd9a6da347432bba16bca6ab3361e5.script",
            "sortValue": 0
          }
        }
      },
      "transform": {
        "children": {
          "c793f690b03b4e338e46b50d290b65c4.entity": {
            "entityRef": "c793f690b03b4e338e46b50d290b65c4.entity",
            "sortValue": 0
          }
        },
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          0.18290665745735168,
          0.1840209811925888,
          0.3852245509624481
        ],
        "translation": [
          0.20883816480636597,
          -0.2701491117477417,
          0.39484453201293945
        ]
      }
    },
    "created": "2015-07-03T08:47:50.818Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "21c113c229a74a5a8bf0e33948ea098c.entity",
    "license": "CC0",
    "modified": "2015-07-03T10:59:12.148920+00:00",
    "name": "Level 6",
    "static": false,
    "tags": {}
  },
  "2282c7928f2246ed9644a891731a884a.entity": {
    "components": {
      "html": {
        "imageRefs": {},
        "innerHtml": "<p style=\"font-size: 10vh\">\n\tPLAY\n</p>",
        "useTransformComponent": true
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          0,
          0,
          0
        ]
      }
    },
    "created": "2015-07-03T08:54:13.722Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "2282c7928f2246ed9644a891731a884a.entity",
    "license": "CC0",
    "modified": "2015-07-03T08:54:42.430100+00:00",
    "name": "Html Entity 2",
    "static": false,
    "tags": {}
  },
  "27d6d5601003422ba9a3a0047ffefaa8.entity": {
    "components": {
      "html": {
        "imageRefs": {},
        "innerHtml": "<p style=\"font-size: 10vh\">\n\t1\n</p>",
        "useTransformComponent": true
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          0,
          0,
          0
        ]
      }
    },
    "created": "2015-07-03T08:34:58.493Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "27d6d5601003422ba9a3a0047ffefaa8.entity",
    "license": "CC0",
    "modified": "2015-07-03T08:36:48.471137+00:00",
    "name": "Html Entity",
    "static": false,
    "tags": {}
  },
  "2aadb0d3c5eb426fb3d3bd72c1cb0a95.entity": {
    "components": {
      "script": {
        "scripts": {
          "851fdbc3af524adca7375c0126927be9.scriptInstance": {
            "name": "Custom script",
            "options": {
              "enabled": true,
              "stateName": "levelselect",
              "transitionState": "levelselect",
              "transitionTimeout": -1
            },
            "scriptRef": "4e6ae469a0c74d5487739bdf6e7d2bc7.script",
            "sortValue": 0
          }
        }
      },
      "transform": {
        "children": {
          "08d67522f60f4ce6a5e0b577235c4701.entity": {
            "entityRef": "08d67522f60f4ce6a5e0b577235c4701.entity",
            "sortValue": 0
          },
          "2161372501524ae195e5a3b607e17bb6.entity": {
            "entityRef": "2161372501524ae195e5a3b607e17bb6.entity",
            "sortValue": 2
          },
          "21c113c229a74a5a8bf0e33948ea098c.entity": {
            "entityRef": "21c113c229a74a5a8bf0e33948ea098c.entity",
            "sortValue": 8
          },
          "2c4467dc4cd8444880a3f34acfc7c036.entity": {
            "entityRef": "2c4467dc4cd8444880a3f34acfc7c036.entity",
            "sortValue": 1
          },
          "6c2f9a1b92534c5ea1db625d99a3079e.entity": {
            "entityRef": "6c2f9a1b92534c5ea1db625d99a3079e.entity",
            "sortValue": 11
          },
          "726f3a88e8f445bc829cefec793a40dd.entity": {
            "entityRef": "726f3a88e8f445bc829cefec793a40dd.entity",
            "sortValue": 9
          },
          "91722558c5c54a57a0d0ca995e150e08.entity": {
            "entityRef": "91722558c5c54a57a0d0ca995e150e08.entity",
            "sortValue": 10
          },
          "9738632b99eb407dbf68e7aa00ce460a.entity": {
            "entityRef": "9738632b99eb407dbf68e7aa00ce460a.entity",
            "sortValue": 12
          },
          "cce1eb88465b4322bae1e090a7ea1d80.entity": {
            "entityRef": "cce1eb88465b4322bae1e090a7ea1d80.entity",
            "sortValue": 4
          },
          "eb032dcc8a584c6d961f22dae8a28b8b.entity": {
            "entityRef": "eb032dcc8a584c6d961f22dae8a28b8b.entity",
            "sortValue": 5
          },
          "ef8e2ae273964270a9740518c9c275b0.entity": {
            "entityRef": "ef8e2ae273964270a9740518c9c275b0.entity",
            "sortValue": 3
          }
        },
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          0,
          0.2070293426513672,
          -2
        ]
      }
    },
    "created": "2015-07-02T19:32:37.654Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": true,
    "id": "2aadb0d3c5eb426fb3d3bd72c1cb0a95.entity",
    "license": "CC0",
    "modified": "2015-07-03T13:04:37.615350+00:00",
    "name": "Level select overlay",
    "static": false,
    "tags": {}
  },
  "2c11ce481eef40fc898117046988fbfa.material": {
    "blendState": {
      "blendDst": "OneMinusSrcAlphaFactor",
      "blendEquation": "AddEquation",
      "blendSrc": "SrcAlphaFactor",
      "blending": "NoBlending"
    },
    "created": "2015-06-25T19:57:32.568Z",
    "cullState": {
      "cullFace": "Back",
      "enabled": true,
      "frontFace": "CCW"
    },
    "dataModelVersion": 2,
    "deleted": false,
    "depthState": {
      "enabled": true,
      "write": true
    },
    "dualTransparency": false,
    "flat": false,
    "id": "2c11ce481eef40fc898117046988fbfa.material",
    "license": "CC0",
    "modified": "2015-06-29T18:56:58.743389+00:00",
    "name": "Material 5",
    "renderQueue": -1,
    "shaderRef": "GOO_ENGINE_SHADERS/uber",
    "texturesMapping": {},
    "uniforms": {
      "discardThreshold": {
        "enabled": true,
        "value": 0.1
      },
      "etaRatio": {
        "enabled": true,
        "value": -0.5
      },
      "fresnel": {
        "enabled": true,
        "value": 0
      },
      "materialAmbient": {
        "enabled": true,
        "value": [
          1,
          0,
          0,
          1
        ]
      },
      "materialDiffuse": {
        "enabled": true,
        "value": [
          1,
          1,
          1,
          1
        ]
      },
      "materialEmissive": {
        "enabled": true,
        "value": [
          0,
          0,
          0,
          1
        ]
      },
      "materialSpecular": {
        "enabled": true,
        "value": [
          0,
          0,
          0,
          1
        ]
      },
      "materialSpecularPower": {
        "enabled": true,
        "value": 64
      },
      "normalMultiplier": {
        "enabled": true,
        "value": 1
      },
      "opacity": {
        "enabled": false,
        "value": 1
      },
      "reflectivity": {
        "enabled": true,
        "value": 0
      },
      "refractivity": {
        "enabled": false,
        "value": 0
      },
      "vertexColorAmount": {
        "enabled": true,
        "value": 1
      },
      "wrapSettings": {
        "enabled": true,
        "value": [
          0,
          0
        ]
      }
    },
    "wireframe": false
  },
  "2c4467dc4cd8444880a3f34acfc7c036.entity": {
    "components": {
      "meshData": {
        "shape": "Quad"
      },
      "meshRenderer": {
        "castShadows": true,
        "cullMode": "Dynamic",
        "materials": {
          "2e5ca405e1eb4cb9825ddbc32c0dc530.material": {
            "materialRef": "2e5ca405e1eb4cb9825ddbc32c0dc530.material",
            "sortValue": 0
          }
        },
        "receiveShadows": true,
        "reflectable": true
      },
      "script": {
        "scripts": {
          "bc7f627a931248848fd8bb2625352ce0.scriptInstance": {
            "name": "Custom script",
            "options": {
              "color": [
                0,
                0,
                0
              ],
              "enabled": true
            },
            "scriptRef": "8db7f8fc2d4d413db9d84e8e9b6c9cd6.script",
            "sortValue": 0
          }
        }
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          5,
          5,
          5
        ],
        "translation": [
          0,
          0,
          0
        ]
      }
    },
    "created": "2015-07-02T19:32:37.889671+00:00",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "2c4467dc4cd8444880a3f34acfc7c036.entity",
    "license": "CC0",
    "modified": "2015-07-03T12:16:47.402160+00:00",
    "name": "Background",
    "static": false,
    "tags": {}
  },
  "2e1f52bffedd42d4ba90bd064cf2a686.script": {
    "body": "'use strict';\n\nvar setup = function(args, ctx, goo) {\n\tvar mousedown = false;\n\tvar dragBody;\n\tvar startRelPos;\n\t\n\tctx.worldData.draggedBodies = [];\n\t\n\tvar worldPos = new goo.Vector3();\n\tfunction getMousePos(evt){\n\t\tvar dpr = ctx.world.gooRunner.renderer.devicePixelRatio;\n\t\tvar touch = !!evt.targetTouches;\n\t\tvar x = (touch ? evt.targetTouches[0].clientX : evt.clientX) * dpr;\n\t\tvar y = (touch ? evt.targetTouches[0].clientY : evt.clientY) * dpr;\n\t\tctx.activeCameraEntity.cameraComponent.camera.getWorldPosition(x, y, ctx.domElement.width, ctx.domElement.height, 0.1, worldPos);\n\t\treturn worldPos;\n\t}\n\t\n\tctx.listeners = {\n\t\tmousedown: function(evt){\n\t\t\tmousedown = ctx.worldData.dragging = true;\n\t\t\tvar worldPos = getMousePos(evt);\n          \tvar hitBodies = ctx.worldData.physicsWorld.hitTest([worldPos.x, worldPos.y], ctx.worldData.physicsWorld.bodies);\n     //     \tdebugger\n          \thitBodies = hitBodies.filter(function(b){\n          \t\tvar isEditing = ctx.worldData.gamestate === 'editing';\n          \t\treturn (\n          \t\t\t(b !== ctx.worldData.goalBody || isEditing) &&\n          \t\t\t(!b.blocker || isEditing) &&\n          \t\t\tb !== ctx.worldData.startBody\n          \t\t);\n\t\t\t});\n          \tif(hitBodies.length){\n          \t\tdragBody = hitBodies[0];\n          \t\tif(ctx.worldData.draggedBodies.indexOf(dragBody) === -1 && dragBody !== ctx.worldData.goalBody){\n          \t\t\tctx.worldData.draggedBodies.push(dragBody);\n          \t\t}\n\t\t\t\tstartRelPos = [worldPos.x - dragBody.position[0], worldPos.y - dragBody.position[1]];\n          \t}\n\t\t},\n\t\tmousemove: function(evt){\n\t\t\tif(mousedown && dragBody){\n\t\t\t\tvar worldPos = getMousePos(evt);\n\t\t\t\t// move current body\n\t\t\t\tp2.vec2.sub(dragBody.position, [worldPos.x, worldPos.y], startRelPos);\n\t\t\t\tctx.worldData.updatePhysics();\n\t\t\t\tctx.worldData.updatePiecePositions();\n\t\t\t\tctx.worldData.renderDirty = 10;\n\t\t\t}\n\t\t},\n\t\tmouseup: function(evt){\n\t\t\tmousedown = ctx.worldData.dragging = false;\n\t\t\tdragBody = undefined;\n\t\t}\n\t};\n\tctx.listeners.touchstart = ctx.listeners.mousedown;\n\tctx.listeners.touchmove = ctx.listeners.mousemove;\n\tctx.listeners.touchend = ctx.listeners.mouseup;\n\tctx.listeners.mouseout = ctx.listeners.mouseup;\n\t\n\tfor(var key in ctx.listeners){\n\t\tctx.domElement.addEventListener(key, ctx.listeners[key]);\n\t}\n};\n\nvar cleanup = function(args, ctx, goo) {\n\tfor(var key in ctx.listeners){\n\t\tctx.domElement.removeEventListener(key, ctx.listeners[key]);\n\t}\n};\n\nvar update = function(args, ctx, goo) {\n\tif(ctx.level !== ctx.worldData.level){\n\t\tctx.level = ctx.worldData.level;\n\t\t\n\t\tctx.worldData.draggedBodies.length = 0;\n\t}\n};\n\nvar parameters = [];",
    "created": "2015-06-22T19:43:34.017Z",
    "dataModelVersion": 2,
    "deleted": false,
    "dependencies": {},
    "id": "2e1f52bffedd42d4ba90bd064cf2a686.script",
    "license": "CC0",
    "modified": "2015-07-03T10:50:35.905364+00:00",
    "name": "Pull pieces"
  },
  "2e2b91bf6ef04fe9baf471e02de70bc8.texture": {
    "anisotropy": 1,
    "created": "2015-07-03T13:08:39.430580+00:00",
    "dataModelVersion": 2,
    "deleted": false,
    "flipY": true,
    "generateMipmaps": true,
    "id": "2e2b91bf6ef04fe9baf471e02de70bc8.texture",
    "imageRef": "9a413966a0b0f178f9fdd72cb855fd5d94f02191.jpg",
    "license": "CC0",
    "magFilter": "Bilinear",
    "matchFileName": "refraction.jpg",
    "minFilter": "Trilinear",
    "modified": "2015-07-03T13:08:39.430580+00:00",
    "name": "refraction.jpg",
    "offset": [
      0,
      0
    ],
    "repeat": [
      1,
      1
    ],
    "wrapS": "Repeat",
    "wrapT": "Repeat"
  },
  "2e5ca405e1eb4cb9825ddbc32c0dc530.material": {
    "blendState": {
      "blendDst": "OneMinusSrcAlphaFactor",
      "blendEquation": "AddEquation",
      "blendSrc": "SrcAlphaFactor",
      "blending": "NoBlending"
    },
    "created": "2015-06-25T20:28:36.543Z",
    "cullState": {
      "cullFace": "Back",
      "enabled": true,
      "frontFace": "CCW"
    },
    "dataModelVersion": 2,
    "deleted": false,
    "depthState": {
      "enabled": true,
      "write": true
    },
    "dualTransparency": false,
    "flat": false,
    "id": "2e5ca405e1eb4cb9825ddbc32c0dc530.material",
    "license": "CC0",
    "modified": "2015-07-03T13:09:50.872215+00:00",
    "name": "Material 8",
    "renderQueue": -1,
    "shaderRef": "GOO_ENGINE_SHADERS/uber",
    "texturesMapping": {
      "DIFFUSE_MAP": {
        "enabled": true,
        "textureRef": "2e2b91bf6ef04fe9baf471e02de70bc8.texture"
      }
    },
    "uniforms": {
      "discardThreshold": {
        "enabled": true,
        "value": 0.1
      },
      "etaRatio": {
        "enabled": true,
        "value": -0.5
      },
      "fresnel": {
        "enabled": true,
        "value": 0
      },
      "materialAmbient": {
        "enabled": true,
        "value": [
          0.5609090169270834,
          0.5609090169270834,
          0.5609090169270834,
          1
        ]
      },
      "materialDiffuse": {
        "enabled": true,
        "value": [
          0,
          0,
          0,
          1
        ]
      },
      "materialEmissive": {
        "enabled": true,
        "value": [
          0,
          0,
          0,
          1
        ]
      },
      "materialSpecular": {
        "enabled": true,
        "value": [
          0,
          0,
          0,
          1
        ]
      },
      "materialSpecularPower": {
        "enabled": true,
        "value": 64
      },
      "normalMultiplier": {
        "enabled": true,
        "value": 1
      },
      "opacity": {
        "enabled": false,
        "value": 1
      },
      "reflectivity": {
        "enabled": true,
        "value": 0
      },
      "refractivity": {
        "enabled": false,
        "value": 0
      },
      "vertexColorAmount": {
        "enabled": true,
        "value": 1
      },
      "wrapSettings": {
        "enabled": true,
        "value": [
          0,
          0
        ]
      }
    },
    "wireframe": false
  },
  "305f237171f147c2819fc8a1666cec95.script": {
    "body": "/* global p2 */\n\n'use strict';\n\nvar setup = function(args, ctx, goo) {\n\tctx.worldData.onGoal = false;\n\t\n\tvar world = ctx.world;\n\t\n\tvar lineRenderSystem = ctx.lineRenderSystem = new window.goo.LineRenderSystem(world);\n\tlineRenderSystem._lineRenderers[0]._material.lineWidth = 3;\n\tctx.world.gooRunner.setRenderSystem(ctx.lineRenderSystem);\n\tctx.coloredLinesStart = new goo.Vector3();\n\tctx.coloredLinesEnd = new goo.Vector3();\n\t\n\tvar vec2 = p2.vec2;\n\tvar airIndex = 1;\n\tvar shapeIndex = 1.5;\n\tfunction refract(out, direction, normal, airIndex, shapeIndex){\n\t\tvar dot = p2.vec2.dot(normal, direction);\n\t\tvar tangent = p2.vec2.fromValues(normal[0], normal[1]);\n\t\tp2.vec2.rotate(tangent, tangent, -Math.PI / 2);\n\t\n\t\tvar outAngle, inAngle, a;\n\t\tvar side = p2.vec2.dot(tangent, direction);\n\t\tif(dot < 0){\n\t\t\t// Into the material\n\t\t\tdot = p2.vec2.dot(normal, direction);\n\t\t\tinAngle = Math.acos(dot);\n\t\t\tp2.vec2.scale(normal, normal, -1);\n\t\t\ta = airIndex / shapeIndex * Math.sin(inAngle);\n\t\n\t\t\tif(a <= 1){\n\t\t\t\toutAngle = Math.asin(a);\n\t\n\t\t\t\t// Construct new refracted direction - just rotate the negative normal\n\t\t\t\tp2.vec2.rotate(out, normal, outAngle * (side < 0 ? -1 : 1));\n\t\t\t} else {\n\t\t\t\tp2.vec2.reflect(out, direction, normal);\n\t\t\t}\n\t\n\t\t} else {\n\t\n\t\t\t// Out of the material - flip the indices\n\t\t\tdot = p2.vec2.dot(normal, direction);\n\t\t\tinAngle = Math.acos(dot);\n\t\n\t\t\ta = shapeIndex / airIndex * Math.sin(inAngle);\n\t\t\tif(a <= 1){\n\t\t\t\toutAngle = Math.asin(a);\n\t\n\t\t\t\t// Construct new refracted direction - just rotate the negative normal\n\t\t\t\tp2.vec2.rotate(out, normal, outAngle * (side < 0 ? 1 : -1));\n\t\t\t} else {\n\t\t\t\tp2.vec2.reflect(out, direction, normal);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction drawRay(from, to){\n\t\tctx.coloredLinesStart.setDirect(from[0], from[1], 1);\n\t\tctx.coloredLinesEnd.setDirect(to[0], to[1], 1);\n\t\tctx.lineRenderSystem.drawLine(ctx.coloredLinesStart, ctx.coloredLinesEnd, ctx.lineRenderSystem.WHITE);\n\t}\n\t\n\tvar N = 1;\n\tvar start = [];\n\tvar start2 = [];\n\tvar end = [];\n\tvar direction = [];\n\tvar result = new p2.RaycastResult();\n\tfunction drawRays(){\n\t\tfor (var i = 0; i < N; i++) {\n\t\t\tstart[0] = ctx.worldData.startEntity.transformComponent.worldTransform.translation.x;\n\t\t\tstart[1] = ctx.worldData.startEntity.transformComponent.worldTransform.translation.y;\n\t\t\t\n\t\t\tdirection[0] = 0;\n\t\t\tdirection[1] = 1;\n\t\t\t\t\n\t\t\tvar d = ctx.worldData.startEntity.transformComponent.transform.rotation.data;\n\t\t\tvar angle = Math.PI / 2 + Math.atan2(-d[0], d[1]);\n\t\t\t\n\t\t\tp2.vec2.rotate(direction, direction, angle);\n\t\n\t\t\tend[0] = start[0] + direction[0] * 100;\n\t\t\tend[1] = start[1] + direction[1] * 100;\n\t\n\t\t\tvar hits = 0;\n\t\t\tvar maxHits = 20;\n\t\t\tctx.worldData.onGoal = false;\n\t\t\tctx.worldData.onBlocker = false;\n\t\t\twhile(ctx.worldData.physicsWorld.raycastClosest(start, end, {}, result) && hits++ < maxHits){\n\t\t\t\tdrawRay(start, result.hitPointWorld);\n\t\n\t\t\t\tif(result.body === ctx.worldData.goalBody){\n\t\t\t\t\tctx.worldData.onGoal = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(result.body.blocker){\n\t\t\t\t\tctx.worldData.onBlocker = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\n\t\t\t\t// move start to the hit point\n\t\t\t\tp2.vec2.copy(start, result.hitPointWorld);\n\t\n          \t\tvar hitBodies = ctx.worldData.physicsWorld.hitTest(start, ctx.worldData.physicsWorld.bodies);\n\t\n\t\t\t\t// If the new ray starts in a shape, don't refract it\n\t\t\t\tvar startingInOtherBody = hitBodies.length >= 2 || (hitBodies.length!==0 && hitBodies.indexOf(result.body)===-1);\n\t\t\t\tresult.getDirection(direction);\n\t\t\t\tif(!startingInOtherBody){\n\t\t\t\t\trefract(direction, direction, result.hitNormalWorld, airIndex, shapeIndex);\n\t\t\t\t}\n\t\n\t\t\t\t// move out a bit\n\t\t\t\tstart[0] += direction[0] * 0.001;\n\t\t\t\tstart[1] += direction[1] * 0.001;\n\t\n\t\t\t\tend[0] = start[0] + direction[0] * 100;\n\t\t\t\tend[1] = start[1] + direction[1] * 100;\n\t\n\t\t\t\tresult.reset();\n\t\t\t}\n\t\t\tif(!ctx.worldData.onGoal && hits < maxHits && !ctx.worldData.onBlocker)\n\t\t\t\tdrawRay(start, end);\n\t\t}\n\t}\n\tctx.drawRays = drawRays;\n};\n\nvar cleanup = function(args, ctx, goo) {\n\tvar idx = ctx.world.gooRunner.renderSystems.indexOf(ctx.lineRenderSystem);\n\tif(idx !== -1){\n\t\tctx.world.gooRunner.renderSystems.splice(idx, 1);\n\t}\n};\n\nvar update = function(args, ctx, goo) {\n\tif(ctx.worldData.physicsWorld && ctx.drawRays){\n\t\tctx.lineRenderSystem.camera = ctx.activeCameraEntity.cameraComponent.camera;\n\t\tctx.drawRays();\n\t}\n};\n\nvar parameters = [];",
    "created": "2015-06-22T19:05:23.965Z",
    "dataModelVersion": 2,
    "deleted": false,
    "dependencies": {
      "lib/linerenderpack.js": {
        "sortValue": 0,
        "url": "lib/linerenderpack.js"
      }
    },
    "id": "305f237171f147c2819fc8a1666cec95.script",
    "license": "CC0",
    "modified": "2015-07-03T10:54:53.470774+00:00",
    "name": "Laser Script"
  },
  "3166a7ca726f4c588aa45bde12311483.environment": {
    "backgroundColor": [
      0,
      0,
      0,
      1
    ],
    "created": "2015-06-22T17:42:15.292591+00:00",
    "dataModelVersion": 2,
    "deleted": false,
    "fog": {
      "color": [
        1,
        1,
        1
      ],
      "enabled": false,
      "far": 996,
      "near": 0
    },
    "globalAmbient": [
      0,
      0,
      0,
      0
    ],
    "id": "3166a7ca726f4c588aa45bde12311483.environment",
    "license": "CC0",
    "modified": "2015-06-22T20:23:05.681002+00:00",
    "name": "Default Environment",
    "sound": {
      "dopplerFactor": 0,
      "maxDistance": 100,
      "reverb": 0,
      "rolloffFactor": 0.4,
      "volume": 1
    },
    "weather": {
      "snow": {
        "enabled": false,
        "height": 25,
        "rate": 10,
        "velocity": 10
      }
    }
  },
  "3fe420746a554177b322d417db10a99e.entity": {
    "components": {
      "html": {
        "imageRefs": {},
        "innerHtml": "<p style=\"font-size: 10vh\">\n\t5\n</p>",
        "useTransformComponent": true
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          0,
          0,
          0
        ]
      }
    },
    "created": "2015-07-03T10:58:47.627Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "3fe420746a554177b322d417db10a99e.entity",
    "license": "CC0",
    "modified": "2015-07-03T10:59:26.005271+00:00",
    "name": "Html Entity 2",
    "static": false,
    "tags": {}
  },
  "40fc1454040645eda07943ea47143e4b.entity": {
    "components": {
      "html": {
        "imageRefs": {},
        "innerHtml": "<p style=\"font-size: 10vh\">\n\t8\n</p>",
        "useTransformComponent": true
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          0,
          0,
          0
        ]
      }
    },
    "created": "2015-07-03T12:43:12.096Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "40fc1454040645eda07943ea47143e4b.entity",
    "license": "CC0",
    "modified": "2015-07-03T12:58:09.890447+00:00",
    "name": "Html Entity 2",
    "static": false,
    "tags": {}
  },
  "4162b37f95d64630b293e44beb1045dd.entity": {
    "components": {
      "meshData": {
        "shape": "Quad"
      },
      "meshRenderer": {
        "castShadows": true,
        "cullMode": "Dynamic",
        "materials": {
          "00e8243f831f49f0af38697ecd2255d2.material": {
            "materialRef": "00e8243f831f49f0af38697ecd2255d2.material",
            "sortValue": 0
          }
        },
        "receiveShadows": true,
        "reflectable": true
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          10,
          10,
          10
        ],
        "translation": [
          0,
          0,
          4
        ]
      }
    },
    "created": "2015-06-26T08:09:49.024Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "4162b37f95d64630b293e44beb1045dd.entity",
    "license": "CC0",
    "modified": "2015-06-26T08:16:52.159544+00:00",
    "name": "Rotate device",
    "static": false,
    "tags": {}
  },
  "46e9de38f1ec4eb084ee958c17a4a063.entity": {
    "components": {
      "html": {
        "imageRefs": {},
        "innerHtml": "<p style=\"color: silver; font-size: 5vh; padding: 40px; margin: 0;\">\n\tplaceholder\n</p>\n",
        "useTransformComponent": true
      },
      "script": {
        "scripts": {
          "031cb2f076c94dbda42a48e53894e902.scriptInstance": {
            "name": "Custom script",
            "options": {
              "enabled": true
            },
            "scriptRef": "8a7999c1d9df4079a966b3c194a244ef.script",
            "sortValue": 0
          }
        }
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          0,
          -0.09909909963607788,
          0
        ]
      }
    },
    "created": "2015-06-26T08:43:30.923Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "46e9de38f1ec4eb084ee958c17a4a063.entity",
    "license": "CC0",
    "modified": "2015-07-03T08:46:47.564089+00:00",
    "name": "Hint",
    "static": false,
    "tags": {}
  },
  "49db0b325efe45538922859601fb4300.entity": {
    "components": {
      "meshData": {
        "shape": "Quad"
      },
      "meshRenderer": {
        "castShadows": true,
        "cullMode": "Dynamic",
        "materials": {
          "81fcab75bbe646c8bef85e5deaeeffe6.material": {
            "materialRef": "81fcab75bbe646c8bef85e5deaeeffe6.material",
            "sortValue": 0
          }
        },
        "receiveShadows": true,
        "reflectable": true
      },
      "script": {
        "scripts": {
          "df53c3dac15f4f76976a191161370cd7.scriptinstance": {
            "name": "Custom script",
            "options": {
              "enabled": true
            },
            "scriptRef": "b17eba7a171a4f7d98c39130e08f7b41.script",
            "sortValue": 0
          }
        }
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          0.10584242641925812,
          0.10584242641925812,
          0.10584242641925812
        ],
        "translation": [
          -0.011732704937458038,
          0.014393746852874756,
          0.37257957458496094
        ]
      }
    },
    "created": "2015-07-03T10:34:13.011Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "49db0b325efe45538922859601fb4300.entity",
    "license": "CC0",
    "modified": "2015-07-03T10:52:22.973067+00:00",
    "name": "Refractor 5",
    "static": false,
    "tags": {
      "blocker": "blocker",
      "physics-rectangle": "physics-rectangle"
    }
  },
  "4e6ae469a0c74d5487739bdf6e7d2bc7.script": {
    "body": "'use strict';\n\nvar setup = function(args, ctx, goo) {\n};\n\nvar cleanup = function(args, ctx, goo) {\n\n};\n\nvar update = function(args, ctx, goo) {\n\tif(ctx.lastState !== ctx.worldData.gamestate){\n\t\tctx.lastState = ctx.worldData.gamestate;\n\t\t\n\t\t//console.log(ctx.worldData.gamestate)\n\t\t\n\t\tif(ctx.worldData.gamestate === args.stateName){\n\t\t\t//console.log('show ' + ctx.entity.name + ' on ' + ctx.worldData.gamestate)\n\t\t\tctx.entity.show();\n\t\t\t\n\t\t\tif(args.transitionTimeout >= 0){\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tctx.worldData.gamestate = args.transitionState;\n\t\t\t\t}, args.transitionTimeout * 1000);\n\t\t\t}\n\t\t} else {\n\t\t\t//console.log('hide ' + ctx.entity.name + '' + ctx.worldData.gamestate)\n\t\t\tctx.entity.hide();\n\t\t}\n\t\tctx.worldData.renderDirty += 10;\n\t\t\n\t}\n};\n\nvar parameters = [{\n\tkey:'stateName',\n\ttype:'string',\n\t'default': 'intro'\n}, {\n\tkey:'transitionTimeout',\n\ttype:'float',\n\t'default': -1\n}, {\n\tkey:'transitionState',\n\ttype:'string',\n\t'default': ''\n}];",
    "created": "2015-07-02T19:40:33.484Z",
    "dataModelVersion": 2,
    "deleted": false,
    "dependencies": {},
    "id": "4e6ae469a0c74d5487739bdf6e7d2bc7.script",
    "license": "CC0",
    "modified": "2015-07-03T12:05:48.382583+00:00",
    "name": "Show on gamestate"
  },
  "512a223d0e7a4acbbe2c43c730f2e4fd.entity": {
    "components": {
      "meshData": {
        "shape": "Box",
        "shapeOptions": {
          "textureMode": "Uniform"
        }
      },
      "meshRenderer": {
        "castShadows": true,
        "cullMode": "Dynamic",
        "materials": {
          "a75105712a064b47aad9c89ae72b9207.material": {
            "materialRef": "a75105712a064b47aad9c89ae72b9207.material",
            "sortValue": 0
          }
        },
        "receiveShadows": true,
        "reflectable": true
      },
      "script": {
        "scripts": {
          "ab6c2cb98cbb4e85b3f3bdce18d22dbb.scriptInstance": {
            "name": "Custom script",
            "options": {
              "enabled": true,
              "gotoGameState": "levelselect",
              "hoverCursor": "pointer",
              "hoverScale": [
                1,
                1,
                1
              ],
              "hoverScaleTime": 100,
              "hoverTexture": {},
              "isLevelButton": false
            },
            "scriptRef": "15cd9a6da347432bba16bca6ab3361e5.script",
            "sortValue": 1
          }
        }
      },
      "transform": {
        "children": {
          "2282c7928f2246ed9644a891731a884a.entity": {
            "entityRef": "2282c7928f2246ed9644a891731a884a.entity",
            "sortValue": 0
          }
        },
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          0.3565620183944702,
          0.15062548220157623,
          0.03368491306900978
        ],
        "translation": [
          0,
          -0.022862594574689865,
          0.41902849078178406
        ]
      }
    },
    "created": "2015-07-02T20:02:05.599Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "512a223d0e7a4acbbe2c43c730f2e4fd.entity",
    "license": "CC0",
    "modified": "2015-07-03T13:18:56.587079+00:00",
    "name": "Play button",
    "static": false,
    "tags": {}
  },
  "58ce183ee56748508af13304a4939bfa.entity": {
    "components": {
      "script": {
        "scripts": {
          "f27755a210f24e3585036a5df329928c.scriptInstance": {
            "name": "Custom script",
            "options": {
              "enabled": true,
              "stateName": "intro",
              "transitionState": "levelselect",
              "transitionTimeout": -1
            },
            "scriptRef": "4e6ae469a0c74d5487739bdf6e7d2bc7.script",
            "sortValue": 0
          }
        }
      },
      "transform": {
        "children": {
          "512a223d0e7a4acbbe2c43c730f2e4fd.entity": {
            "entityRef": "512a223d0e7a4acbbe2c43c730f2e4fd.entity",
            "sortValue": 2
          },
          "875c9d3f200a423c8ce2ff333317080e.entity": {
            "entityRef": "875c9d3f200a423c8ce2ff333317080e.entity",
            "sortValue": 0
          },
          "d419bcb384d644aeb88eca53b9be6e05.entity": {
            "entityRef": "d419bcb384d644aeb88eca53b9be6e05.entity",
            "sortValue": 1
          },
          "e68ca73940f542f18dd77329262834f9.entity": {
            "entityRef": "e68ca73940f542f18dd77329262834f9.entity",
            "sortValue": 3
          }
        },
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1.4493248462677002,
          1.4493248462677002,
          1.4493248462677002
        ],
        "translation": [
          0,
          -0.10839017480611801,
          -2
        ]
      }
    },
    "created": "2015-07-02T19:39:23.580Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "58ce183ee56748508af13304a4939bfa.entity",
    "license": "CC0",
    "modified": "2015-07-03T13:19:19.362134+00:00",
    "name": "Intro overlay",
    "static": false,
    "tags": {}
  },
  "632c81696c4e44b88a4cb8bd4bda731f.entity": {
    "components": {
      "script": {
        "scripts": {
          "2854c961b57f405e8cbf964e0ab765a9.scriptinstance": {
            "name": "Custom script",
            "options": {
              "enabled": true,
              "stateName": "finish",
              "transitionState": "levelselect",
              "transitionTimeout": 2
            },
            "scriptRef": "4e6ae469a0c74d5487739bdf6e7d2bc7.script",
            "sortValue": 0
          }
        }
      },
      "transform": {
        "children": {
          "1475c51c694b4da4bbbca303537f6e6a.entity": {
            "entityRef": "1475c51c694b4da4bbbca303537f6e6a.entity",
            "sortValue": 0
          },
          "dddfdece49364bb09550eb6702a093e9.entity": {
            "entityRef": "dddfdece49364bb09550eb6702a093e9.entity",
            "sortValue": 1
          }
        },
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          0,
          0,
          -2
        ]
      }
    },
    "created": "2015-07-03T11:57:04.176Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": true,
    "id": "632c81696c4e44b88a4cb8bd4bda731f.entity",
    "license": "CC0",
    "modified": "2015-07-03T12:03:27.454436+00:00",
    "name": "Finsh overlay",
    "static": false,
    "tags": {}
  },
  "65cddc7e198c4a82b6d586474a04c18d.entity": {
    "components": {
      "html": {
        "imageRefs": {},
        "innerHtml": "<p style=\"font-size: 10vh\">\n\t4\n</p>",
        "useTransformComponent": true
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          0,
          0,
          0
        ]
      }
    },
    "created": "2015-07-03T08:37:02.241Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "65cddc7e198c4a82b6d586474a04c18d.entity",
    "license": "CC0",
    "modified": "2015-07-03T08:37:59.578377+00:00",
    "name": "Html Entity 2",
    "static": false,
    "tags": {}
  },
  "66f3a41b8b9f421ab5be66895fcb26a2.entity": {
    "components": {
      "meshData": {
        "shape": "Quad"
      },
      "meshRenderer": {
        "castShadows": true,
        "cullMode": "Dynamic",
        "materials": {
          "81fcab75bbe646c8bef85e5deaeeffe6.material": {
            "materialRef": "81fcab75bbe646c8bef85e5deaeeffe6.material",
            "sortValue": 0
          }
        },
        "receiveShadows": true,
        "reflectable": true
      },
      "script": {
        "scripts": {
          "82f6e17f75a94000bb0225179a610419.scriptInstance": {
            "name": "Custom script",
            "options": {
              "enabled": true
            },
            "scriptRef": "b17eba7a171a4f7d98c39130e08f7b41.script",
            "sortValue": 0
          }
        }
      },
      "transform": {
        "rotation": [
          0,
          0,
          44.9999978371445
        ],
        "scale": [
          0.25,
          0.25,
          0.25
        ],
        "translation": [
          0,
          0,
          0
        ]
      }
    },
    "created": "2015-06-25T20:02:42.220Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "66f3a41b8b9f421ab5be66895fcb26a2.entity",
    "license": "CC0",
    "modified": "2015-06-29T19:18:26.484444+00:00",
    "name": "Refractor 1",
    "static": false,
    "tags": {
      "physics-rectangle": "physics-rectangle"
    }
  },
  "6c2f9a1b92534c5ea1db625d99a3079e.entity": {
    "components": {
      "meshData": {
        "shape": "Quad"
      },
      "meshRenderer": {
        "castShadows": true,
        "cullMode": "Dynamic",
        "materials": {
          "a7cb6adbf35a4eb0a9be19bd1c43d358.material": {
            "materialRef": "a7cb6adbf35a4eb0a9be19bd1c43d358.material",
            "sortValue": 0
          }
        },
        "receiveShadows": true,
        "reflectable": true
      },
      "script": {
        "scripts": {
          "ffb8a24fca71482fa29fca86881583a5.scriptinstance": {
            "name": "Custom script",
            "options": {
              "enabled": true,
              "gotoGameState": "hint",
              "hoverCursor": "pointer",
              "hoverScale": [
                1,
                1,
                1
              ],
              "hoverScaleTime": 100,
              "hoverTexture": {},
              "isLevelButton": true
            },
            "scriptRef": "15cd9a6da347432bba16bca6ab3361e5.script",
            "sortValue": 0
          }
        }
      },
      "transform": {
        "children": {
          "40fc1454040645eda07943ea47143e4b.entity": {
            "entityRef": "40fc1454040645eda07943ea47143e4b.entity",
            "sortValue": 0
          }
        },
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          0.18290665745735168,
          0.1840209811925888,
          0.3852245509624481
        ],
        "translation": [
          -0.0068104565143585205,
          -0.4736246168613434,
          0.39484453201293945
        ]
      }
    },
    "created": "2015-07-03T12:43:12.090Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "6c2f9a1b92534c5ea1db625d99a3079e.entity",
    "license": "CC0",
    "modified": "2015-07-03T12:58:02.126133+00:00",
    "name": "Level 8",
    "static": false,
    "tags": {}
  },
  "7023e9a8927b49dcaf9342347393eebe.script": {
    "body": "/**\n * The MIT License (MIT)\n *\n * Copyright (c) 2015 p2.js authors\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n!function(a){if(\"object\"==typeof exports)module.exports=a();else if(\"function\"==typeof define&&false)define(a);else{var b;\"undefined\"!=typeof window?b=window:\"undefined\"!=typeof global?b=global:\"undefined\"!=typeof self&&(b=self),b.p2=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i=\"function\"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error(\"Cannot find module '\"+g+\"'\")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f=\"function\"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(){}var e=a(\"./Scalar\");b.exports=d,d.lineInt=function(a,b,c){c=c||0;var d,f,g,h,i,j,k,l=[0,0];return d=a[1][1]-a[0][1],f=a[0][0]-a[1][0],g=d*a[0][0]+f*a[0][1],h=b[1][1]-b[0][1],i=b[0][0]-b[1][0],j=h*b[0][0]+i*b[0][1],k=d*i-h*f,e.eq(k,0,c)||(l[0]=(i*g-f*j)/k,l[1]=(d*j-h*g)/k),l},d.segmentsIntersect=function(a,b,c,d){var e=b[0]-a[0],f=b[1]-a[1],g=d[0]-c[0],h=d[1]-c[1];if(g*f-h*e==0)return!1;var i=(e*(c[1]-a[1])+f*(a[0]-c[0]))/(g*f-h*e),j=(g*(a[1]-c[1])+h*(c[0]-a[0]))/(h*e-g*f);return i>=0&&1>=i&&j>=0&&1>=j}},{\"./Scalar\":4}],2:[function(a,b,c){function d(){}b.exports=d,d.area=function(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(c[0]-a[0])*(b[1]-a[1])},d.left=function(a,b,c){return d.area(a,b,c)>0},d.leftOn=function(a,b,c){return d.area(a,b,c)>=0},d.right=function(a,b,c){return d.area(a,b,c)<0},d.rightOn=function(a,b,c){return d.area(a,b,c)<=0};var e=[],f=[];d.collinear=function(a,b,c,g){if(g){var h=e,i=f;h[0]=b[0]-a[0],h[1]=b[1]-a[1],i[0]=c[0]-b[0],i[1]=c[1]-b[1];var j=h[0]*i[0]+h[1]*i[1],k=Math.sqrt(h[0]*h[0]+h[1]*h[1]),l=Math.sqrt(i[0]*i[0]+i[1]*i[1]),m=Math.acos(j/(k*l));return g>m}return 0==d.area(a,b,c)},d.sqdist=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d}},{}],3:[function(a,b,c){function d(){this.vertices=[]}function e(a,b,c,d,e){e=e||0;var f=b[1]-a[1],g=a[0]-b[0],i=f*a[0]+g*a[1],j=d[1]-c[1],k=c[0]-d[0],l=j*c[0]+k*c[1],m=f*k-j*g;return h.eq(m,0,e)?[0,0]:[(k*i-g*l)/m,(f*l-j*i)/m]}var f=a(\"./Line\"),g=a(\"./Point\"),h=a(\"./Scalar\");b.exports=d,d.prototype.at=function(a){var b=this.vertices,c=b.length;return b[0>a?a%c+c:a%c]},d.prototype.first=function(){return this.vertices[0]},d.prototype.last=function(){return this.vertices[this.vertices.length-1]},d.prototype.clear=function(){this.vertices.length=0},d.prototype.append=function(a,b,c){if(\"undefined\"==typeof b)throw new Error(\"From is not given!\");if(\"undefined\"==typeof c)throw new Error(\"To is not given!\");if(b>c-1)throw new Error(\"lol1\");if(c>a.vertices.length)throw new Error(\"lol2\");if(0>b)throw new Error(\"lol3\");for(var d=b;c>d;d++)this.vertices.push(a.vertices[d])},d.prototype.makeCCW=function(){for(var a=0,b=this.vertices,c=1;c<this.vertices.length;++c)(b[c][1]<b[a][1]||b[c][1]==b[a][1]&&b[c][0]>b[a][0])&&(a=c);g.left(this.at(a-1),this.at(a),this.at(a+1))||this.reverse()},d.prototype.reverse=function(){for(var a=[],b=0,c=this.vertices.length;b!==c;b++)a.push(this.vertices.pop());this.vertices=a},d.prototype.isReflex=function(a){return g.right(this.at(a-1),this.at(a),this.at(a+1))};var i=[],j=[];d.prototype.canSee=function(a,b){var c,d,e=i,h=j;if(g.leftOn(this.at(a+1),this.at(a),this.at(b))&&g.rightOn(this.at(a-1),this.at(a),this.at(b)))return!1;d=g.sqdist(this.at(a),this.at(b));for(var k=0;k!==this.vertices.length;++k)if((k+1)%this.vertices.length!==a&&k!==a&&g.leftOn(this.at(a),this.at(b),this.at(k+1))&&g.rightOn(this.at(a),this.at(b),this.at(k))&&(e[0]=this.at(a),e[1]=this.at(b),h[0]=this.at(k),h[1]=this.at(k+1),c=f.lineInt(e,h),g.sqdist(this.at(a),c)<d))return!1;return!0},d.prototype.copy=function(a,b,c){var e=c||new d;if(e.clear(),b>a)for(var f=a;b>=f;f++)e.vertices.push(this.vertices[f]);else{for(var f=0;b>=f;f++)e.vertices.push(this.vertices[f]);for(var f=a;f<this.vertices.length;f++)e.vertices.push(this.vertices[f])}return e},d.prototype.getCutEdges=function(){for(var a=[],b=[],c=[],e=new d,f=Number.MAX_VALUE,g=0;g<this.vertices.length;++g)if(this.isReflex(g))for(var h=0;h<this.vertices.length;++h)if(this.canSee(g,h)){b=this.copy(g,h,e).getCutEdges(),c=this.copy(h,g,e).getCutEdges();for(var i=0;i<c.length;i++)b.push(c[i]);b.length<f&&(a=b,f=b.length,a.push([this.at(g),this.at(h)]))}return a},d.prototype.decomp=function(){var a=this.getCutEdges();return a.length>0?this.slice(a):[this]},d.prototype.slice=function(a){if(0==a.length)return[this];if(a instanceof Array&&a.length&&a[0]instanceof Array&&2==a[0].length&&a[0][0]instanceof Array){for(var b=[this],c=0;c<a.length;c++)for(var d=a[c],e=0;e<b.length;e++){var f=b[e],g=f.slice(d);if(g){b.splice(e,1),b.push(g[0],g[1]);break}}return b}var d=a,c=this.vertices.indexOf(d[0]),e=this.vertices.indexOf(d[1]);return-1!=c&&-1!=e?[this.copy(c,e),this.copy(e,c)]:!1},d.prototype.isSimple=function(){for(var a=this.vertices,b=0;b<a.length-1;b++)for(var c=0;b-1>c;c++)if(f.segmentsIntersect(a[b],a[b+1],a[c],a[c+1]))return!1;for(var b=1;b<a.length-2;b++)if(f.segmentsIntersect(a[0],a[a.length-1],a[b],a[b+1]))return!1;return!0},d.prototype.quickDecomp=function(a,b,c,f,h,i){h=h||100,i=i||0,f=f||25,a=\"undefined\"!=typeof a?a:[],b=b||[],c=c||[];var j=[0,0],k=[0,0],l=[0,0],m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=new d,u=new d,v=this,w=this.vertices;if(w.length<3)return a;if(i++,i>h)return console.warn(\"quickDecomp: max level (\"+h+\") reached.\"),a;for(var x=0;x<this.vertices.length;++x)if(v.isReflex(x)){b.push(v.vertices[x]),m=n=Number.MAX_VALUE;for(var y=0;y<this.vertices.length;++y)g.left(v.at(x-1),v.at(x),v.at(y))&&g.rightOn(v.at(x-1),v.at(x),v.at(y-1))&&(l=e(v.at(x-1),v.at(x),v.at(y),v.at(y-1)),g.right(v.at(x+1),v.at(x),l)&&(o=g.sqdist(v.vertices[x],l),n>o&&(n=o,k=l,r=y))),g.left(v.at(x+1),v.at(x),v.at(y+1))&&g.rightOn(v.at(x+1),v.at(x),v.at(y))&&(l=e(v.at(x+1),v.at(x),v.at(y),v.at(y+1)),g.left(v.at(x-1),v.at(x),l)&&(o=g.sqdist(v.vertices[x],l),m>o&&(m=o,j=l,q=y)));if(r==(q+1)%this.vertices.length)l[0]=(k[0]+j[0])/2,l[1]=(k[1]+j[1])/2,c.push(l),q>x?(t.append(v,x,q+1),t.vertices.push(l),u.vertices.push(l),0!=r&&u.append(v,r,v.vertices.length),u.append(v,0,x+1)):(0!=x&&t.append(v,x,v.vertices.length),t.append(v,0,q+1),t.vertices.push(l),u.vertices.push(l),u.append(v,r,x+1));else{if(r>q&&(q+=this.vertices.length),p=Number.MAX_VALUE,r>q)return a;for(var y=r;q>=y;++y)g.leftOn(v.at(x-1),v.at(x),v.at(y))&&g.rightOn(v.at(x+1),v.at(x),v.at(y))&&(o=g.sqdist(v.at(x),v.at(y)),p>o&&(p=o,s=y%this.vertices.length));s>x?(t.append(v,x,s+1),0!=s&&u.append(v,s,w.length),u.append(v,0,x+1)):(0!=x&&t.append(v,x,w.length),t.append(v,0,s+1),u.append(v,s,x+1))}return t.vertices.length<u.vertices.length?(t.quickDecomp(a,b,c,f,h,i),u.quickDecomp(a,b,c,f,h,i)):(u.quickDecomp(a,b,c,f,h,i),t.quickDecomp(a,b,c,f,h,i)),a}return a.push(this),a},d.prototype.removeCollinearPoints=function(a){for(var b=0,c=this.vertices.length-1;this.vertices.length>3&&c>=0;--c)g.collinear(this.at(c-1),this.at(c),this.at(c+1),a)&&(this.vertices.splice(c%this.vertices.length,1),c--,b++);return b}},{\"./Line\":1,\"./Point\":2,\"./Scalar\":4}],4:[function(a,b,c){function d(){}b.exports=d,d.eq=function(a,b,c){return c=c||0,Math.abs(a-b)<c}},{}],5:[function(a,b,c){b.exports={Polygon:a(\"./Polygon\"),Point:a(\"./Point\")}},{\"./Point\":2,\"./Polygon\":3}],6:[function(a,b,c){b.exports={name:\"p2\",version:\"0.6.1\",description:\"A JavaScript 2D physics engine.\",author:\"Stefan Hedman <schteppe@gmail.com> (http://steffe.se)\",keywords:[\"p2.js\",\"p2\",\"physics\",\"engine\",\"2d\"],main:\"./src/p2.js\",engines:{node:\"*\"},repository:{type:\"git\",url:\"https://github.com/schteppe/p2.js.git\"},bugs:{url:\"https://github.com/schteppe/p2.js/issues\"},licenses:[{type:\"MIT\"}],devDependencies:{grunt:\"^0.4.5\",\"grunt-contrib-jshint\":\"~0.9.2\",\"grunt-contrib-nodeunit\":\"~0.1.2\",\"grunt-contrib-uglify\":\"~0.4.0\",\"grunt-contrib-watch\":\"~0.5.0\",\"grunt-browserify\":\"~2.0.1\",\"grunt-contrib-concat\":\"^0.4.0\"},dependencies:{\"poly-decomp\":\"0.1.0\"}}},{}],7:[function(a,b,c){function d(a){this.lowerBound=e.create(),a&&a.lowerBound&&e.copy(this.lowerBound,a.lowerBound),this.upperBound=e.create(),a&&a.upperBound&&e.copy(this.upperBound,a.upperBound)}{var e=a(\"../math/vec2\");a(\"../utils/Utils\")}b.exports=d;var f=e.create();d.prototype.setFromPoints=function(a,b,c,d){var g=this.lowerBound,h=this.upperBound;\"number\"!=typeof c&&(c=0),0!==c?e.rotate(g,a[0],c):e.copy(g,a[0]),e.copy(h,g);for(var i=Math.cos(c),j=Math.sin(c),k=1;k<a.length;k++){var l=a[k];if(0!==c){var m=l[0],n=l[1];f[0]=i*m-j*n,f[1]=j*m+i*n,l=f}for(var o=0;2>o;o++)l[o]>h[o]&&(h[o]=l[o]),l[o]<g[o]&&(g[o]=l[o])}b&&(e.add(this.lowerBound,this.lowerBound,b),e.add(this.upperBound,this.upperBound,b)),d&&(this.lowerBound[0]-=d,this.lowerBound[1]-=d,this.upperBound[0]+=d,this.upperBound[1]+=d)},d.prototype.copy=function(a){e.copy(this.lowerBound,a.lowerBound),e.copy(this.upperBound,a.upperBound)},d.prototype.extend=function(a){for(var b=2;b--;){var c=a.lowerBound[b];this.lowerBound[b]>c&&(this.lowerBound[b]=c);var d=a.upperBound[b];this.upperBound[b]<d&&(this.upperBound[b]=d)}},d.prototype.overlaps=function(a){var b=this.lowerBound,c=this.upperBound,d=a.lowerBound,e=a.upperBound;return(d[0]<=c[0]&&c[0]<=e[0]||b[0]<=e[0]&&e[0]<=c[0])&&(d[1]<=c[1]&&c[1]<=e[1]||b[1]<=e[1]&&e[1]<=c[1])},d.prototype.overlapsRay=function(a){var b=[],c=0;b[0]=1/a._direction[0],b[1]=1/a._direction[1];var d=(this.lowerBound[0]-a.from[0])*b[0],e=(this.upperBound[0]-a.from[0])*b[0],f=(this.lowerBound[1]-a.from[1])*b[1],g=(this.upperBound[1]-a.from[1])*b[1],h=Math.max(Math.max(Math.min(d,e),Math.min(f,g))),i=Math.min(Math.min(Math.max(d,e),Math.max(f,g)));return 0>i?(c=i,!1):h>i?(c=i,!1):(c=h,!0)}},{\"../math/vec2\":31,\"../utils/Utils\":58}],8:[function(a,b,c){function d(a){this.type=a,this.result=[],this.world=null,this.boundingVolumeType=d.AABB}var e=a(\"../math/vec2\"),f=a(\"../objects/Body\");b.exports=d,d.AABB=1,d.BOUNDING_CIRCLE=2,d.prototype.setWorld=function(a){this.world=a},d.prototype.getCollisionPairs=function(a){throw new Error(\"getCollisionPairs must be implemented in a subclass!\")};var g=e.create();d.boundingRadiusCheck=function(a,b){e.sub(g,a.position,b.position);var c=e.squaredLength(g),d=a.boundingRadius+b.boundingRadius;return d*d>=c},d.aabbCheck=function(a,b){return a.getAABB().overlaps(b.getAABB())},d.prototype.boundingVolumeCheck=function(a,b){var c;switch(this.boundingVolumeType){case d.BOUNDING_CIRCLE:c=d.boundingRadiusCheck(a,b);break;case d.AABB:c=d.aabbCheck(a,b);break;default:throw new Error(\"Bounding volume type not recognized: \"+this.boundingVolumeType)}return c},d.canCollide=function(a,b){return a.type===f.STATIC&&b.type===f.STATIC?!1:a.type===f.KINEMATIC&&b.type===f.STATIC||a.type===f.STATIC&&b.type===f.KINEMATIC?!1:a.type===f.KINEMATIC&&b.type===f.KINEMATIC?!1:a.sleepState===f.SLEEPING&&b.sleepState===f.SLEEPING?!1:a.sleepState===f.SLEEPING&&b.type===f.STATIC||b.sleepState===f.SLEEPING&&a.type===f.STATIC?!1:!0},d.NAIVE=1,d.SAP=2},{\"../math/vec2\":31,\"../objects/Body\":32}],9:[function(a,b,c){function d(a){e.apply(this),a=f.defaults(a,{xmin:-100,xmax:100,ymin:-100,ymax:100,nx:10,ny:10}),this.xmin=a.xmin,this.ymin=a.ymin,this.xmax=a.xmax,this.ymax=a.ymax,this.nx=a.nx,this.ny=a.ny,this.binsizeX=(this.xmax-this.xmin)/this.nx,this.binsizeY=(this.ymax-this.ymin)/this.ny}var e=(a(\"../shapes/Circle\"),a(\"../shapes/Plane\"),a(\"../shapes/Particle\"),a(\"../collision/Broadphase\")),f=(a(\"../math/vec2\"),a(\"../utils/Utils\"));b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.getCollisionPairs=function(a){for(var b=[],c=a.bodies,d=c.length,f=(this.binsizeX,this.binsizeY,this.nx),g=this.ny,h=this.xmin,i=this.ymin,j=this.xmax,k=this.ymax,l=[],m=f*g,n=0;m>n;n++)l.push([]);for(var o=f/(j-h),p=g/(k-i),n=0;n!==d;n++)for(var q=c[n],r=q.aabb,s=Math.max(r.lowerBound[0],h),t=Math.max(r.lowerBound[1],i),u=Math.min(r.upperBound[0],j),v=Math.min(r.upperBound[1],k),w=Math.floor(o*(s-h)),x=Math.floor(p*(t-i)),y=Math.floor(o*(u-h)),z=Math.floor(p*(v-i)),A=w;y>=A;A++)for(var B=x;z>=B;B++){var C=A,D=B,E=C*(g-1)+D;E>=0&&m>E&&l[E].push(q)}for(var n=0;n!==m;n++)for(var F=l[n],A=0,G=F.length;A!==G;A++)for(var q=F[A],B=0;B!==A;B++){var H=F[B];e.canCollide(q,H)&&this.boundingVolumeCheck(q,H)&&b.push(q,H)}return b}},{\"../collision/Broadphase\":8,\"../math/vec2\":31,\"../shapes/Circle\":39,\"../shapes/Particle\":43,\"../shapes/Plane\":44,\"../utils/Utils\":58}],10:[function(a,b,c){function d(){e.call(this,e.NAIVE)}{var e=(a(\"../shapes/Circle\"),a(\"../shapes/Plane\"),a(\"../shapes/Shape\"),a(\"../shapes/Particle\"),a(\"../collision/Broadphase\"));a(\"../math/vec2\")}b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.getCollisionPairs=function(a){var b=a.bodies,c=this.result;c.length=0;for(var d=0,f=b.length;d!==f;d++)for(var g=b[d],h=0;d>h;h++){var i=b[h];e.canCollide(g,i)&&this.boundingVolumeCheck(g,i)&&c.push(g,i)}return c},d.prototype.aabbQuery=function(a,b,c){c=c||[];for(var d=a.bodies,e=0;e<d.length;e++){var f=d[e];f.aabbNeedsUpdate&&f.updateAABB(),f.aabb.overlaps(b)&&c.push(f)}return c}},{\"../collision/Broadphase\":8,\"../math/vec2\":31,\"../shapes/Circle\":39,\"../shapes/Particle\":43,\"../shapes/Plane\":44,\"../shapes/Shape\":46}],11:[function(a,b,c){function d(){this.contactEquations=[],this.frictionEquations=[],this.enableFriction=!0,this.enabledEquations=!0,this.slipForce=10,this.frictionCoefficient=.3,this.surfaceVelocity=0,this.contactEquationPool=new k({size:32}),this.frictionEquationPool=new l({size:64}),this.restitution=0,this.stiffness=n.DEFAULT_STIFFNESS,this.relaxation=n.DEFAULT_RELAXATION,this.frictionStiffness=n.DEFAULT_STIFFNESS,this.frictionRelaxation=n.DEFAULT_RELAXATION,this.enableFrictionReduction=!0,this.collidingBodiesLastStep=new m,this.contactSkinSize=.01}function e(a,b){g.set(a.vertices[0],.5*-b.length,-b.radius),g.set(a.vertices[1],.5*b.length,-b.radius),g.set(a.vertices[2],.5*b.length,b.radius),g.set(a.vertices[3],.5*-b.length,b.radius)}function f(a,b,c,d){for(var e=T,f=U,j=V,k=W,l=a,m=b.vertices,n=null,o=0;o!==m.length+1;o++){var p=m[o%m.length],q=m[(o+1)%m.length];g.rotate(e,p,d),g.rotate(f,q,d),i(e,e,c),i(f,f,c),h(j,e,l),h(k,f,l);var r=g.crossLength(j,k);if(null===n&&(n=r),0>=r*n)return!1;n=r}return!0}var g=a(\"../math/vec2\"),h=g.sub,i=g.add,j=g.dot,k=(a(\"../utils/Utils\"),a(\"../utils/ContactEquationPool\")),l=a(\"../utils/FrictionEquationPool\"),m=a(\"../utils/TupleDictionary\"),n=a(\"../equations/Equation\"),o=(a(\"../equations/ContactEquation\"),a(\"../equations/FrictionEquation\"),a(\"../shapes/Circle\")),p=a(\"../shapes/Convex\"),q=a(\"../shapes/Shape\"),r=(a(\"../objects/Body\"),a(\"../shapes/Rectangle\"));b.exports=d;var s=g.fromValues(0,1),t=g.fromValues(0,0),u=g.fromValues(0,0),v=g.fromValues(0,0),w=g.fromValues(0,0),x=g.fromValues(0,0),y=g.fromValues(0,0),z=g.fromValues(0,0),A=g.fromValues(0,0),B=g.fromValues(0,0),C=g.fromValues(0,0),D=g.fromValues(0,0),E=g.fromValues(0,0),F=g.fromValues(0,0),G=g.fromValues(0,0),H=g.fromValues(0,0),I=g.fromValues(0,0),J=g.fromValues(0,0),K=g.fromValues(0,0),L=[],M=g.create(),N=g.create();d.prototype.bodiesOverlap=function(a,b){for(var c=M,d=N,e=0,f=a.shapes.length;e!==f;e++){{var g=a.shapes[e],h=a.shapeOffsets[e];a.shapeAngles[e]}a.toWorldFrame(c,h);for(var i=0,j=b.shapes.length;i!==j;i++){{var k=b.shapes[i],l=b.shapeOffsets[i];b.shapeAngles[i]}if(b.toWorldFrame(d,l),this[g.type|k.type](a,g,c,g.angle+a.angle,b,k,d,k.angle+b.angle,!0))return!0}}return!1},d.prototype.collidedLastStep=function(a,b){var c=0|a.id,d=0|b.id;return!!this.collidingBodiesLastStep.get(c,d)},d.prototype.reset=function(){this.collidingBodiesLastStep.reset();for(var a=this.contactEquations,b=a.length;b--;){var c=a[b],d=c.bodyA.id,e=c.bodyB.id;this.collidingBodiesLastStep.set(d,e,!0)}for(var f=this.contactEquations,g=this.frictionEquations,h=0;h<f.length;h++)this.contactEquationPool.release(f[h]);for(var h=0;h<g.length;h++)this.frictionEquationPool.release(g[h]);this.contactEquations.length=this.frictionEquations.length=0},d.prototype.createContactEquation=function(a,b,c,d){var e=this.contactEquationPool.get();return e.bodyA=a,e.bodyB=b,e.shapeA=c,e.shapeB=d,e.restitution=this.restitution,e.firstImpact=!this.collidedLastStep(a,b),e.stiffness=this.stiffness,e.relaxation=this.relaxation,e.needsUpdate=!0,e.enabled=this.enabledEquations,e.offset=this.contactSkinSize,e},d.prototype.createFrictionEquation=function(a,b,c,d){var e=this.frictionEquationPool.get();return e.bodyA=a,e.bodyB=b,e.shapeA=c,e.shapeB=d,e.setSlipForce(this.slipForce),e.frictionCoefficient=this.frictionCoefficient,e.relativeVelocity=this.surfaceVelocity,e.enabled=this.enabledEquations,e.needsUpdate=!0,e.stiffness=this.frictionStiffness,e.relaxation=this.frictionRelaxation,e.contactEquations.length=0,e},d.prototype.createFrictionFromContact=function(a){var b=this.createFrictionEquation(a.bodyA,a.bodyB,a.shapeA,a.shapeB);return g.copy(b.contactPointA,a.contactPointA),g.copy(b.contactPointB,a.contactPointB),g.rotate90cw(b.t,a.normalA),b.contactEquations.push(a),b},d.prototype.createFrictionFromAverage=function(a){{var b=this.contactEquations[this.contactEquations.length-1],c=this.createFrictionEquation(b.bodyA,b.bodyB,b.shapeA,b.shapeB),d=b.bodyA;b.bodyB}g.set(c.contactPointA,0,0),g.set(c.contactPointB,0,0),g.set(c.t,0,0);for(var e=0;e!==a;e++)b=this.contactEquations[this.contactEquations.length-1-e],b.bodyA===d?(g.add(c.t,c.t,b.normalA),g.add(c.contactPointA,c.contactPointA,b.contactPointA),g.add(c.contactPointB,c.contactPointB,b.contactPointB)):(g.sub(c.t,c.t,b.normalA),g.add(c.contactPointA,c.contactPointA,b.contactPointB),g.add(c.contactPointB,c.contactPointB,b.contactPointA)),c.contactEquations.push(b);var f=1/a;return g.scale(c.contactPointA,c.contactPointA,f),g.scale(c.contactPointB,c.contactPointB,f),g.normalize(c.t,c.t),g.rotate90cw(c.t,c.t),c},d.prototype[q.LINE|q.CONVEX]=d.prototype.convexLine=function(a,b,c,d,e,f,g,h,i){return i?!1:0},d.prototype[q.LINE|q.RECTANGLE]=d.prototype.lineRectangle=function(a,b,c,d,e,f,g,h,i){return i?!1:0};var O=new r(1,1),P=g.create();d.prototype[q.CAPSULE|q.CONVEX]=d.prototype[q.CAPSULE|q.RECTANGLE]=d.prototype.convexCapsule=function(a,b,c,d,f,h,i,j,k){var l=P;g.set(l,h.length/2,0),g.rotate(l,l,j),g.add(l,l,i);var m=this.circleConvex(f,h,l,j,a,b,c,d,k,h.radius);g.set(l,-h.length/2,0),g.rotate(l,l,j),g.add(l,l,i);var n=this.circleConvex(f,h,l,j,a,b,c,d,k,h.radius);if(k&&(m||n))return!0;var o=O;e(o,h);var p=this.convexConvex(a,b,c,d,f,o,i,j,k);return p+m+n},d.prototype[q.CAPSULE|q.LINE]=d.prototype.lineCapsule=function(a,b,c,d,e,f,g,h,i){return i?!1:0};var Q=g.create(),R=g.create(),S=new r(1,1);d.prototype[q.CAPSULE|q.CAPSULE]=d.prototype.capsuleCapsule=function(a,b,c,d,f,h,i,j,k){for(var l,m=Q,n=R,o=0,p=0;2>p;p++){g.set(m,(0===p?-1:1)*b.length/2,0),g.rotate(m,m,d),g.add(m,m,c);for(var q=0;2>q;q++){g.set(n,(0===q?-1:1)*h.length/2,0),g.rotate(n,n,j),g.add(n,n,i),this.enableFrictionReduction&&(l=this.enableFriction,this.enableFriction=!1);var r=this.circleCircle(a,b,m,d,f,h,n,j,k,b.radius,h.radius);if(this.enableFrictionReduction&&(this.enableFriction=l),k&&r)return!0;o+=r}}this.enableFrictionReduction&&(l=this.enableFriction,this.enableFriction=!1);var s=S;e(s,b);var t=this.convexCapsule(a,s,c,d,f,h,i,j,k);if(this.enableFrictionReduction&&(this.enableFriction=l),k&&t)return!0;if(o+=t,this.enableFrictionReduction){var l=this.enableFriction;this.enableFriction=!1}e(s,h);var u=this.convexCapsule(f,s,i,j,a,b,c,d,k);return this.enableFrictionReduction&&(this.enableFriction=l),k&&u?!0:(o+=u,this.enableFrictionReduction&&o&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(o)),o)},d.prototype[q.LINE|q.LINE]=d.prototype.lineLine=function(a,b,c,d,e,f,g,h,i){return i?!1:0},d.prototype[q.PLANE|q.LINE]=d.prototype.planeLine=function(a,b,c,d,e,f,k,l,m){var n=t,o=u,p=v,q=w,r=x,C=y,D=z,E=A,F=B,G=L,H=0;g.set(n,-f.length/2,0),g.set(o,f.length/2,0),g.rotate(p,n,l),g.rotate(q,o,l),i(p,p,k),i(q,q,k),g.copy(n,p),g.copy(o,q),h(r,o,n),g.normalize(C,r),g.rotate90cw(F,C),g.rotate(E,s,d),G[0]=n,G[1]=o;for(var I=0;I<G.length;I++){var J=G[I];h(D,J,c);var K=j(D,E);if(0>K){if(m)return!0;var M=this.createContactEquation(a,e,b,f);H++,g.copy(M.normalA,E),g.normalize(M.normalA,M.normalA),g.scale(D,E,K),h(M.contactPointA,J,D),h(M.contactPointA,M.contactPointA,a.position),h(M.contactPointB,J,k),i(M.contactPointB,M.contactPointB,k),h(M.contactPointB,M.contactPointB,e.position),this.contactEquations.push(M),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(M))}}return m?!1:(this.enableFrictionReduction||H&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(H)),H)},d.prototype[q.PARTICLE|q.CAPSULE]=d.prototype.particleCapsule=function(a,b,c,d,e,f,g,h,i){return this.circleLine(a,b,c,d,e,f,g,h,i,f.radius,0)},d.prototype[q.CIRCLE|q.LINE]=d.prototype.circleLine=function(a,b,c,d,e,f,k,l,m,n,o){var n=n||0,o=\"undefined\"!=typeof o?o:b.radius,p=t,q=u,r=v,s=w,H=x,I=y,J=z,K=A,M=B,N=C,O=D,P=E,Q=F,R=G,S=L;g.set(K,-f.length/2,0),g.set(M,f.length/2,0),g.rotate(N,K,l),g.rotate(O,M,l),i(N,N,k),i(O,O,k),g.copy(K,N),g.copy(M,O),h(I,M,K),g.normalize(J,I),g.rotate90cw(H,J),h(P,c,K);var T=j(P,H);h(s,K,k),h(Q,c,k);var U=o+n;if(Math.abs(T)<U){g.scale(p,H,T),h(r,c,p),g.scale(q,H,j(H,Q)),g.normalize(q,q),g.scale(q,q,n),i(r,r,q);var V=j(J,r),W=j(J,K),X=j(J,M);if(V>W&&X>V){if(m)return!0;var Y=this.createContactEquation(a,e,b,f);return g.scale(Y.normalA,p,-1),g.normalize(Y.normalA,Y.normalA),g.scale(Y.contactPointA,Y.normalA,o),i(Y.contactPointA,Y.contactPointA,c),h(Y.contactPointA,Y.contactPointA,a.position),h(Y.contactPointB,r,k),i(Y.contactPointB,Y.contactPointB,k),h(Y.contactPointB,Y.contactPointB,e.position),this.contactEquations.push(Y),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(Y)),1}}S[0]=K,S[1]=M;for(var Z=0;Z<S.length;Z++){var $=S[Z];if(h(P,$,c),g.squaredLength(P)<Math.pow(U,2)){if(m)return!0;var Y=this.createContactEquation(a,e,b,f);return g.copy(Y.normalA,P),g.normalize(Y.normalA,Y.normalA),g.scale(Y.contactPointA,Y.normalA,o),i(Y.contactPointA,Y.contactPointA,c),h(Y.contactPointA,Y.contactPointA,a.position),h(Y.contactPointB,$,k),g.scale(R,Y.normalA,-n),i(Y.contactPointB,Y.contactPointB,R),i(Y.contactPointB,Y.contactPointB,k),h(Y.contactPointB,Y.contactPointB,e.position),this.contactEquations.push(Y),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(Y)),1}}return 0},d.prototype[q.CIRCLE|q.CAPSULE]=d.prototype.circleCapsule=function(a,b,c,d,e,f,g,h,i){return this.circleLine(a,b,c,d,e,f,g,h,i,f.radius)},d.prototype[q.CIRCLE|q.CONVEX]=d.prototype[q.CIRCLE|q.RECTANGLE]=d.prototype.circleConvex=function(a,b,c,d,e,j,k,l,m,n){for(var n=\"number\"==typeof n?n:b.radius,o=t,p=u,q=v,r=w,s=x,y=C,z=D,A=F,B=G,E=H,J=I,K=!1,L=Number.MAX_VALUE,M=j.vertices,N=0;N!==M.length+1;N++){var O=M[N%M.length],P=M[(N+1)%M.length];if(g.rotate(o,O,l),g.rotate(p,P,l),i(o,o,k),i(p,p,k),h(q,p,o),g.normalize(r,q),g.rotate90cw(s,r),g.scale(B,s,-b.radius),i(B,B,c),f(B,j,k,l)){g.sub(E,o,B);var Q=Math.abs(g.dot(E,s));L>Q&&(g.copy(J,B),L=Q,g.scale(A,s,Q),g.add(A,A,B),K=!0)}}if(K){if(m)return!0;var R=this.createContactEquation(a,e,b,j);return g.sub(R.normalA,J,c),g.normalize(R.normalA,R.normalA),g.scale(R.contactPointA,R.normalA,n),i(R.contactPointA,R.contactPointA,c),h(R.contactPointA,R.contactPointA,a.position),h(R.contactPointB,A,k),i(R.contactPointB,R.contactPointB,k),h(R.contactPointB,R.contactPointB,e.position),this.contactEquations.push(R),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(R)),1}if(n>0)for(var N=0;N<M.length;N++){var S=M[N];if(g.rotate(z,S,l),i(z,z,k),h(y,z,c),g.squaredLength(y)<Math.pow(n,2)){if(m)return!0;var R=this.createContactEquation(a,e,b,j);return g.copy(R.normalA,y),g.normalize(R.normalA,R.normalA),g.scale(R.contactPointA,R.normalA,n),i(R.contactPointA,R.contactPointA,c),h(R.contactPointA,R.contactPointA,a.position),h(R.contactPointB,z,k),i(R.contactPointB,R.contactPointB,k),h(R.contactPointB,R.contactPointB,e.position),this.contactEquations.push(R),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(R)),1}}return 0};var T=g.create(),U=g.create(),V=g.create(),W=g.create();d.prototype[q.PARTICLE|q.CONVEX]=d.prototype[q.PARTICLE|q.RECTANGLE]=d.prototype.particleConvex=function(a,b,c,d,e,k,l,m,n){var o=t,p=u,q=v,r=w,s=x,A=y,B=z,D=C,E=F,G=J,H=K,I=Number.MAX_VALUE,L=!1,M=k.vertices;if(!f(c,k,l,m))return 0;if(n)return!0;for(var N=0;N!==M.length+1;N++){var O=M[N%M.length],P=M[(N+1)%M.length];g.rotate(o,O,m),g.rotate(p,P,m),i(o,o,l),i(p,p,l),h(q,p,o),g.normalize(r,q),g.rotate90cw(s,r),h(D,c,o);{j(D,s)}h(A,o,l),h(B,c,l),g.sub(G,o,c);var Q=Math.abs(g.dot(G,s));I>Q&&(I=Q,g.scale(E,s,Q),g.add(E,E,c),g.copy(H,s),L=!0)}if(L){var R=this.createContactEquation(a,e,b,k);return g.scale(R.normalA,H,-1),g.normalize(R.normalA,R.normalA),g.set(R.contactPointA,0,0),i(R.contactPointA,R.contactPointA,c),h(R.contactPointA,R.contactPointA,a.position),h(R.contactPointB,E,l),i(R.contactPointB,R.contactPointB,l),h(R.contactPointB,R.contactPointB,e.position),this.contactEquations.push(R),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(R)),1}return 0},d.prototype[q.CIRCLE]=d.prototype.circleCircle=function(a,b,c,d,e,f,j,k,l,m,n){var o=t,m=m||b.radius,n=n||f.radius;h(o,c,j);var p=m+n;if(g.squaredLength(o)>Math.pow(p,2))return 0;if(l)return!0;var q=this.createContactEquation(a,e,b,f);return h(q.normalA,j,c),g.normalize(q.normalA,q.normalA),g.scale(q.contactPointA,q.normalA,m),g.scale(q.contactPointB,q.normalA,-n),i(q.contactPointA,q.contactPointA,c),h(q.contactPointA,q.contactPointA,a.position),i(q.contactPointB,q.contactPointB,j),h(q.contactPointB,q.contactPointB,e.position),this.contactEquations.push(q),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(q)),1},d.prototype[q.PLANE|q.CONVEX]=d.prototype[q.PLANE|q.RECTANGLE]=d.prototype.planeConvex=function(a,b,c,d,e,f,k,l,m){var n=t,o=u,p=v,q=0;g.rotate(o,s,d);for(var r=0;r!==f.vertices.length;r++){var w=f.vertices[r];if(g.rotate(n,w,l),i(n,n,k),h(p,n,c),j(p,o)<=0){if(m)return!0;q++;var x=this.createContactEquation(a,e,b,f);h(p,n,c),g.copy(x.normalA,o);var y=j(p,x.normalA);g.scale(p,x.normalA,y),h(x.contactPointB,n,e.position),h(x.contactPointA,n,p),h(x.contactPointA,x.contactPointA,a.position),this.contactEquations.push(x),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(x))}}return this.enableFrictionReduction&&this.enableFriction&&q&&this.frictionEquations.push(this.createFrictionFromAverage(q)),q},d.prototype[q.PARTICLE|q.PLANE]=d.prototype.particlePlane=function(a,b,c,d,e,f,i,k,l){var m=t,n=u;k=k||0,h(m,c,i),g.rotate(n,s,k);var o=j(m,n);if(o>0)return 0;if(l)return!0;var p=this.createContactEquation(e,a,f,b);return g.copy(p.normalA,n),g.scale(m,p.normalA,o),h(p.contactPointA,c,m),h(p.contactPointA,p.contactPointA,e.position),h(p.contactPointB,c,a.position),this.contactEquations.push(p),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(p)),1},d.prototype[q.CIRCLE|q.PARTICLE]=d.prototype.circleParticle=function(a,b,c,d,e,f,j,k,l){var m=t;if(h(m,j,c),g.squaredLength(m)>Math.pow(b.radius,2))return 0;if(l)return!0;var n=this.createContactEquation(a,e,b,f);return g.copy(n.normalA,m),g.normalize(n.normalA,n.normalA),g.scale(n.contactPointA,n.normalA,b.radius),i(n.contactPointA,n.contactPointA,c),h(n.contactPointA,n.contactPointA,a.position),h(n.contactPointB,j,e.position),this.contactEquations.push(n),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(n)),1};{var X=new o(1),Y=g.create(),Z=g.create();g.create()}d.prototype[q.PLANE|q.CAPSULE]=d.prototype.planeCapsule=function(a,b,c,d,e,f,h,j,k){var l=Y,m=Z,n=X;g.set(l,-f.length/2,0),g.rotate(l,l,j),i(l,l,h),g.set(m,f.length/2,0),g.rotate(m,m,j),i(m,m,h),n.radius=f.radius;var o;this.enableFrictionReduction&&(o=this.enableFriction,this.enableFriction=!1);var p=this.circlePlane(e,n,l,0,a,b,c,d,k),q=this.circlePlane(e,n,m,0,a,b,c,d,k);if(this.enableFrictionReduction&&(this.enableFriction=o),k)return p||q;var r=p+q;return this.enableFrictionReduction&&r&&this.frictionEquations.push(this.createFrictionFromAverage(r)),r},d.prototype[q.CIRCLE|q.PLANE]=d.prototype.circlePlane=function(a,b,c,d,e,f,k,l,m){var n=a,o=b,p=c,q=e,r=k,w=l;w=w||0;var x=t,y=u,z=v;h(x,p,r),g.rotate(y,s,w);var A=j(y,x);if(A>o.radius)return 0;if(m)return!0;var B=this.createContactEquation(q,n,f,b);return g.copy(B.normalA,y),g.scale(B.contactPointB,B.normalA,-o.radius),i(B.contactPointB,B.contactPointB,p),h(B.contactPointB,B.contactPointB,n.position),g.scale(z,B.normalA,A),h(B.contactPointA,x,z),i(B.contactPointA,B.contactPointA,r),h(B.contactPointA,B.contactPointA,q.position),this.contactEquations.push(B),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(B)),1},d.prototype[q.CONVEX]=d.prototype[q.CONVEX|q.RECTANGLE]=d.prototype[q.RECTANGLE]=d.prototype.convexConvex=function(a,b,c,e,f,k,l,m,n,o){var p=t,q=u,r=v,s=w,y=x,C=z,D=A,E=B,F=0,o=\"number\"==typeof o?o:0,G=d.findSeparatingAxis(b,c,e,k,l,m,p);if(!G)return 0;h(D,l,c),j(p,D)>0&&g.scale(p,p,-1);var H=d.getClosestEdge(b,e,p,!0),I=d.getClosestEdge(k,m,p);if(-1===H||-1===I)return 0;for(var J=0;2>J;J++){var K=H,L=I,M=b,N=k,O=c,P=l,Q=e,R=m,S=a,T=f;if(0===J){var U;U=K,K=L,L=U,U=M,M=N,N=U,U=O,O=P,P=U,U=Q,Q=R,R=U,U=S,S=T,T=U}for(var V=L;L+2>V;V++){var W=N.vertices[(V+N.vertices.length)%N.vertices.length];g.rotate(q,W,R),i(q,q,P);for(var X=0,Y=K-1;K+2>Y;Y++){var Z=M.vertices[(Y+M.vertices.length)%M.vertices.length],$=M.vertices[(Y+1+M.vertices.length)%M.vertices.length];g.rotate(r,Z,Q),g.rotate(s,$,Q),i(r,r,O),i(s,s,O),h(y,s,r),g.rotate90cw(E,y),g.normalize(E,E),h(D,q,r);var _=j(E,D);(Y===K&&o>=_||Y!==K&&0>=_)&&X++}if(X>=3){if(n)return!0;var aa=this.createContactEquation(S,T,M,N);F++;var Z=M.vertices[K%M.vertices.length],$=M.vertices[(K+1)%M.vertices.length];g.rotate(r,Z,Q),g.rotate(s,$,Q),i(r,r,O),i(s,s,O),h(y,s,r),g.rotate90cw(aa.normalA,y),g.normalize(aa.normalA,aa.normalA),h(D,q,r);var _=j(aa.normalA,D);g.scale(C,aa.normalA,_),h(aa.contactPointA,q,O),h(aa.contactPointA,aa.contactPointA,C),i(aa.contactPointA,aa.contactPointA,O),h(aa.contactPointA,aa.contactPointA,S.position),h(aa.contactPointB,q,P),i(aa.contactPointB,aa.contactPointB,P),h(aa.contactPointB,aa.contactPointB,T.position),this.contactEquations.push(aa),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(aa))}}}return this.enableFrictionReduction&&this.enableFriction&&F&&this.frictionEquations.push(this.createFrictionFromAverage(F)),F};var $=g.fromValues(0,0);d.projectConvexOntoAxis=function(a,b,c,d,e){var f,h,i=null,k=null,l=$;g.rotate(l,d,-c);for(var m=0;m<a.vertices.length;m++)f=a.vertices[m],h=j(f,l),(null===i||h>i)&&(i=h),(null===k||k>h)&&(k=h);if(k>i){var n=k;k=i,i=n}var o=j(b,d);g.set(e,k+o,i+o)};var _=g.fromValues(0,0),aa=g.fromValues(0,0),ba=g.fromValues(0,0),ca=g.fromValues(0,0),da=g.fromValues(0,0),ea=g.fromValues(0,0);d.findSeparatingAxis=function(a,b,c,e,f,i,j){var k=null,l=!1,m=!1,n=_,o=aa,p=ba,q=ca,s=da,t=ea;if(a instanceof r&&e instanceof r)for(var u=0;2!==u;u++){var v=a,w=c;1===u&&(v=e,w=i);for(var x=0;2!==x;x++){0===x?g.set(q,0,1):1===x&&g.set(q,1,0),0!==w&&g.rotate(q,q,w),d.projectConvexOntoAxis(a,b,c,q,s),d.projectConvexOntoAxis(e,f,i,q,t);var y=s,z=t,A=!1;s[0]>t[0]&&(z=s,y=t,A=!0);var B=z[0]-y[1];l=0>=B,(null===k||B>k)&&(g.copy(j,q),k=B,m=l)}}else for(var u=0;2!==u;u++){var v=a,w=c;1===u&&(v=e,w=i);for(var x=0;x!==v.vertices.length;x++){g.rotate(o,v.vertices[x],w),g.rotate(p,v.vertices[(x+1)%v.vertices.length],w),h(n,p,o),g.rotate90cw(q,n),g.normalize(q,q),d.projectConvexOntoAxis(a,b,c,q,s),d.projectConvexOntoAxis(e,f,i,q,t);var y=s,z=t,A=!1;s[0]>t[0]&&(z=s,y=t,A=!0);var B=z[0]-y[1];l=0>=B,(null===k||B>k)&&(g.copy(j,q),k=B,m=l)}}return m};var fa=g.fromValues(0,0),ga=g.fromValues(0,0),ha=g.fromValues(0,0);d.getClosestEdge=function(a,b,c,d){\nvar e=fa,f=ga,i=ha;g.rotate(e,c,-b),d&&g.scale(e,e,-1);for(var k=-1,l=a.vertices.length,m=-1,n=0;n!==l;n++){h(f,a.vertices[(n+1)%l],a.vertices[n%l]),g.rotate90cw(i,f),g.normalize(i,i);var o=j(i,e);(-1===k||o>m)&&(k=n%l,m=o)}return k};var ia=g.create(),ja=g.create(),ka=g.create(),la=g.create(),ma=g.create(),na=g.create(),oa=g.create();d.prototype[q.CIRCLE|q.HEIGHTFIELD]=d.prototype.circleHeightfield=function(a,b,c,d,e,f,j,k,l,m){var n=f.data,m=m||b.radius,o=f.elementWidth,p=ja,q=ia,r=ma,s=oa,t=na,u=ka,v=la,w=Math.floor((c[0]-m-j[0])/o),x=Math.ceil((c[0]+m-j[0])/o);0>w&&(w=0),x>=n.length&&(x=n.length-1);for(var y=n[w],z=n[x],A=w;x>A;A++)n[A]<z&&(z=n[A]),n[A]>y&&(y=n[A]);if(c[1]-m>y)return l?!1:0;for(var B=!1,A=w;x>A;A++){g.set(u,A*o,n[A]),g.set(v,(A+1)*o,n[A+1]),g.add(u,u,j),g.add(v,v,j),g.sub(t,v,u),g.rotate(t,t,Math.PI/2),g.normalize(t,t),g.scale(q,t,-m),g.add(q,q,c),g.sub(p,q,u);var C=g.dot(p,t);if(q[0]>=u[0]&&q[0]<v[0]&&0>=C){if(l)return!0;B=!0,g.scale(p,t,-C),g.add(r,q,p),g.copy(s,t);var D=this.createContactEquation(e,a,f,b);g.copy(D.normalA,s),g.scale(D.contactPointB,D.normalA,-m),i(D.contactPointB,D.contactPointB,c),h(D.contactPointB,D.contactPointB,a.position),g.copy(D.contactPointA,r),g.sub(D.contactPointA,D.contactPointA,e.position),this.contactEquations.push(D),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(D))}}if(B=!1,m>0)for(var A=w;x>=A;A++)if(g.set(u,A*o,n[A]),g.add(u,u,j),g.sub(p,c,u),g.squaredLength(p)<Math.pow(m,2)){if(l)return!0;B=!0;var D=this.createContactEquation(e,a,f,b);g.copy(D.normalA,p),g.normalize(D.normalA,D.normalA),g.scale(D.contactPointB,D.normalA,-m),i(D.contactPointB,D.contactPointB,c),h(D.contactPointB,D.contactPointB,a.position),h(D.contactPointA,u,j),i(D.contactPointA,D.contactPointA,j),h(D.contactPointA,D.contactPointA,e.position),this.contactEquations.push(D),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(D))}return B?1:0};var pa=g.create(),qa=g.create(),ra=g.create(),sa=new p([g.create(),g.create(),g.create(),g.create()]);d.prototype[q.RECTANGLE|q.HEIGHTFIELD]=d.prototype[q.CONVEX|q.HEIGHTFIELD]=d.prototype.convexHeightfield=function(a,b,c,d,e,f,h,i,j){var k=f.data,l=f.elementWidth,m=pa,n=qa,o=ra,p=sa,q=Math.floor((a.aabb.lowerBound[0]-h[0])/l),r=Math.ceil((a.aabb.upperBound[0]-h[0])/l);0>q&&(q=0),r>=k.length&&(r=k.length-1);for(var s=k[q],t=k[r],u=q;r>u;u++)k[u]<t&&(t=k[u]),k[u]>s&&(s=k[u]);if(a.aabb.lowerBound[1]>s)return j?!1:0;for(var v=0,u=q;r>u;u++){g.set(m,u*l,k[u]),g.set(n,(u+1)*l,k[u+1]),g.add(m,m,h),g.add(n,n,h);var w=100;g.set(o,.5*(n[0]+m[0]),.5*(n[1]+m[1]-w)),g.sub(p.vertices[0],n,o),g.sub(p.vertices[1],m,o),g.copy(p.vertices[2],p.vertices[1]),g.copy(p.vertices[3],p.vertices[0]),p.vertices[2][1]-=w,p.vertices[3][1]-=w,v+=this.convexConvex(a,b,c,d,e,p,o,0,j)}return v}},{\"../equations/ContactEquation\":22,\"../equations/Equation\":23,\"../equations/FrictionEquation\":24,\"../math/vec2\":31,\"../objects/Body\":32,\"../shapes/Circle\":39,\"../shapes/Convex\":40,\"../shapes/Rectangle\":45,\"../shapes/Shape\":46,\"../utils/ContactEquationPool\":49,\"../utils/FrictionEquationPool\":50,\"../utils/TupleDictionary\":57,\"../utils/Utils\":58}],12:[function(a,b,c){function d(a){a=a||{},this.from=a.from?g.fromValues(a.from[0],a.from[1]):g.create(),this.to=a.to?g.fromValues(a.to[0],a.to[1]):g.create(),this._direction=g.create(),this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionMask=-1,this.collisionGroup=-1,this.mode=d.ANY,this.result=new h,this.hasHit=!1,this.callback=function(a){}}function e(a,b,c,d,e){var f,g,h,i;f=c[0]-b[0],g=c[1]-b[1],h=e[0]-d[0],i=e[1]-d[1];var j,k;if(j=(-g*(b[0]-d[0])+f*(b[1]-d[1]))/(-h*g+f*i),k=(h*(b[1]-d[1])-i*(b[0]-d[0]))/(-h*g+f*i),j>=0&&1>=j&&k>=0&&1>=k){var l=b[0]+k*f,m=b[1]+k*g;return a[0]=l,a[1]=m,!0}return!1}function f(a,b,c){g.sub(y,c,a);var d=g.dot(y,b);g.scale(z,b,d),g.add(z,z,a);var e=g.squaredDistance(c,z);return e}b.exports=d;var g=a(\"../math/vec2\"),h=a(\"../collision/RaycastResult\"),i=a(\"../shapes/Shape\"),j=a(\"../collision/AABB\");d.prototype.constructor=d,d.CLOSEST=1,d.ANY=2,d.ALL=4;var k=new j,l=[];d.prototype.intersectWorld=function(a,b){return this.mode=b.mode||d.ANY,this.result=b.result||new h,this.skipBackfaces=!!b.skipBackfaces,this.collisionMask=\"undefined\"!=typeof b.collisionMask?b.collisionMask:-1,this.collisionGroup=\"undefined\"!=typeof b.collisionGroup?b.collisionGroup:-1,b.from&&g.copy(this.from,b.from),b.to&&g.copy(this.to,b.to),this.callback=b.callback||function(){},this.hasHit=!1,this.result.reset(),this._updateDirection(),this.getAABB(k),l.length=0,a.broadphase.aabbQuery(a,k,l),this.intersectBodies(l),this.hasHit};var m=(g.create(),g.create(),g.create());d.prototype.intersectBody=function(a){var b=this.checkCollisionResponse;if(!b||a.collisionResponse)for(var c=m,d=0,e=a.shapes.length;e>d;d++){var f=a.shapes[d];if(!b||f.collisionResponse){g.rotate(c,a.shapeOffsets[d],a.angle),g.add(c,c,a.position);var h=a.shapeAngles[d]+a.angle;if(this.intersectShape(f,h,c,a),this.result._shouldStop)break}}},d.prototype.intersectBodies=function(a){for(var b=0,c=a.length;!this.result._shouldStop&&c>b;b++){var d=a[b].getAABB();d.overlapsRay(this)&&this.intersectBody(a[b])}},d.prototype._updateDirection=function(){var a=this._direction;g.sub(a,this.to,this.from),g.normalize(a,a)},d.prototype.intersectShape=function(a,b,c,d){var e=this.from,g=f(e,this._direction,c);if(!(g>a.boundingRadius*a.boundingRadius)){var h=this[a.type];h&&h.call(this,a,b,c,d)}};var n=(g.create(),g.create(),g.create(),g.create(),g.create(),g.create(),g.create(),new h,g.create()),o=g.create(),p=g.create(),q=g.create(),r=g.create();d.prototype.intersectPlane=function(a,b,c,d){var e=this.from,f=this.to,h=this._direction,i=n,j=o,k=p,l=q,m=r;g.set(l,0,1),g.rotate(l,l,b),g.sub(m,e,c);var s=g.dot(m,l);g.sub(m,f,c);var t=g.dot(m,l);if(!(s*t>0||g.distance(e,f)<s)){var u=g.dot(l,h);g.sub(i,e,c);var v=-g.dot(l,i)/u;g.scale(j,h,v),g.add(k,e,j),this.reportIntersection(l,k,a,d,-1)}},d.prototype[i.PLANE]=d.prototype.intersectPlane;var s=g.create(),t=g.create(),u=(g.create(),g.create(),g.create(),g.create()),v=g.create();d.prototype.intersectConvex=function(a,b,c,d){var f=(this.from,this.to,s),h=t,i=u,j=v;g.toLocalFrame(f,this.from,c,b),g.toLocalFrame(h,this.to,c,b);for(var k=0;k<a.vertices.length&&!this.result._shouldStop;k++){var l=a.vertices[k],m=a.vertices[(k+1)%a.vertices.length];e(i,f,h,l,m)&&(g.toGlobalFrame(i,i,c,b),g.sub(j,m,l),g.rotate(j,j,-Math.PI/2+b),g.normalize(j,j),this.reportIntersection(j,i,a,d,k))}},d.prototype[i.CONVEX]=d.prototype.intersectConvex,d.prototype[i.RECTANGLE]=d.prototype.intersectConvex;var w=g.create(),x=g.create();d.prototype.intersectCircle=function(a,b,c,d){var e=this.from,f=this.to,h=a.radius,i=Math.pow(f[0]-e[0],2)+Math.pow(f[1]-e[1],2),j=2*((f[0]-e[0])*(e[0]-c[0])+(f[1]-e[1])*(e[1]-c[1])),k=Math.pow(e[0]-c[0],2)+Math.pow(e[1]-c[1],2)-Math.pow(h,2),l=Math.pow(j,2)-4*i*k,m=w,n=x;if(!(0>l))if(0===l)g.lerp(m,e,f,l),g.sub(n,m,c),g.normalize(n,n),this.reportIntersection(n,m,a,d,-1);else{var o=Math.sqrt(l),p=1/(2*i),q=(-j-o)*p,r=(-j+o)*p;if(q>=0&&1>=q&&(g.lerp(m,e,f,q),g.sub(n,m,c),g.normalize(n,n),this.reportIntersection(n,m,a,d,-1),this.result._shouldStop))return;r>=0&&1>=r&&(g.lerp(m,e,f,r),g.sub(n,m,c),g.normalize(n,n),this.reportIntersection(n,m,a,d,-1))}},d.prototype[i.CIRCLE]=d.prototype.intersectCircle,d.prototype.getAABB=function(a){var b=this.to,c=this.from;a.lowerBound[0]=Math.min(b[0],c[0]),a.lowerBound[1]=Math.min(b[1],c[1]),a.upperBound[0]=Math.max(b[0],c[0]),a.upperBound[1]=Math.max(b[1],c[1])},d.prototype.reportIntersection=function(a,b,c,e,f){var h=this.from,i=this.to,j=g.distance(h,b),k=this.result;if(!(this.skipBackfaces&&g.dot(a,this._direction)>0))switch(k.hitFaceIndex=\"undefined\"!=typeof f?f:-1,this.mode){case d.ALL:this.hasHit=!0,k.set(h,i,a,b,c,e,j),k.hasHit=!0,this.callback(k);break;case d.CLOSEST:(j<k.distance||!k.hasHit)&&(this.hasHit=!0,k.hasHit=!0,k.set(h,i,a,b,c,e,j));break;case d.ANY:this.hasHit=!0,k.hasHit=!0,k.set(h,i,a,b,c,e,j),k._shouldStop=!0}};var y=g.create(),z=g.create()},{\"../collision/AABB\":7,\"../collision/RaycastResult\":13,\"../math/vec2\":31,\"../shapes/Shape\":46}],13:[function(a,b,c){function d(){this.rayFromWorld=e.create(),this.rayToWorld=e.create(),this.hitNormalWorld=e.create(),this.hitPointWorld=e.create(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this._shouldStop=!1}var e=a(\"../math/vec2\");b.exports=d,d.prototype.reset=function(){e.set(this.rayFromWorld,0,0),e.set(this.rayToWorld,0,0),e.set(this.hitNormalWorld,0,0),e.set(this.hitPointWorld,0,0),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this._shouldStop=!1},d.prototype.getDirection=function(a){e.sub(a,this.rayToWorld,this.rayFromWorld),e.normalize(a,a)},d.prototype.abort=function(){this._shouldStop=!0},d.prototype.set=function(a,b,c,d,f,g,h){e.copy(this.rayFromWorld,a),e.copy(this.rayToWorld,b),e.copy(this.hitNormalWorld,c),e.copy(this.hitPointWorld,d),this.shape=f,this.body=g,this.distance=h}},{\"../math/vec2\":31}],14:[function(a,b,c){function d(){f.call(this,f.SAP),this.axisList=[],this.axisIndex=0;var a=this;this._addBodyHandler=function(b){a.axisList.push(b.body)},this._removeBodyHandler=function(b){var c=a.axisList.indexOf(b.body);-1!==c&&a.axisList.splice(c,1)}}var e=a(\"../utils/Utils\"),f=a(\"../collision/Broadphase\");b.exports=d,d.prototype=new f,d.prototype.constructor=d,d.prototype.setWorld=function(a){this.axisList.length=0,e.appendArray(this.axisList,a.bodies),a.off(\"addBody\",this._addBodyHandler).off(\"removeBody\",this._removeBodyHandler),a.on(\"addBody\",this._addBodyHandler).on(\"removeBody\",this._removeBodyHandler),this.world=a},d.sortAxisList=function(a,b){b=0|b;for(var c=1,d=a.length;d>c;c++){for(var e=a[c],f=c-1;f>=0&&!(a[f].aabb.lowerBound[b]<=e.aabb.lowerBound[b]);f--)a[f+1]=a[f];a[f+1]=e}return a},d.prototype.sortList=function(){var a=this.axisList,b=this.axisIndex;d.sortAxisList(a,b)},d.prototype.getCollisionPairs=function(a){var b=this.axisList,c=this.result,d=this.axisIndex;c.length=0;for(var e=b.length;e--;){var g=b[e];g.aabbNeedsUpdate&&g.updateAABB()}this.sortList();for(var h=0,i=0|b.length;h!==i;h++)for(var j=b[h],k=h+1;i>k;k++){var l=b[k],m=l.aabb.lowerBound[d]<=j.aabb.upperBound[d];if(!m)break;f.canCollide(j,l)&&this.boundingVolumeCheck(j,l)&&c.push(j,l)}return c},d.prototype.aabbQuery=function(a,b,c){c=c||[],this.sortList();var d=this.axisIndex,e=\"x\";1===d&&(e=\"y\"),2===d&&(e=\"z\");for(var f=this.axisList,g=(b.lowerBound[e],b.upperBound[e],0);g<f.length;g++){var h=f[g];h.aabbNeedsUpdate&&h.updateAABB(),h.aabb.overlaps(b)&&c.push(h)}return c}},{\"../collision/Broadphase\":8,\"../utils/Utils\":58}],15:[function(a,b,c){function d(a,b,c,d){this.type=c,d=e.defaults(d,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=a,this.bodyB=b,this.collideConnected=d.collideConnected,d.wakeUpBodies&&(a&&a.wakeUp(),b&&b.wakeUp())}b.exports=d;var e=a(\"../utils/Utils\");d.prototype.update=function(){throw new Error(\"method update() not implmemented in this Constraint subclass!\")},d.DISTANCE=1,d.GEAR=2,d.LOCK=3,d.PRISMATIC=4,d.REVOLUTE=5,d.prototype.setStiffness=function(a){for(var b=this.equations,c=0;c!==b.length;c++){var d=b[c];d.stiffness=a,d.needsUpdate=!0}},d.prototype.setRelaxation=function(a){for(var b=this.equations,c=0;c!==b.length;c++){var d=b[c];d.relaxation=a,d.needsUpdate=!0}}},{\"../utils/Utils\":58}],16:[function(a,b,c){function d(a,b,c){c=h.defaults(c,{localAnchorA:[0,0],localAnchorB:[0,0]}),e.call(this,a,b,e.DISTANCE,c),this.localAnchorA=g.fromValues(c.localAnchorA[0],c.localAnchorA[1]),this.localAnchorB=g.fromValues(c.localAnchorB[0],c.localAnchorB[1]);var d=this.localAnchorA,i=this.localAnchorB;if(this.distance=0,\"number\"==typeof c.distance)this.distance=c.distance;else{var j=g.create(),k=g.create(),l=g.create();g.rotate(j,d,a.angle),g.rotate(k,i,b.angle),g.add(l,b.position,k),g.sub(l,l,j),g.sub(l,l,a.position),this.distance=g.length(l)}var m;m=\"undefined\"==typeof c.maxForce?Number.MAX_VALUE:c.maxForce;var n=new f(a,b,-m,m);this.equations=[n],this.maxForce=m;var l=g.create(),o=g.create(),p=g.create(),q=this;n.computeGq=function(){var a=this.bodyA,b=this.bodyB,c=a.position,e=b.position;return g.rotate(o,d,a.angle),g.rotate(p,i,b.angle),g.add(l,e,p),g.sub(l,l,o),g.sub(l,l,c),g.length(l)-q.distance},this.setMaxForce(m),this.upperLimitEnabled=!1,this.upperLimit=1,this.lowerLimitEnabled=!1,this.lowerLimit=0,this.position=0}var e=a(\"./Constraint\"),f=a(\"../equations/Equation\"),g=a(\"../math/vec2\"),h=a(\"../utils/Utils\");b.exports=d,d.prototype=new e,d.prototype.constructor=d;var i=g.create(),j=g.create(),k=g.create();d.prototype.update=function(){var a=this.equations[0],b=this.bodyA,c=this.bodyB,d=(this.distance,b.position),e=c.position,f=this.equations[0],h=a.G;g.rotate(j,this.localAnchorA,b.angle),g.rotate(k,this.localAnchorB,c.angle),g.add(i,e,k),g.sub(i,i,j),g.sub(i,i,d),this.position=g.length(i);var l=!1;if(this.upperLimitEnabled&&this.position>this.upperLimit&&(f.maxForce=0,f.minForce=-this.maxForce,this.distance=this.upperLimit,l=!0),this.lowerLimitEnabled&&this.position<this.lowerLimit&&(f.maxForce=this.maxForce,f.minForce=0,this.distance=this.lowerLimit,l=!0),(this.lowerLimitEnabled||this.upperLimitEnabled)&&!l)return void(f.enabled=!1);f.enabled=!0,g.normalize(i,i);var m=g.crossLength(j,i),n=g.crossLength(k,i);h[0]=-i[0],h[1]=-i[1],h[2]=-m,h[3]=i[0],h[4]=i[1],h[5]=n},d.prototype.setMaxForce=function(a){var b=this.equations[0];b.minForce=-a,b.maxForce=a},d.prototype.getMaxForce=function(){var a=this.equations[0];return a.maxForce}},{\"../equations/Equation\":23,\"../math/vec2\":31,\"../utils/Utils\":58,\"./Constraint\":15}],17:[function(a,b,c){function d(a,b,c){c=c||{},e.call(this,a,b,e.GEAR,c),this.ratio=void 0!==c.ratio?c.ratio:1,this.angle=void 0!==c.angle?c.angle:b.angle-this.ratio*a.angle,c.angle=this.angle,c.ratio=this.ratio,this.equations=[new f(a,b,c)],void 0!==c.maxTorque&&this.setMaxTorque(c.maxTorque)}{var e=a(\"./Constraint\"),f=(a(\"../equations/Equation\"),a(\"../equations/AngleLockEquation\"));a(\"../math/vec2\")}b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.update=function(){var a=this.equations[0];a.ratio!==this.ratio&&a.setRatio(this.ratio),a.angle=this.angle},d.prototype.setMaxTorque=function(a){this.equations[0].setMaxTorque(a)},d.prototype.getMaxTorque=function(a){return this.equations[0].maxForce}},{\"../equations/AngleLockEquation\":21,\"../equations/Equation\":23,\"../math/vec2\":31,\"./Constraint\":15}],18:[function(a,b,c){function d(a,b,c){c=c||{},e.call(this,a,b,e.LOCK,c);var d=\"undefined\"==typeof c.maxForce?Number.MAX_VALUE:c.maxForce,h=(c.localAngleB||0,new g(a,b,-d,d)),i=new g(a,b,-d,d),j=new g(a,b,-d,d),k=f.create(),l=f.create(),m=this;h.computeGq=function(){return f.rotate(k,m.localOffsetB,a.angle),f.sub(l,b.position,a.position),f.sub(l,l,k),l[0]},i.computeGq=function(){return f.rotate(k,m.localOffsetB,a.angle),f.sub(l,b.position,a.position),f.sub(l,l,k),l[1]};var n=f.create(),o=f.create();j.computeGq=function(){return f.rotate(n,m.localOffsetB,b.angle-m.localAngleB),f.scale(n,n,-1),f.sub(l,a.position,b.position),f.add(l,l,n),f.rotate(o,n,-Math.PI/2),f.normalize(o,o),f.dot(l,o)},this.localOffsetB=f.create(),c.localOffsetB?f.copy(this.localOffsetB,c.localOffsetB):(f.sub(this.localOffsetB,b.position,a.position),f.rotate(this.localOffsetB,this.localOffsetB,-a.angle)),this.localAngleB=0,\"number\"==typeof c.localAngleB?this.localAngleB=c.localAngleB:this.localAngleB=b.angle-a.angle,this.equations.push(h,i,j),this.setMaxForce(d)}var e=a(\"./Constraint\"),f=a(\"../math/vec2\"),g=a(\"../equations/Equation\");b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.setMaxForce=function(a){for(var b=this.equations,c=0;c<this.equations.length;c++)b[c].maxForce=a,b[c].minForce=-a},d.prototype.getMaxForce=function(){return this.equations[0].maxForce};var h=f.create(),i=f.create(),j=f.create(),k=f.fromValues(1,0),l=f.fromValues(0,1);d.prototype.update=function(){var a=this.equations[0],b=this.equations[1],c=this.equations[2],d=this.bodyA,e=this.bodyB;f.rotate(h,this.localOffsetB,d.angle),f.rotate(i,this.localOffsetB,e.angle-this.localAngleB),f.scale(i,i,-1),f.rotate(j,i,Math.PI/2),f.normalize(j,j),a.G[0]=-1,a.G[1]=0,a.G[2]=-f.crossLength(h,k),a.G[3]=1,b.G[0]=0,b.G[1]=-1,b.G[2]=-f.crossLength(h,l),b.G[4]=1,c.G[0]=-j[0],c.G[1]=-j[1],c.G[3]=j[0],c.G[4]=j[1],c.G[5]=f.crossLength(i,j)}},{\"../equations/Equation\":23,\"../math/vec2\":31,\"./Constraint\":15}],19:[function(a,b,c){function d(a,b,c){c=c||{},e.call(this,a,b,e.PRISMATIC,c);var d=h.fromValues(0,0),j=h.fromValues(1,0),k=h.fromValues(0,0);c.localAnchorA&&h.copy(d,c.localAnchorA),c.localAxisA&&h.copy(j,c.localAxisA),c.localAnchorB&&h.copy(k,c.localAnchorB),this.localAnchorA=d,this.localAnchorB=k,this.localAxisA=j;var l=this.maxForce=\"undefined\"!=typeof c.maxForce?c.maxForce:Number.MAX_VALUE,m=new g(a,b,-l,l),n=new h.create,o=new h.create,p=new h.create,q=new h.create;if(m.computeGq=function(){return h.dot(p,q)},m.updateJacobian=function(){var c=this.G,e=a.position,f=b.position;h.rotate(n,d,a.angle),h.rotate(o,k,b.angle),h.add(p,f,o),h.sub(p,p,e),h.sub(p,p,n),h.rotate(q,j,a.angle+Math.PI/2),c[0]=-q[0],c[1]=-q[1],c[2]=-h.crossLength(n,q)+h.crossLength(q,p),c[3]=q[0],c[4]=q[1],c[5]=h.crossLength(o,q)},this.equations.push(m),!c.disableRotationalLock){var r=new i(a,b,-l,l);this.equations.push(r)}this.position=0,this.velocity=0,this.lowerLimitEnabled=\"undefined\"!=typeof c.lowerLimit?!0:!1,this.upperLimitEnabled=\"undefined\"!=typeof c.upperLimit?!0:!1,this.lowerLimit=\"undefined\"!=typeof c.lowerLimit?c.lowerLimit:0,this.upperLimit=\"undefined\"!=typeof c.upperLimit?c.upperLimit:1,this.upperLimitEquation=new f(a,b),this.lowerLimitEquation=new f(a,b),this.upperLimitEquation.minForce=this.lowerLimitEquation.minForce=0,this.upperLimitEquation.maxForce=this.lowerLimitEquation.maxForce=l,this.motorEquation=new g(a,b),this.motorEnabled=!1,this.motorSpeed=0;{var s=this,t=this.motorEquation;t.computeGW}t.computeGq=function(){return 0},t.computeGW=function(){var a=this.G,b=this.bodyA,c=this.bodyB,d=b.velocity,e=c.velocity,f=b.angularVelocity,g=c.angularVelocity;return this.gmult(a,d,f,e,g)+s.motorSpeed}}var e=a(\"./Constraint\"),f=a(\"../equations/ContactEquation\"),g=a(\"../equations/Equation\"),h=a(\"../math/vec2\"),i=a(\"../equations/RotationalLockEquation\");b.exports=d,d.prototype=new e,d.prototype.constructor=d;var j=h.create(),k=h.create(),l=h.create(),m=h.create(),n=h.create(),o=h.create();d.prototype.update=function(){var a=this.equations,b=a[0],c=this.upperLimit,d=this.lowerLimit,e=this.upperLimitEquation,f=this.lowerLimitEquation,g=this.bodyA,i=this.bodyB,p=this.localAxisA,q=this.localAnchorA,r=this.localAnchorB;b.updateJacobian(),h.rotate(j,p,g.angle),h.rotate(m,q,g.angle),h.add(k,m,g.position),h.rotate(n,r,i.angle),h.add(l,n,i.position);var s=this.position=h.dot(l,j)-h.dot(k,j);if(this.motorEnabled){var t=this.motorEquation.G;t[0]=j[0],t[1]=j[1],t[2]=h.crossLength(j,n),t[3]=-j[0],t[4]=-j[1],t[5]=-h.crossLength(j,m)}if(this.upperLimitEnabled&&s>c)h.scale(e.normalA,j,-1),h.sub(e.contactPointA,k,g.position),h.sub(e.contactPointB,l,i.position),h.scale(o,j,c),h.add(e.contactPointA,e.contactPointA,o),-1===a.indexOf(e)&&a.push(e);else{var u=a.indexOf(e);-1!==u&&a.splice(u,1)}if(this.lowerLimitEnabled&&d>s)h.scale(f.normalA,j,1),h.sub(f.contactPointA,k,g.position),h.sub(f.contactPointB,l,i.position),h.scale(o,j,d),h.sub(f.contactPointB,f.contactPointB,o),-1===a.indexOf(f)&&a.push(f);else{var u=a.indexOf(f);-1!==u&&a.splice(u,1)}},d.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},d.prototype.disableMotor=function(){if(this.motorEnabled){var a=this.equations.indexOf(this.motorEquation);this.equations.splice(a,1),this.motorEnabled=!1}},d.prototype.setLimits=function(a,b){\"number\"==typeof a?(this.lowerLimit=a,this.lowerLimitEnabled=!0):(this.lowerLimit=a,this.lowerLimitEnabled=!1),\"number\"==typeof b?(this.upperLimit=b,this.upperLimitEnabled=!0):(this.upperLimit=b,this.upperLimitEnabled=!1)}},{\"../equations/ContactEquation\":22,\"../equations/Equation\":23,\"../equations/RotationalLockEquation\":25,\"../math/vec2\":31,\"./Constraint\":15}],20:[function(a,b,c){function d(a,b,c){c=c||{},e.call(this,a,b,e.REVOLUTE,c);var d=this.maxForce=\"undefined\"!=typeof c.maxForce?c.maxForce:Number.MAX_VALUE;this.pivotA=i.create(),this.pivotB=i.create(),c.worldPivot?(i.sub(this.pivotA,c.worldPivot,a.position),i.sub(this.pivotB,c.worldPivot,b.position),i.rotate(this.pivotA,this.pivotA,-a.angle),i.rotate(this.pivotB,this.pivotB,-b.angle)):(i.copy(this.pivotA,c.localPivotA),i.copy(this.pivotB,c.localPivotB));var o=this.equations=[new f(a,b,-d,d),new f(a,b,-d,d)],p=o[0],q=o[1],r=this;p.computeGq=function(){return i.rotate(j,r.pivotA,a.angle),i.rotate(k,r.pivotB,b.angle),i.add(n,b.position,k),i.sub(n,n,a.position),i.sub(n,n,j),i.dot(n,l)},q.computeGq=function(){return i.rotate(j,r.pivotA,a.angle),i.rotate(k,r.pivotB,b.angle),i.add(n,b.position,k),i.sub(n,n,a.position),i.sub(n,n,j),i.dot(n,m)},q.minForce=p.minForce=-d,q.maxForce=p.maxForce=d,this.motorEquation=new g(a,b),this.motorEnabled=!1,this.angle=0,this.lowerLimitEnabled=!1,this.upperLimitEnabled=!1,this.lowerLimit=0,this.upperLimit=0,this.upperLimitEquation=new h(a,b),this.lowerLimitEquation=new h(a,b),this.upperLimitEquation.minForce=0,this.lowerLimitEquation.maxForce=0}var e=a(\"./Constraint\"),f=a(\"../equations/Equation\"),g=a(\"../equations/RotationalVelocityEquation\"),h=a(\"../equations/RotationalLockEquation\"),i=a(\"../math/vec2\");b.exports=d;var j=i.create(),k=i.create(),l=i.fromValues(1,0),m=i.fromValues(0,1),n=i.create();d.prototype=new e,d.prototype.constructor=d,d.prototype.setLimits=function(a,b){\"number\"==typeof a?(this.lowerLimit=a,this.lowerLimitEnabled=!0):(this.lowerLimit=a,this.lowerLimitEnabled=!1),\"number\"==typeof b?(this.upperLimit=b,this.upperLimitEnabled=!0):(this.upperLimit=b,this.upperLimitEnabled=!1)},d.prototype.update=function(){var a=this.bodyA,b=this.bodyB,c=this.pivotA,d=this.pivotB,e=this.equations,f=(e[0],e[1],e[0]),g=e[1],h=this.upperLimit,n=this.lowerLimit,o=this.upperLimitEquation,p=this.lowerLimitEquation,q=this.angle=b.angle-a.angle;if(this.upperLimitEnabled&&q>h)o.angle=h,-1===e.indexOf(o)&&e.push(o);else{var r=e.indexOf(o);-1!==r&&e.splice(r,1)}if(this.lowerLimitEnabled&&n>q)p.angle=n,-1===e.indexOf(p)&&e.push(p);else{var r=e.indexOf(p);-1!==r&&e.splice(r,1)}i.rotate(j,c,a.angle),i.rotate(k,d,b.angle),f.G[0]=-1,f.G[1]=0,f.G[2]=-i.crossLength(j,l),f.G[3]=1,f.G[4]=0,f.G[5]=i.crossLength(k,l),g.G[0]=0,g.G[1]=-1,g.G[2]=-i.crossLength(j,m),g.G[3]=0,g.G[4]=1,g.G[5]=i.crossLength(k,m)},d.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},d.prototype.disableMotor=function(){if(this.motorEnabled){var a=this.equations.indexOf(this.motorEquation);this.equations.splice(a,1),this.motorEnabled=!1}},d.prototype.motorIsEnabled=function(){return!!this.motorEnabled},d.prototype.setMotorSpeed=function(a){if(this.motorEnabled){var b=this.equations.indexOf(this.motorEquation);this.equations[b].relativeVelocity=a}},d.prototype.getMotorSpeed=function(){return this.motorEnabled?this.motorEquation.relativeVelocity:!1}},{\"../equations/Equation\":23,\"../equations/RotationalLockEquation\":25,\"../equations/RotationalVelocityEquation\":26,\"../math/vec2\":31,\"./Constraint\":15}],21:[function(a,b,c){function d(a,b,c){c=c||{},e.call(this,a,b,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=c.angle||0,this.ratio=\"number\"==typeof c.ratio?c.ratio:1,this.setRatio(this.ratio)}{var e=a(\"./Equation\");a(\"../math/vec2\")}b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.computeGq=function(){return this.ratio*this.bodyA.angle-this.bodyB.angle+this.angle},d.prototype.setRatio=function(a){var b=this.G;b[2]=a,b[5]=-1,this.ratio=a},d.prototype.setMaxTorque=function(a){this.maxForce=a,this.minForce=-a}},{\"../math/vec2\":31,\"./Equation\":23}],22:[function(a,b,c){function d(a,b){e.call(this,a,b,0,Number.MAX_VALUE),this.contactPointA=f.create(),this.penetrationVec=f.create(),this.contactPointB=f.create(),this.normalA=f.create(),this.restitution=0,this.firstImpact=!1,this.shapeA=null,this.shapeB=null}var e=a(\"./Equation\"),f=a(\"../math/vec2\");b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.computeB=function(a,b,c){var d=this.bodyA,e=this.bodyB,g=this.contactPointA,h=this.contactPointB,i=d.position,j=e.position,k=this.penetrationVec,l=this.normalA,m=this.G,n=f.crossLength(g,l),o=f.crossLength(h,l);m[0]=-l[0],m[1]=-l[1],m[2]=-n,m[3]=l[0],m[4]=l[1],m[5]=o,f.add(k,j,h),f.sub(k,k,i),f.sub(k,k,g);var p,q;this.firstImpact&&0!==this.restitution?(q=0,p=1/b*(1+this.restitution)*this.computeGW()):(q=f.dot(l,k)+this.offset,p=this.computeGW());var r=this.computeGiMf(),s=-q*a-p*b-c*r;return s}},{\"../math/vec2\":31,\"./Equation\":23}],23:[function(a,b,c){function d(a,b,c,e){this.minForce=\"undefined\"==typeof c?-Number.MAX_VALUE:c,this.maxForce=\"undefined\"==typeof e?Number.MAX_VALUE:e,this.bodyA=a,this.bodyB=b,this.stiffness=d.DEFAULT_STIFFNESS,this.relaxation=d.DEFAULT_RELAXATION,this.G=new f.ARRAY_TYPE(6);for(var g=0;6>g;g++)this.G[g]=0;this.offset=0,this.a=0,this.b=0,this.epsilon=0,this.timeStep=1/60,this.needsUpdate=!0,this.multiplier=0,this.relativeVelocity=0,this.enabled=!0}b.exports=d;{var e=a(\"../math/vec2\"),f=a(\"../utils/Utils\");a(\"../objects/Body\")}d.prototype.constructor=d,d.DEFAULT_STIFFNESS=1e6,d.DEFAULT_RELAXATION=4,d.prototype.update=function(){var a=this.stiffness,b=this.relaxation,c=this.timeStep;this.a=4/(c*(1+4*b)),this.b=4*b/(1+4*b),this.epsilon=4/(c*c*a*(1+4*b)),this.needsUpdate=!1},d.prototype.gmult=function(a,b,c,d,e){return a[0]*b[0]+a[1]*b[1]+a[2]*c+a[3]*d[0]+a[4]*d[1]+a[5]*e},d.prototype.computeB=function(a,b,c){var d=this.computeGW(),e=this.computeGq(),f=this.computeGiMf();return-e*a-d*b-f*c};var g=e.create(),h=e.create();d.prototype.computeGq=function(){var a=this.G,b=this.bodyA,c=this.bodyB,d=(b.position,c.position,b.angle),e=c.angle;return this.gmult(a,g,d,h,e)+this.offset},d.prototype.computeGW=function(){var a=this.G,b=this.bodyA,c=this.bodyB,d=b.velocity,e=c.velocity,f=b.angularVelocity,g=c.angularVelocity;return this.gmult(a,d,f,e,g)+this.relativeVelocity},d.prototype.computeGWlambda=function(){var a=this.G,b=this.bodyA,c=this.bodyB,d=b.vlambda,e=c.vlambda,f=b.wlambda,g=c.wlambda;return this.gmult(a,d,f,e,g)};var i=e.create(),j=e.create();d.prototype.computeGiMf=function(){var a=this.bodyA,b=this.bodyB,c=a.force,d=a.angularForce,f=b.force,g=b.angularForce,h=a.invMassSolve,k=b.invMassSolve,l=a.invInertiaSolve,m=b.invInertiaSolve,n=this.G;return e.scale(i,c,h),e.multiply(i,a.massMultiplier,i),e.scale(j,f,k),e.multiply(j,b.massMultiplier,j),this.gmult(n,i,d*l,j,g*m)},d.prototype.computeGiMGt=function(){var a=this.bodyA,b=this.bodyB,c=a.invMassSolve,d=b.invMassSolve,e=a.invInertiaSolve,f=b.invInertiaSolve,g=this.G;return g[0]*g[0]*c*a.massMultiplier[0]+g[1]*g[1]*c*a.massMultiplier[1]+g[2]*g[2]*e+g[3]*g[3]*d*b.massMultiplier[0]+g[4]*g[4]*d*b.massMultiplier[1]+g[5]*g[5]*f};{var k=e.create(),l=e.create(),m=e.create();e.create(),e.create(),e.create()}d.prototype.addToWlambda=function(a){var b=this.bodyA,c=this.bodyB,d=k,f=l,g=m,h=b.invMassSolve,i=c.invMassSolve,j=b.invInertiaSolve,n=c.invInertiaSolve,o=this.G;f[0]=o[0],f[1]=o[1],g[0]=o[3],g[1]=o[4],e.scale(d,f,h*a),e.multiply(d,d,b.massMultiplier),e.add(b.vlambda,b.vlambda,d),b.wlambda+=j*o[2]*a,e.scale(d,g,i*a),e.multiply(d,d,c.massMultiplier),e.add(c.vlambda,c.vlambda,d),c.wlambda+=n*o[5]*a},d.prototype.computeInvC=function(a){return 1/(this.computeGiMGt()+a)}},{\"../math/vec2\":31,\"../objects/Body\":32,\"../utils/Utils\":58}],24:[function(a,b,c){function d(a,b,c){f.call(this,a,b,-c,c),this.contactPointA=e.create(),this.contactPointB=e.create(),this.t=e.create(),this.contactEquations=[],this.shapeA=null,this.shapeB=null,this.frictionCoefficient=.3}{var e=a(\"../math/vec2\"),f=a(\"./Equation\");a(\"../utils/Utils\")}b.exports=d,d.prototype=new f,d.prototype.constructor=d,d.prototype.setSlipForce=function(a){this.maxForce=a,this.minForce=-a},d.prototype.getSlipForce=function(){return this.maxForce},d.prototype.computeB=function(a,b,c){var d=(this.bodyA,this.bodyB,this.contactPointA),f=this.contactPointB,g=this.t,h=this.G;h[0]=-g[0],h[1]=-g[1],h[2]=-e.crossLength(d,g),h[3]=g[0],h[4]=g[1],h[5]=e.crossLength(f,g);var i=this.computeGW(),j=this.computeGiMf(),k=-i*b-c*j;return k}},{\"../math/vec2\":31,\"../utils/Utils\":58,\"./Equation\":23}],25:[function(a,b,c){function d(a,b,c){c=c||{},e.call(this,a,b,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=c.angle||0;var d=this.G;d[2]=1,d[5]=-1}var e=a(\"./Equation\"),f=a(\"../math/vec2\");b.exports=d,d.prototype=new e,d.prototype.constructor=d;var g=f.create(),h=f.create(),i=f.fromValues(1,0),j=f.fromValues(0,1);d.prototype.computeGq=function(){return f.rotate(g,i,this.bodyA.angle+this.angle),f.rotate(h,j,this.bodyB.angle),f.dot(g,h)}},{\"../math/vec2\":31,\"./Equation\":23}],26:[function(a,b,c){function d(a,b){e.call(this,a,b,-Number.MAX_VALUE,Number.MAX_VALUE),this.relativeVelocity=1,this.ratio=1}{var e=a(\"./Equation\");a(\"../math/vec2\")}b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.computeB=function(a,b,c){var d=this.G;d[2]=-1,d[5]=this.ratio;var e=this.computeGiMf(),f=this.computeGW(),g=-f*b-c*e;return g}},{\"../math/vec2\":31,\"./Equation\":23}],27:[function(a,b,c){var d=function(){};b.exports=d,d.prototype={constructor:d,on:function(a,b,c){b.context=c||this,void 0===this._listeners&&(this._listeners={});var d=this._listeners;return void 0===d[a]&&(d[a]=[]),-1===d[a].indexOf(b)&&d[a].push(b),this},has:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;if(b){if(void 0!==c[a]&&-1!==c[a].indexOf(b))return!0}else if(void 0!==c[a])return!0;return!1},off:function(a,b){if(void 0===this._listeners)return this;var c=this._listeners,d=c[a].indexOf(b);return-1!==d&&c[a].splice(d,1),this},emit:function(a){if(void 0===this._listeners)return this;var b=this._listeners,c=b[a.type];if(void 0!==c){a.target=this;for(var d=0,e=c.length;e>d;d++){var f=c[d];f.call(f.context,a)}}return this}}},{}],28:[function(a,b,c){function d(a,b,c){if(c=c||{},!(a instanceof e&&b instanceof e))throw new Error(\"First two arguments must be Material instances.\");this.id=d.idCounter++,this.materialA=a,this.materialB=b,this.friction=\"undefined\"!=typeof c.friction?Number(c.friction):.3,this.restitution=\"undefined\"!=typeof c.restitution?Number(c.restitution):0,this.stiffness=\"undefined\"!=typeof c.stiffness?Number(c.stiffness):f.DEFAULT_STIFFNESS,this.relaxation=\"undefined\"!=typeof c.relaxation?Number(c.relaxation):f.DEFAULT_RELAXATION,this.frictionStiffness=\"undefined\"!=typeof c.frictionStiffness?Number(c.frictionStiffness):f.DEFAULT_STIFFNESS,this.frictionRelaxation=\"undefined\"!=typeof c.frictionRelaxation?Number(c.frictionRelaxation):f.DEFAULT_RELAXATION,this.surfaceVelocity=\"undefined\"!=typeof c.surfaceVelocity?Number(c.surfaceVelocity):0,this.contactSkinSize=.005}var e=a(\"./Material\"),f=a(\"../equations/Equation\");b.exports=d,d.idCounter=0},{\"../equations/Equation\":23,\"./Material\":29}],29:[function(a,b,c){function d(a){this.id=a||d.idCounter++}b.exports=d,d.idCounter=0},{}],30:[function(a,b,c){var d={};d.GetArea=function(a){if(a.length<6)return 0;for(var b=a.length-2,c=0,d=0;b>d;d+=2)c+=(a[d+2]-a[d])*(a[d+1]+a[d+3]);return c+=(a[0]-a[b])*(a[b+1]+a[1]),.5*-c},d.Triangulate=function(a){var b=a.length>>1;if(3>b)return[];for(var c=[],e=[],f=0;b>f;f++)e.push(f);for(var f=0,g=b;g>3;){var h=e[(f+0)%g],i=e[(f+1)%g],j=e[(f+2)%g],k=a[2*h],l=a[2*h+1],m=a[2*i],n=a[2*i+1],o=a[2*j],p=a[2*j+1],q=!1;if(d._convex(k,l,m,n,o,p)){q=!0;for(var r=0;g>r;r++){var s=e[r];if(s!=h&&s!=i&&s!=j&&d._PointInTriangle(a[2*s],a[2*s+1],k,l,m,n,o,p)){q=!1;break}}}if(q)c.push(h,i,j),e.splice((f+1)%g,1),g--,f=0;else if(f++>3*g)break}return c.push(e[0],e[1],e[2]),c},d._PointInTriangle=function(a,b,c,d,e,f,g,h){\nvar i=g-c,j=h-d,k=e-c,l=f-d,m=a-c,n=b-d,o=i*i+j*j,p=i*k+j*l,q=i*m+j*n,r=k*k+l*l,s=k*m+l*n,t=1/(o*r-p*p),u=(r*q-p*s)*t,v=(o*s-p*q)*t;return u>=0&&v>=0&&1>u+v},d._convex=function(a,b,c,d,e,f){return(b-d)*(e-c)+(c-a)*(f-d)>=0},b.exports=d},{}],31:[function(a,b,c){var d=b.exports={},e=a(\"../utils/Utils\");d.crossLength=function(a,b){return a[0]*b[1]-a[1]*b[0]},d.crossVZ=function(a,b,c){return d.rotate(a,b,-Math.PI/2),d.scale(a,a,c),a},d.crossZV=function(a,b,c){return d.rotate(a,c,Math.PI/2),d.scale(a,a,b),a},d.rotate=function(a,b,c){if(0!==c){var d=Math.cos(c),e=Math.sin(c),f=b[0],g=b[1];a[0]=d*f-e*g,a[1]=e*f+d*g}else a[0]=b[0],a[1]=b[1]},d.rotate90cw=function(a,b){var c=b[0],d=b[1];a[0]=d,a[1]=-c},d.toLocalFrame=function(a,b,c,e){d.copy(a,b),d.sub(a,a,c),d.rotate(a,a,-e)},d.toGlobalFrame=function(a,b,c,e){d.copy(a,b),d.rotate(a,a,e),d.add(a,a,c)},d.vectorToLocalFrame=function(a,b,c){d.rotate(a,b,-c)},d.vectorToGlobalFrame=function(a,b,c){d.rotate(a,b,c)},d.centroid=function(a,b,c,e){return d.add(a,b,c),d.add(a,a,e),d.scale(a,a,1/3),a},d.create=function(){var a=new e.ARRAY_TYPE(2);return a[0]=0,a[1]=0,a},d.clone=function(a){var b=new e.ARRAY_TYPE(2);return b[0]=a[0],b[1]=a[1],b},d.fromValues=function(a,b){var c=new e.ARRAY_TYPE(2);return c[0]=a,c[1]=b,c},d.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a},d.set=function(a,b,c){return a[0]=b,a[1]=c,a},d.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a},d.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a},d.sub=d.subtract,d.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a},d.mul=d.multiply,d.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a},d.div=d.divide,d.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a},d.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)},d.dist=d.distance,d.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d},d.sqrDist=d.squaredDistance,d.length=function(a){var b=a[0],c=a[1];return Math.sqrt(b*b+c*c)},d.len=d.length,d.squaredLength=function(a){var b=a[0],c=a[1];return b*b+c*c},d.sqrLen=d.squaredLength,d.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a},d.normalize=function(a,b){var c=b[0],d=b[1],e=c*c+d*d;return e>0&&(e=1/Math.sqrt(e),a[0]=b[0]*e,a[1]=b[1]*e),a},d.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]},d.str=function(a){return\"vec2(\"+a[0]+\", \"+a[1]+\")\"},d.lerp=function(a,b,c,d){var e=b[0],f=b[1];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a},d.reflect=function(a,b,c){var d=b[0]*c[0]+b[1]*c[1];a[0]=b[0]-2*c[0]*d,a[1]=b[1]-2*c[1]*d}},{\"../utils/Utils\":58}],32:[function(a,b,c){function d(a){a=a||{},j.call(this),this.id=a.id||++d._idCounter,this.world=null,this.shapes=[],this.shapeOffsets=[],this.shapeAngles=[],this.mass=a.mass||0,this.invMass=0,this.inertia=0,this.invInertia=0,this.invMassSolve=0,this.invInertiaSolve=0,this.fixedRotation=!!a.fixedRotation,this.fixedX=!!a.fixedX,this.fixedY=!!a.fixedY,this.massMultiplier=e.create(),this.position=e.fromValues(0,0),a.position&&e.copy(this.position,a.position),this.interpolatedPosition=e.fromValues(0,0),this.interpolatedAngle=0,this.previousPosition=e.fromValues(0,0),this.previousAngle=0,this.velocity=e.fromValues(0,0),a.velocity&&e.copy(this.velocity,a.velocity),this.vlambda=e.fromValues(0,0),this.wlambda=0,this.angle=a.angle||0,this.angularVelocity=a.angularVelocity||0,this.force=e.create(),a.force&&e.copy(this.force,a.force),this.angularForce=a.angularForce||0,this.damping=\"number\"==typeof a.damping?a.damping:.1,this.angularDamping=\"number\"==typeof a.angularDamping?a.angularDamping:.1,this.type=d.STATIC,\"undefined\"!=typeof a.type?this.type=a.type:a.mass?this.type=d.DYNAMIC:this.type=d.STATIC,this.boundingRadius=0,this.aabb=new i,this.aabbNeedsUpdate=!0,this.allowSleep=void 0!==a.allowSleep?a.allowSleep:!0,this.wantsToSleep=!1,this.sleepState=d.AWAKE,this.sleepSpeedLimit=void 0!==a.sleepSpeedLimit?a.sleepSpeedLimit:.2,this.sleepTimeLimit=void 0!==a.sleepTimeLimit?a.sleepTimeLimit:1,this.gravityScale=void 0!==a.gravityScale?a.gravityScale:1,this.collisionResponse=void 0!==a.collisionResponse?a.collisionResponse:!0,this.idleTime=0,this.timeLastSleepy=0,this.ccdSpeedThreshold=void 0!==a.ccdSpeedThreshold?a.ccdSpeedThreshold:-1,this.ccdIterations=void 0!==a.ccdIterations?a.ccdIterations:10,this.concavePath=null,this._wakeUpAfterNarrowphase=!1,this.updateMassProperties()}var e=a(\"../math/vec2\"),f=a(\"poly-decomp\"),g=a(\"../shapes/Convex\"),h=a(\"../collision/RaycastResult\"),i=a(\"../collision/AABB\"),j=a(\"../events/EventEmitter\");b.exports=d,d.prototype=new j,d.prototype.constructor=d,d._idCounter=0,d.prototype.updateSolveMassProperties=function(){this.sleepState===d.SLEEPING||this.type===d.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve=0):(this.invMassSolve=this.invMass,this.invInertiaSolve=this.invInertia)},d.prototype.setDensity=function(a){var b=this.getArea();this.mass=b*a,this.updateMassProperties()},d.prototype.getArea=function(){for(var a=0,b=0;b<this.shapes.length;b++)a+=this.shapes[b].area;return a},d.prototype.getAABB=function(){return this.aabbNeedsUpdate&&this.updateAABB(),this.aabb};var k=new i,l=e.create();d.prototype.updateAABB=function(){for(var a=this.shapes,b=this.shapeOffsets,c=this.shapeAngles,d=a.length,f=l,g=this.angle,h=0;h!==d;h++){var i=a[h],j=c[h]+g;e.rotate(f,b[h],g),e.add(f,f,this.position),i.computeAABB(k,f,j),0===h?this.aabb.copy(k):this.aabb.extend(k)}this.aabbNeedsUpdate=!1},d.prototype.updateBoundingRadius=function(){for(var a=this.shapes,b=this.shapeOffsets,c=a.length,d=0,f=0;f!==c;f++){var g=a[f],h=e.length(b[f]),i=g.boundingRadius;h+i>d&&(d=h+i)}this.boundingRadius=d},d.prototype.addShape=function(a,b,c){c=c||0,b=b?e.fromValues(b[0],b[1]):e.fromValues(0,0),this.shapes.push(a),this.shapeOffsets.push(b),this.shapeAngles.push(c),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0},d.prototype.removeShape=function(a){var b=this.shapes.indexOf(a);return-1!==b?(this.shapes.splice(b,1),this.shapeOffsets.splice(b,1),this.shapeAngles.splice(b,1),this.aabbNeedsUpdate=!0,!0):!1},d.prototype.updateMassProperties=function(){if(this.type===d.STATIC||this.type===d.KINEMATIC)this.mass=Number.MAX_VALUE,this.invMass=0,this.inertia=Number.MAX_VALUE,this.invInertia=0;else{var a=this.shapes,b=a.length,c=this.mass/b,f=0;if(this.fixedRotation)this.inertia=Number.MAX_VALUE,this.invInertia=0;else{for(var g=0;b>g;g++){var h=a[g],i=e.squaredLength(this.shapeOffsets[g]),j=h.computeMomentOfInertia(c);f+=j+c*i}this.inertia=f,this.invInertia=f>0?1/f:0}this.invMass=1/this.mass,e.set(this.massMultiplier,this.fixedX?0:1,this.fixedY?0:1)}};e.create();d.prototype.applyForce=function(a,b){if(e.add(this.force,this.force,a),b){var c=e.crossLength(b,a);this.angularForce+=c}};var m=e.create(),n=e.create(),o=e.create();d.prototype.applyForceLocal=function(a,b){b=b||o;var c=m,d=n;this.vectorToWorldFrame(c,a),this.vectorToWorldFrame(d,b),this.applyForce(c,d)};var p=e.create();d.prototype.applyImpulse=function(a,b){if(this.type===d.DYNAMIC){var c=p;if(e.scale(c,a,this.invMass),e.multiply(c,this.massMultiplier,c),e.add(this.velocity,c,this.velocity),b){var f=e.crossLength(b,a);f*=this.invInertia,this.angularVelocity+=f}}};var q=e.create(),r=e.create(),s=e.create();d.prototype.applyImpulseLocal=function(a,b){b=b||s;var c=q,d=r;this.vectorToWorldFrame(c,a),this.vectorToWorldFrame(d,b),this.applyImpulse(c,d)},d.prototype.toLocalFrame=function(a,b){e.toLocalFrame(a,b,this.position,this.angle)},d.prototype.toWorldFrame=function(a,b){e.toGlobalFrame(a,b,this.position,this.angle)},d.prototype.vectorToLocalFrame=function(a,b){e.vectorToLocalFrame(a,b,this.angle)},d.prototype.vectorToWorldFrame=function(a,b){e.vectorToGlobalFrame(a,b,this.angle)},d.prototype.fromPolygon=function(a,b){b=b||{};for(var c=this.shapes.length;c>=0;--c)this.removeShape(this.shapes[c]);var d=new f.Polygon;if(d.vertices=a,d.makeCCW(),\"number\"==typeof b.removeCollinearPoints&&d.removeCollinearPoints(b.removeCollinearPoints),\"undefined\"==typeof b.skipSimpleCheck&&!d.isSimple())return!1;this.concavePath=d.vertices.slice(0);for(var c=0;c<this.concavePath.length;c++){var h=[0,0];e.copy(h,this.concavePath[c]),this.concavePath[c]=h}var i;i=b.optimalDecomp?d.decomp():d.quickDecomp();for(var j=e.create(),c=0;c!==i.length;c++){for(var k=new g(i[c].vertices),l=0;l!==k.vertices.length;l++){var h=k.vertices[l];e.sub(h,h,k.centerOfMass)}e.scale(j,k.centerOfMass,1),k.updateTriangles(),k.updateCenterOfMass(),k.updateBoundingRadius(),this.addShape(k,j)}return this.adjustCenterOfMass(),this.aabbNeedsUpdate=!0,!0};var t=(e.fromValues(0,0),e.fromValues(0,0)),u=e.fromValues(0,0),v=e.fromValues(0,0);d.prototype.adjustCenterOfMass=function(){var a=t,b=u,c=v,d=0;e.set(b,0,0);for(var f=0;f!==this.shapes.length;f++){var g=this.shapes[f],h=this.shapeOffsets[f];e.scale(a,h,g.area),e.add(b,b,a),d+=g.area}e.scale(c,b,1/d);for(var f=0;f!==this.shapes.length;f++){var g=this.shapes[f],h=this.shapeOffsets[f];h||(h=this.shapeOffsets[f]=e.create()),e.sub(h,h,c)}e.add(this.position,this.position,c);for(var f=0;this.concavePath&&f<this.concavePath.length;f++)e.sub(this.concavePath[f],this.concavePath[f],c);this.updateMassProperties(),this.updateBoundingRadius()},d.prototype.setZeroForce=function(){e.set(this.force,0,0),this.angularForce=0},d.prototype.resetConstraintVelocity=function(){var a=this,b=a.vlambda;e.set(b,0,0),a.wlambda=0},d.prototype.addConstraintVelocity=function(){var a=this,b=a.velocity;e.add(b,b,a.vlambda),a.angularVelocity+=a.wlambda},d.prototype.applyDamping=function(a){if(this.type===d.DYNAMIC){var b=this.velocity;e.scale(b,b,Math.pow(1-this.damping,a)),this.angularVelocity*=Math.pow(1-this.angularDamping,a)}},d.prototype.wakeUp=function(){var a=this.sleepState;this.sleepState=d.AWAKE,this.idleTime=0,a!==d.AWAKE&&this.emit(d.wakeUpEvent)},d.prototype.sleep=function(){this.sleepState=d.SLEEPING,this.angularVelocity=0,this.angularForce=0,e.set(this.velocity,0,0),e.set(this.force,0,0),this.emit(d.sleepEvent)},d.prototype.sleepTick=function(a,b,c){if(this.allowSleep&&this.type!==d.SLEEPING){this.wantsToSleep=!1;var f=(this.sleepState,e.squaredLength(this.velocity)+Math.pow(this.angularVelocity,2)),g=Math.pow(this.sleepSpeedLimit,2);f>=g?(this.idleTime=0,this.sleepState=d.AWAKE):(this.idleTime+=c,this.sleepState=d.SLEEPY),this.idleTime>this.sleepTimeLimit&&(b?this.wantsToSleep=!0:this.sleep())}},d.prototype.overlaps=function(a){return this.world.overlapKeeper.bodiesAreOverlapping(this,a)};var w=e.create(),x=e.create();d.prototype.integrate=function(a){var b=this.invMass,c=this.force,d=this.position,f=this.velocity;e.copy(this.previousPosition,this.position),this.previousAngle=this.angle,this.fixedRotation||(this.angularVelocity+=this.angularForce*this.invInertia*a),e.scale(w,c,a*b),e.multiply(w,this.massMultiplier,w),e.add(f,w,f),this.integrateToTimeOfImpact(a)||(e.scale(x,f,a),e.add(d,d,x),this.fixedRotation||(this.angle+=this.angularVelocity*a)),this.aabbNeedsUpdate=!0};var y={result:new h},z=e.create(),A=e.create(),B=e.create(),C=e.create();d.prototype.integrateToTimeOfImpact=function(a){if(this.ccdSpeedThreshold<0||e.squaredLength(this.velocity)<Math.pow(this.ccdSpeedThreshold,2))return!1;e.normalize(z,this.velocity),e.scale(A,this.velocity,a),e.add(A,A,this.position),e.sub(B,A,this.position);var b,c=this.angularVelocity*a,d=e.length(B),f=1,g=this;if(y.result.reset(),this.world.raycastAll(this.position,A,y,function(a){a.body!==g&&(b=a.body,e.copy(A,a.hitPointWorld),e.sub(B,a.hitPointWorld,g.position),f=e.length(B)/d,a.abort())}),!b)return!1;var h=this.angle;e.copy(C,this.position);for(var i=0,j=0,k=0,l=f;l>=j&&i<this.ccdIterations;){i++,k=(l-j)/2,e.scale(x,B,f),e.add(this.position,C,x),this.angle=h+c*f,this.updateAABB();var m=this.aabb.overlaps(b.aabb)&&this.world.narrowphase.bodiesOverlap(this,b);m?j=k:l=k}return f=k,e.copy(this.position,C),this.angle=h,e.scale(x,B,f),e.add(this.position,this.position,x),this.fixedRotation||(this.angle+=c*f),!0},d.prototype.getVelocityAtPoint=function(a,b){return e.crossVZ(a,b,this.angularVelocity),e.add(a,a,this.velocity),a},d.sleepyEvent={type:\"sleepy\"},d.sleepEvent={type:\"sleep\"},d.wakeUpEvent={type:\"wakeup\"},d.DYNAMIC=1,d.STATIC=2,d.KINEMATIC=4,d.AWAKE=0,d.SLEEPY=1,d.SLEEPING=2},{\"../collision/AABB\":7,\"../collision/RaycastResult\":13,\"../events/EventEmitter\":27,\"../math/vec2\":31,\"../shapes/Convex\":40,\"poly-decomp\":5}],33:[function(a,b,c){function d(a,b,c){c=c||{},f.call(this,a,b,c),this.localAnchorA=e.fromValues(0,0),this.localAnchorB=e.fromValues(0,0),c.localAnchorA&&e.copy(this.localAnchorA,c.localAnchorA),c.localAnchorB&&e.copy(this.localAnchorB,c.localAnchorB),c.worldAnchorA&&this.setWorldAnchorA(c.worldAnchorA),c.worldAnchorB&&this.setWorldAnchorB(c.worldAnchorB);var d=e.create(),g=e.create();this.getWorldAnchorA(d),this.getWorldAnchorB(g);var h=e.distance(d,g);this.restLength=\"number\"==typeof c.restLength?c.restLength:h}{var e=a(\"../math/vec2\"),f=a(\"./Spring\");a(\"../utils/Utils\")}b.exports=d,d.prototype=new f,d.prototype.constructor=d,d.prototype.setWorldAnchorA=function(a){this.bodyA.toLocalFrame(this.localAnchorA,a)},d.prototype.setWorldAnchorB=function(a){this.bodyB.toLocalFrame(this.localAnchorB,a)},d.prototype.getWorldAnchorA=function(a){this.bodyA.toWorldFrame(a,this.localAnchorA)},d.prototype.getWorldAnchorB=function(a){this.bodyB.toWorldFrame(a,this.localAnchorB)};var g=e.create(),h=e.create(),i=e.create(),j=e.create(),k=e.create(),l=e.create(),m=e.create(),n=e.create(),o=e.create();d.prototype.applyForce=function(){var a=this.stiffness,b=this.damping,c=this.restLength,d=this.bodyA,f=this.bodyB,p=g,q=h,r=i,s=j,t=o,u=k,v=l,w=m,x=n;this.getWorldAnchorA(u),this.getWorldAnchorB(v),e.sub(w,u,d.position),e.sub(x,v,f.position),e.sub(p,v,u);var y=e.len(p);e.normalize(q,p),e.sub(r,f.velocity,d.velocity),e.crossZV(t,f.angularVelocity,x),e.add(r,r,t),e.crossZV(t,d.angularVelocity,w),e.sub(r,r,t),e.scale(s,q,-a*(y-c)-b*e.dot(r,q)),e.sub(d.force,d.force,s),e.add(f.force,f.force,s);var z=e.crossLength(w,s),A=e.crossLength(x,s);d.angularForce-=z,f.angularForce+=A}},{\"../math/vec2\":31,\"../utils/Utils\":58,\"./Spring\":35}],34:[function(a,b,c){function d(a,b,c){c=c||{},e.call(this,a,b,c),this.restAngle=\"number\"==typeof c.restAngle?c.restAngle:b.angle-a.angle}var e=(a(\"../math/vec2\"),a(\"./Spring\"));b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.applyForce=function(){var a=this.stiffness,b=this.damping,c=this.restAngle,d=this.bodyA,e=this.bodyB,f=e.angle-d.angle,g=e.angularVelocity-d.angularVelocity,h=-a*(f-c)-b*g*0;d.angularForce-=h,e.angularForce+=h}},{\"../math/vec2\":31,\"./Spring\":35}],35:[function(a,b,c){function d(a,b,c){c=e.defaults(c,{stiffness:100,damping:1}),this.stiffness=c.stiffness,this.damping=c.damping,this.bodyA=a,this.bodyB=b}var e=(a(\"../math/vec2\"),a(\"../utils/Utils\"));b.exports=d,d.prototype.applyForce=function(){}},{\"../math/vec2\":31,\"../utils/Utils\":58}],36:[function(a,b,c){function d(a,b){b=b||{},this.chassisBody=a,this.wheels=[],this.groundBody=new i({mass:0}),this.world=null;var c=this;this.preStepCallback=function(){c.update()}}function e(a,b){b=b||{},this.vehicle=a,this.forwardEquation=new h(a.chassisBody,a.groundBody),this.sideEquation=new h(a.chassisBody,a.groundBody),this.steerValue=0,this.engineForce=0,this.setSideFriction(void 0!==b.sideFriction?b.sideFriction:5),this.localForwardVector=f.fromValues(0,1),b.localForwardVector&&f.copy(this.localForwardVector,b.localForwardVector),this.localPosition=f.fromValues(0,0),b.localPosition&&f.copy(this.localPosition,b.localPosition),g.apply(this,a.chassisBody,a.groundBody),this.equations.push(this.forwardEquation,this.sideEquation),this.setBrakeForce(0)}var f=a(\"../math/vec2\"),g=(a(\"../utils/Utils\"),a(\"../constraints/Constraint\")),h=a(\"../equations/FrictionEquation\"),i=a(\"../objects/Body\");b.exports=d,d.prototype.addToWorld=function(a){this.world=a,a.addBody(this.groundBody),a.on(\"preStep\",this.preStepCallback);for(var b=0;b<this.wheels.length;b++){var c=this.wheels[b];a.addConstraint(c)}},d.prototype.removeFromWorld=function(){var a=this.world;a.removeBody(this.groundBody),a.off(\"preStep\",this.preStepCallback);for(var b=0;b<this.wheels.length;b++){var c=this.wheels[b];a.removeConstraint(c)}this.world=null},d.prototype.addWheel=function(a){var b=new e(this,a);return this.wheels.push(b),b},d.prototype.update=function(){for(var a=0;a<this.wheels.length;a++)this.wheels[a].update()},e.prototype=new g,e.prototype.setBrakeForce=function(a){this.forwardEquation.setSlipForce(a)},e.prototype.setSideFriction=function(a){this.sideEquation.setSlipForce(a)};var j=f.create(),k=f.create();e.prototype.getSpeed=function(){return this.vehicle.chassisBody.vectorToWorldFrame(k,this.localForwardVector),this.vehicle.chassisBody.getVelocityAtPoint(j,k),f.dot(j,k)};var l=f.create();e.prototype.update=function(){this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.t,this.localForwardVector),f.rotate(this.sideEquation.t,this.localForwardVector,Math.PI/2),this.vehicle.chassisBody.vectorToWorldFrame(this.sideEquation.t,this.sideEquation.t),f.rotate(this.forwardEquation.t,this.forwardEquation.t,this.steerValue),f.rotate(this.sideEquation.t,this.sideEquation.t,this.steerValue),this.vehicle.chassisBody.toWorldFrame(this.forwardEquation.contactPointB,this.localPosition),f.copy(this.sideEquation.contactPointB,this.forwardEquation.contactPointB),this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.contactPointA,this.localPosition),f.copy(this.sideEquation.contactPointA,this.forwardEquation.contactPointA),f.normalize(l,this.forwardEquation.t),f.scale(l,l,this.engineForce),this.vehicle.chassisBody.applyForce(l,this.forwardEquation.contactPointA)}},{\"../constraints/Constraint\":15,\"../equations/FrictionEquation\":24,\"../math/vec2\":31,\"../objects/Body\":32,\"../utils/Utils\":58}],37:[function(a,b,c){b.exports={AABB:a(\"./collision/AABB\"),AngleLockEquation:a(\"./equations/AngleLockEquation\"),Body:a(\"./objects/Body\"),Broadphase:a(\"./collision/Broadphase\"),Capsule:a(\"./shapes/Capsule\"),Circle:a(\"./shapes/Circle\"),Constraint:a(\"./constraints/Constraint\"),ContactEquation:a(\"./equations/ContactEquation\"),ContactEquationPool:a(\"./utils/ContactEquationPool\"),ContactMaterial:a(\"./material/ContactMaterial\"),Convex:a(\"./shapes/Convex\"),DistanceConstraint:a(\"./constraints/DistanceConstraint\"),Equation:a(\"./equations/Equation\"),EventEmitter:a(\"./events/EventEmitter\"),FrictionEquation:a(\"./equations/FrictionEquation\"),FrictionEquationPool:a(\"./utils/FrictionEquationPool\"),GearConstraint:a(\"./constraints/GearConstraint\"),GridBroadphase:a(\"./collision/GridBroadphase\"),GSSolver:a(\"./solver/GSSolver\"),Heightfield:a(\"./shapes/Heightfield\"),Line:a(\"./shapes/Line\"),LockConstraint:a(\"./constraints/LockConstraint\"),Material:a(\"./material/Material\"),Narrowphase:a(\"./collision/Narrowphase\"),NaiveBroadphase:a(\"./collision/NaiveBroadphase\"),Particle:a(\"./shapes/Particle\"),Plane:a(\"./shapes/Plane\"),Pool:a(\"./utils/Pool\"),RevoluteConstraint:a(\"./constraints/RevoluteConstraint\"),PrismaticConstraint:a(\"./constraints/PrismaticConstraint\"),Ray:a(\"./collision/Ray\"),RaycastResult:a(\"./collision/RaycastResult\"),Rectangle:a(\"./shapes/Rectangle\"),RotationalVelocityEquation:a(\"./equations/RotationalVelocityEquation\"),SAPBroadphase:a(\"./collision/SAPBroadphase\"),Shape:a(\"./shapes/Shape\"),Solver:a(\"./solver/Solver\"),Spring:a(\"./objects/Spring\"),TopDownVehicle:a(\"./objects/TopDownVehicle\"),LinearSpring:a(\"./objects/LinearSpring\"),RotationalSpring:a(\"./objects/RotationalSpring\"),Utils:a(\"./utils/Utils\"),World:a(\"./world/World\"),vec2:a(\"./math/vec2\"),version:a(\"../package.json\").version}},{\"../package.json\":6,\"./collision/AABB\":7,\"./collision/Broadphase\":8,\"./collision/GridBroadphase\":9,\"./collision/NaiveBroadphase\":10,\"./collision/Narrowphase\":11,\"./collision/Ray\":12,\"./collision/RaycastResult\":13,\"./collision/SAPBroadphase\":14,\"./constraints/Constraint\":15,\"./constraints/DistanceConstraint\":16,\"./constraints/GearConstraint\":17,\"./constraints/LockConstraint\":18,\"./constraints/PrismaticConstraint\":19,\"./constraints/RevoluteConstraint\":20,\"./equations/AngleLockEquation\":21,\"./equations/ContactEquation\":22,\"./equations/Equation\":23,\"./equations/FrictionEquation\":24,\"./equations/RotationalVelocityEquation\":26,\"./events/EventEmitter\":27,\"./material/ContactMaterial\":28,\"./material/Material\":29,\"./math/vec2\":31,\"./objects/Body\":32,\"./objects/LinearSpring\":33,\"./objects/RotationalSpring\":34,\"./objects/Spring\":35,\"./objects/TopDownVehicle\":36,\"./shapes/Capsule\":38,\"./shapes/Circle\":39,\"./shapes/Convex\":40,\"./shapes/Heightfield\":41,\"./shapes/Line\":42,\"./shapes/Particle\":43,\"./shapes/Plane\":44,\"./shapes/Rectangle\":45,\"./shapes/Shape\":46,\"./solver/GSSolver\":47,\"./solver/Solver\":48,\"./utils/ContactEquationPool\":49,\"./utils/FrictionEquationPool\":50,\"./utils/Pool\":56,\"./utils/Utils\":58,\"./world/World\":62}],38:[function(a,b,c){function d(a,b){this.length=a||1,this.radius=b||1,e.call(this,e.CAPSULE)}var e=a(\"./Shape\"),f=a(\"../math/vec2\");b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.computeMomentOfInertia=function(a){var b=this.radius,c=this.length+b,d=2*b;return a*(d*d+c*c)/12},d.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius+this.length/2},d.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius+2*this.radius*this.length};var g=f.create();d.prototype.computeAABB=function(a,b,c){var d=this.radius;f.set(g,this.length/2,0),0!==c&&f.rotate(g,g,c),f.set(a.upperBound,Math.max(g[0]+d,-g[0]+d),Math.max(g[1]+d,-g[1]+d)),f.set(a.lowerBound,Math.min(g[0]-d,-g[0]-d),Math.min(g[1]-d,-g[1]-d)),f.add(a.lowerBound,a.lowerBound,b),f.add(a.upperBound,a.upperBound,b)}},{\"../math/vec2\":31,\"./Shape\":46}],39:[function(a,b,c){function d(a){this.radius=a||1,e.call(this,e.CIRCLE)}var e=a(\"./Shape\"),f=a(\"../math/vec2\");b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.computeMomentOfInertia=function(a){var b=this.radius;return a*b*b/2},d.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius},d.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius},d.prototype.computeAABB=function(a,b,c){var d=this.radius;f.set(a.upperBound,d,d),f.set(a.lowerBound,-d,-d),b&&(f.add(a.lowerBound,a.lowerBound,b),f.add(a.upperBound,a.upperBound,b))}},{\"../math/vec2\":31,\"./Shape\":46}],40:[function(a,b,c){function d(a,b){this.vertices=[],this.axes=[];for(var c=0;c<a.length;c++){var d=f.create();f.copy(d,a[c]),this.vertices.push(d)}if(b)for(var c=0;c<b.length;c++){var g=f.create();f.copy(g,b[c]),this.axes.push(g)}else for(var c=0;c<a.length;c++){var h=a[c],i=a[(c+1)%a.length],j=f.create();f.sub(j,i,h),f.rotate90cw(j,j),f.normalize(j,j),this.axes.push(j)}if(this.centerOfMass=f.fromValues(0,0),this.triangles=[],this.vertices.length&&(this.updateTriangles(),this.updateCenterOfMass()),this.boundingRadius=0,e.call(this,e.CONVEX),this.updateBoundingRadius(),this.updateArea(),this.area<0)throw new Error(\"Convex vertices must be given in conter-clockwise winding.\")}{var e=a(\"./Shape\"),f=a(\"../math/vec2\"),g=a(\"../math/polyk\");a(\"poly-decomp\")}b.exports=d,d.prototype=new e,d.prototype.constructor=d;var h=f.create(),i=f.create();d.prototype.projectOntoLocalAxis=function(a,b){for(var c,d,e=null,g=null,a=h,i=0;i<this.vertices.length;i++)c=this.vertices[i],d=f.dot(c,a),(null===e||d>e)&&(e=d),(null===g||g>d)&&(g=d);if(g>e){var j=g;g=e,e=j}f.set(b,g,e)},d.prototype.projectOntoWorldAxis=function(a,b,c,d){var e=i;this.projectOntoLocalAxis(a,d),0!==c?f.rotate(e,a,c):e=a;var g=f.dot(b,e);f.set(d,d[0]+g,d[1]+g)},d.prototype.updateTriangles=function(){this.triangles.length=0;for(var a=[],b=0;b<this.vertices.length;b++){var c=this.vertices[b];a.push(c[0],c[1])}for(var d=g.Triangulate(a),b=0;b<d.length;b+=3){var e=d[b],f=d[b+1],h=d[b+2];this.triangles.push([e,f,h])}};{var j=f.create(),k=f.create(),l=f.create(),m=f.create(),n=f.create();f.create(),f.create(),f.create(),f.create()}d.prototype.updateCenterOfMass=function(){var a=this.triangles,b=this.vertices,c=this.centerOfMass,e=j,g=l,h=m,i=n,o=k;f.set(c,0,0);for(var p=0,q=0;q!==a.length;q++){var r=a[q],g=b[r[0]],h=b[r[1]],i=b[r[2]];f.centroid(e,g,h,i);var s=d.triangleArea(g,h,i);p+=s,f.scale(o,e,s),f.add(c,c,o)}f.scale(c,c,1/p)},d.prototype.computeMomentOfInertia=function(a){for(var b=0,c=0,d=this.vertices.length,e=d-1,g=0;d>g;e=g,g++){var h=this.vertices[e],i=this.vertices[g],j=Math.abs(f.crossLength(h,i)),k=f.dot(i,i)+f.dot(i,h)+f.dot(h,h);b+=j*k,c+=j}return a/6*(b/c)},d.prototype.updateBoundingRadius=function(){for(var a=this.vertices,b=0,c=0;c!==a.length;c++){var d=f.squaredLength(a[c]);d>b&&(b=d)}this.boundingRadius=Math.sqrt(b)},d.triangleArea=function(a,b,c){return.5*((b[0]-a[0])*(c[1]-a[1])-(c[0]-a[0])*(b[1]-a[1]))},d.prototype.updateArea=function(){this.updateTriangles(),this.area=0;for(var a=this.triangles,b=this.vertices,c=0;c!==a.length;c++){var e=a[c],f=b[e[0]],g=b[e[1]],h=b[e[2]],i=d.triangleArea(f,g,h);this.area+=i}},d.prototype.computeAABB=function(a,b,c){a.setFromPoints(this.vertices,b,c,0)}},{\"../math/polyk\":30,\"../math/vec2\":31,\"./Shape\":46,\"poly-decomp\":5}],41:[function(a,b,c){function d(a,b){if(b=f.defaults(b,{maxValue:null,minValue:null,elementWidth:.1}),null===b.minValue||null===b.maxValue){b.maxValue=a[0],b.minValue=a[0];for(var c=0;c!==a.length;c++){var d=a[c];d>b.maxValue&&(b.maxValue=d),d<b.minValue&&(b.minValue=d)}}this.data=a,this.maxValue=b.maxValue,this.minValue=b.minValue,this.elementWidth=b.elementWidth,e.call(this,e.HEIGHTFIELD)}var e=a(\"./Shape\"),f=(a(\"../math/vec2\"),a(\"../utils/Utils\"));b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.computeMomentOfInertia=function(a){return Number.MAX_VALUE},d.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},d.prototype.updateArea=function(){for(var a=this.data,b=0,c=0;c<a.length-1;c++)b+=(a[c]+a[c+1])/2*this.elementWidth;this.area=b},d.prototype.computeAABB=function(a,b,c){a.upperBound[0]=this.elementWidth*this.data.length+b[0],a.upperBound[1]=this.maxValue+b[1],a.lowerBound[0]=b[0],a.lowerBound[1]=-Number.MAX_VALUE}},{\"../math/vec2\":31,\"../utils/Utils\":58,\"./Shape\":46}],42:[function(a,b,c){function d(a){this.length=a||1,e.call(this,e.LINE)}var e=a(\"./Shape\"),f=a(\"../math/vec2\");b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.computeMomentOfInertia=function(a){return a*Math.pow(this.length,2)/12},d.prototype.updateBoundingRadius=function(){this.boundingRadius=this.length/2};var g=[f.create(),f.create()];d.prototype.computeAABB=function(a,b,c){var d=this.length/2;f.set(g[0],-d,0),f.set(g[1],d,0),a.setFromPoints(g,b,c,0)}},{\"../math/vec2\":31,\"./Shape\":46}],43:[function(a,b,c){function d(){e.call(this,e.PARTICLE)}var e=a(\"./Shape\"),f=a(\"../math/vec2\");b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.computeMomentOfInertia=function(a){return 0},d.prototype.updateBoundingRadius=function(){this.boundingRadius=0},d.prototype.computeAABB=function(a,b,c){f.copy(a.lowerBound,b),f.copy(a.upperBound,b)}},{\"../math/vec2\":31,\"./Shape\":46}],44:[function(a,b,c){function d(){e.call(this,e.PLANE)}{var e=a(\"./Shape\"),f=a(\"../math/vec2\");a(\"../utils/Utils\")}b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.computeMomentOfInertia=function(a){return 0},d.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},d.prototype.computeAABB=function(a,b,c){var d=c%(2*Math.PI),e=f.set,g=Number.MAX_VALUE,h=a.lowerBound,i=a.upperBound;0===d?(e(h,-g,-g),e(i,g,0)):d===Math.PI/2?(e(h,0,-g),e(i,g,g)):d===Math.PI?(e(h,-g,0),e(i,g,g)):d===3*Math.PI/2?(e(h,-g,-g),e(i,0,g)):(e(h,-g,-g),e(i,g,g)),f.add(h,h,b),f.add(i,i,b)},d.prototype.updateArea=function(){this.area=Number.MAX_VALUE}},{\"../math/vec2\":31,\"../utils/Utils\":58,\"./Shape\":46}],45:[function(a,b,c){function d(a,b){this.width=a||1,this.height=b||1;var c=[e.fromValues(-a/2,-b/2),e.fromValues(a/2,-b/2),e.fromValues(a/2,b/2),e.fromValues(-a/2,b/2)],d=[e.fromValues(1,0),e.fromValues(0,1)];g.call(this,c,d),this.type=f.RECTANGLE}var e=a(\"../math/vec2\"),f=a(\"./Shape\"),g=a(\"./Convex\");b.exports=d,d.prototype=new g([]),d.prototype.constructor=d,d.prototype.computeMomentOfInertia=function(a){var b=this.width,c=this.height;return a*(c*c+b*b)/12},d.prototype.updateBoundingRadius=function(){var a=this.width,b=this.height;this.boundingRadius=Math.sqrt(a*a+b*b)/2};e.create(),e.create(),e.create(),e.create();d.prototype.computeAABB=function(a,b,c){a.setFromPoints(this.vertices,b,c,0)},d.prototype.updateArea=function(){this.area=this.width*this.height}},{\"../math/vec2\":31,\"./Convex\":40,\"./Shape\":46}],46:[function(a,b,c){function d(a){this.type=a,this.id=d.idCounter++,this.boundingRadius=0,this.collisionGroup=1,this.collisionResponse=!0,this.collisionMask=1,a&&this.updateBoundingRadius(),this.material=null,this.area=0,this.sensor=!1,this.updateArea()}b.exports=d,d.idCounter=0,d.CIRCLE=1,d.PARTICLE=2,d.PLANE=4,d.CONVEX=8,d.LINE=16,d.RECTANGLE=32,d.CAPSULE=64,d.HEIGHTFIELD=128,d.prototype.computeMomentOfInertia=function(a){throw new Error(\"Shape.computeMomentOfInertia is not implemented in this Shape...\")},d.prototype.updateBoundingRadius=function(){throw new Error(\"Shape.updateBoundingRadius is not implemented in this Shape...\")},d.prototype.updateArea=function(){},d.prototype.computeAABB=function(a,b,c){}},{}],47:[function(a,b,c){function d(a){g.call(this,a,g.GS),a=a||{},this.iterations=a.iterations||10,this.tolerance=a.tolerance||1e-7,this.arrayStep=30,this.lambda=new h.ARRAY_TYPE(this.arrayStep),this.Bs=new h.ARRAY_TYPE(this.arrayStep),this.invCs=new h.ARRAY_TYPE(this.arrayStep),this.useZeroRHS=!1,this.frictionIterations=0,this.usedIterations=0}function e(a){for(var b=a.length;b--;)a[b]=0}var f=a(\"../math/vec2\"),g=a(\"./Solver\"),h=a(\"../utils/Utils\"),i=a(\"../equations/FrictionEquation\");b.exports=d,d.prototype=new g,d.prototype.constructor=d,d.prototype.solve=function(a,b){this.sortEquations();var c=0,g=this.iterations,j=this.frictionIterations,k=this.equations,l=k.length,m=Math.pow(this.tolerance*l,2),n=b.bodies,o=b.bodies.length,p=(f.add,f.set,this.useZeroRHS),q=this.lambda;if(this.usedIterations=0,l)for(var r=0;r!==o;r++){var s=n[r];s.updateSolveMassProperties()}q.length<l&&(q=this.lambda=new h.ARRAY_TYPE(l+this.arrayStep),this.Bs=new h.ARRAY_TYPE(l+this.arrayStep),this.invCs=new h.ARRAY_TYPE(l+this.arrayStep)),e(q);for(var t=this.invCs,u=this.Bs,q=this.lambda,r=0;r!==k.length;r++){var v=k[r];(v.timeStep!==a||v.needsUpdate)&&(v.timeStep=a,v.update()),u[r]=v.computeB(v.a,v.b,a),t[r]=v.computeInvC(v.epsilon)}var v,w,r,x;if(0!==l){for(r=0;r!==o;r++){var s=n[r];s.resetConstraintVelocity()}if(j){for(c=0;c!==j;c++){for(w=0,x=0;x!==l;x++){v=k[x];var y=d.iterateEquation(x,v,v.epsilon,u,t,q,p,a,c);w+=Math.abs(y)}if(this.usedIterations++,m>=w*w)break}for(d.updateMultipliers(k,q,1/a),x=0;x!==l;x++){var z=k[x];if(z instanceof i){for(var A=0,B=0;B!==z.contactEquations.length;B++)A+=z.contactEquations[B].multiplier;A*=z.frictionCoefficient/z.contactEquations.length,z.maxForce=A,z.minForce=-A}}}for(c=0;c!==g;c++){for(w=0,x=0;x!==l;x++){v=k[x];var y=d.iterateEquation(x,v,v.epsilon,u,t,q,p,a,c);w+=Math.abs(y)}if(this.usedIterations++,m>=w*w)break}for(r=0;r!==o;r++)n[r].addConstraintVelocity();d.updateMultipliers(k,q,1/a)}},d.updateMultipliers=function(a,b,c){for(var d=a.length;d--;)a[d].multiplier=b[d]*c},d.iterateEquation=function(a,b,c,d,e,f,g,h,i){var j=d[a],k=e[a],l=f[a],m=b.computeGWlambda(),n=b.maxForce,o=b.minForce;g&&(j=0);var p=k*(j-m-c*l),q=l+p;return o*h>q?p=o*h-l:q>n*h&&(p=n*h-l),f[a]+=p,b.addToWlambda(p),p}},{\"../equations/FrictionEquation\":24,\"../math/vec2\":31,\"../utils/Utils\":58,\"./Solver\":48}],48:[function(a,b,c){function d(a,b){a=a||{},e.call(this),this.type=b,this.equations=[],this.equationSortFunction=a.equationSortFunction||!1}var e=(a(\"../utils/Utils\"),a(\"../events/EventEmitter\"));b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.solve=function(a,b){throw new Error(\"Solver.solve should be implemented by subclasses!\")};var f={bodies:[]\n};d.prototype.solveIsland=function(a,b){this.removeAllEquations(),b.equations.length&&(this.addEquations(b.equations),f.bodies.length=0,b.getBodies(f.bodies),f.bodies.length&&this.solve(a,f))},d.prototype.sortEquations=function(){this.equationSortFunction&&this.equations.sort(this.equationSortFunction)},d.prototype.addEquation=function(a){a.enabled&&this.equations.push(a)},d.prototype.addEquations=function(a){for(var b=0,c=a.length;b!==c;b++){var d=a[b];d.enabled&&this.equations.push(d)}},d.prototype.removeEquation=function(a){var b=this.equations.indexOf(a);-1!==b&&this.equations.splice(b,1)},d.prototype.removeAllEquations=function(){this.equations.length=0},d.GS=1,d.ISLAND=2},{\"../events/EventEmitter\":27,\"../utils/Utils\":58}],49:[function(a,b,c){function d(){f.apply(this,arguments)}var e=a(\"../equations/ContactEquation\"),f=a(\"./Pool\");b.exports=d,d.prototype=new f,d.prototype.constructor=d,d.prototype.create=function(){return new e},d.prototype.destroy=function(a){return a.bodyA=a.bodyB=null,this}},{\"../equations/ContactEquation\":22,\"./Pool\":56}],50:[function(a,b,c){function d(){f.apply(this,arguments)}var e=a(\"../equations/FrictionEquation\"),f=a(\"./Pool\");b.exports=d,d.prototype=new f,d.prototype.constructor=d,d.prototype.create=function(){return new e},d.prototype.destroy=function(a){return a.bodyA=a.bodyB=null,this}},{\"../equations/FrictionEquation\":24,\"./Pool\":56}],51:[function(a,b,c){function d(){f.apply(this,arguments)}var e=a(\"../world/IslandNode\"),f=a(\"./Pool\");b.exports=d,d.prototype=new f,d.prototype.constructor=d,d.prototype.create=function(){return new e},d.prototype.destroy=function(a){return a.reset(),this}},{\"../world/IslandNode\":61,\"./Pool\":56}],52:[function(a,b,c){function d(){f.apply(this,arguments)}var e=a(\"../world/Island\"),f=a(\"./Pool\");b.exports=d,d.prototype=new f,d.prototype.constructor=d,d.prototype.create=function(){return new e},d.prototype.destroy=function(a){return a.reset(),this}},{\"../world/Island\":59,\"./Pool\":56}],53:[function(a,b,c){function d(){this.overlappingShapesLastState=new e,this.overlappingShapesCurrentState=new e,this.recordPool=new f({size:16}),this.tmpDict=new e,this.tmpArray1=[]}{var e=a(\"./TupleDictionary\"),f=(a(\"./OverlapKeeperRecord\"),a(\"./OverlapKeeperRecordPool\"));a(\"./Utils\")}b.exports=d,d.prototype.tick=function(){for(var a=this.overlappingShapesLastState,b=this.overlappingShapesCurrentState,c=a.keys.length;c--;){{var d=a.keys[c],e=a.getByKey(d);b.getByKey(d)}e&&this.recordPool.release(e)}a.reset(),a.copy(b),b.reset()},d.prototype.setOverlapping=function(a,b,c,d){var e=(this.overlappingShapesLastState,this.overlappingShapesCurrentState);if(!e.get(b.id,d.id)){var f=this.recordPool.get();f.set(a,b,c,d),e.set(b.id,d.id,f)}},d.prototype.getNewOverlaps=function(a){return this.getDiff(this.overlappingShapesLastState,this.overlappingShapesCurrentState,a)},d.prototype.getEndOverlaps=function(a){return this.getDiff(this.overlappingShapesCurrentState,this.overlappingShapesLastState,a)},d.prototype.bodiesAreOverlapping=function(a,b){for(var c=this.overlappingShapesCurrentState,d=c.keys.length;d--;){var e=c.keys[d],f=c.data[e];if(f.bodyA===a&&f.bodyB===b||f.bodyA===b&&f.bodyB===a)return!0}return!1},d.prototype.getDiff=function(a,b,c){var c=c||[],d=a,e=b;c.length=0;for(var f=e.keys.length;f--;){var g=e.keys[f],h=e.data[g];if(!h)throw new Error(\"Key \"+g+\" had no data!\");var i=d.data[g];i||c.push(h)}return c},d.prototype.isNewOverlap=function(a,b){var c=0|a.id,d=0|b.id,e=this.overlappingShapesLastState,f=this.overlappingShapesCurrentState;return!e.get(c,d)&&!!f.get(c,d)},d.prototype.getNewBodyOverlaps=function(a){this.tmpArray1.length=0;var b=this.getNewOverlaps(this.tmpArray1);return this.getBodyDiff(b,a)},d.prototype.getEndBodyOverlaps=function(a){this.tmpArray1.length=0;var b=this.getEndOverlaps(this.tmpArray1);return this.getBodyDiff(b,a)},d.prototype.getBodyDiff=function(a,b){b=b||[];for(var c=this.tmpDict,d=a.length;d--;){var e=a[d];c.set(0|e.bodyA.id,0|e.bodyB.id,e)}for(d=c.keys.length;d--;){var e=c.getByKey(c.keys[d]);e&&b.push(e.bodyA,e.bodyB)}return c.reset(),b}},{\"./OverlapKeeperRecord\":54,\"./OverlapKeeperRecordPool\":55,\"./TupleDictionary\":57,\"./Utils\":58}],54:[function(a,b,c){function d(a,b,c,d){this.shapeA=b,this.shapeB=d,this.bodyA=a,this.bodyB=c}b.exports=d,d.prototype.set=function(a,b,c,e){d.call(this,a,b,c,e)}},{}],55:[function(a,b,c){function d(){f.apply(this,arguments)}var e=a(\"./OverlapKeeperRecord\"),f=a(\"./Pool\");b.exports=d,d.prototype=new f,d.prototype.constructor=d,d.prototype.create=function(){return new e},d.prototype.destroy=function(a){return a.bodyA=a.bodyB=a.shapeA=a.shapeB=null,this}},{\"./OverlapKeeperRecord\":54,\"./Pool\":56}],56:[function(a,b,c){function d(a){a=a||{},this.objects=[],void 0!==a.size&&this.resize(a.size)}b.exports=d,d.prototype.resize=function(a){for(var b=this.objects;b.length>a;)b.pop();for(;b.length<a;)b.push(this.create());return this},d.prototype.get=function(){var a=this.objects;return a.length?a.pop():this.create()},d.prototype.release=function(a){return this.destroy(a),this.objects.push(a),this}},{}],57:[function(a,b,c){function d(){this.data={},this.keys=[]}var e=a(\"./Utils\");b.exports=d,d.prototype.getKey=function(a,b){return a=0|a,b=0|b,(0|a)===(0|b)?-1:0|((0|a)>(0|b)?a<<16|65535&b:b<<16|65535&a)},d.prototype.getByKey=function(a){return a=0|a,this.data[a]},d.prototype.get=function(a,b){return this.data[this.getKey(a,b)]},d.prototype.set=function(a,b,c){if(!c)throw new Error(\"No data!\");var d=this.getKey(a,b);return this.data[d]||this.keys.push(d),this.data[d]=c,d},d.prototype.reset=function(){for(var a=this.data,b=this.keys,c=b.length;c--;)delete a[b[c]];b.length=0},d.prototype.copy=function(a){this.reset(),e.appendArray(this.keys,a.keys);for(var b=a.keys.length;b--;){var c=a.keys[b];this.data[c]=a.data[c]}}},{\"./Utils\":58}],58:[function(a,b,c){function d(){}b.exports=d,d.appendArray=function(a,b){if(b.length<15e4)a.push.apply(a,b);else for(var c=0,d=b.length;c!==d;++c)a.push(b[c])},d.splice=function(a,b,c){c=c||1;for(var d=b,e=a.length-c;e>d;d++)a[d]=a[d+c];a.length=e},\"undefined\"!=typeof P2_ARRAY_TYPE?d.ARRAY_TYPE=P2_ARRAY_TYPE:\"undefined\"!=typeof Float32Array?d.ARRAY_TYPE=Float32Array:d.ARRAY_TYPE=Array,d.extend=function(a,b){for(var c in b)a[c]=b[c]},d.defaults=function(a,b){a=a||{};for(var c in b)c in a||(a[c]=b[c]);return a}},{}],59:[function(a,b,c){function d(){this.equations=[],this.bodies=[]}var e=a(\"../objects/Body\");b.exports=d,d.prototype.reset=function(){this.equations.length=this.bodies.length=0};var f=[];d.prototype.getBodies=function(a){var b=a||[],c=this.equations;f.length=0;for(var d=0;d!==c.length;d++){var e=c[d];-1===f.indexOf(e.bodyA.id)&&(b.push(e.bodyA),f.push(e.bodyA.id)),-1===f.indexOf(e.bodyB.id)&&(b.push(e.bodyB),f.push(e.bodyB.id))}return b},d.prototype.wantsToSleep=function(){for(var a=0;a<this.bodies.length;a++){var b=this.bodies[a];if(b.type===e.DYNAMIC&&!b.wantsToSleep)return!1}return!0},d.prototype.sleep=function(){for(var a=0;a<this.bodies.length;a++){var b=this.bodies[a];b.sleep()}return!0}},{\"../objects/Body\":32}],60:[function(a,b,c){function d(a){this.nodePool=new e({size:16}),this.islandPool=new f({size:8}),this.equations=[],this.islands=[],this.nodes=[],this.queue=[]}var e=(a(\"../math/vec2\"),a(\"./Island\"),a(\"./IslandNode\"),a(\"./../utils/IslandNodePool\")),f=a(\"./../utils/IslandPool\"),g=a(\"../objects/Body\");b.exports=d,d.getUnvisitedNode=function(a){for(var b=a.length,c=0;c!==b;c++){var d=a[c];if(!d.visited&&d.body.type===g.DYNAMIC)return d}return!1},d.prototype.visit=function(a,b,c){b.push(a.body);for(var d=a.equations.length,e=0;e!==d;e++){var f=a.equations[e];-1===c.indexOf(f)&&c.push(f)}},d.prototype.bfs=function(a,b,c){var e=this.queue;for(e.length=0,e.push(a),a.visited=!0,this.visit(a,b,c);e.length;)for(var f,h=e.pop();f=d.getUnvisitedNode(h.neighbors);)f.visited=!0,this.visit(f,b,c),f.body.type===g.DYNAMIC&&e.push(f)},d.prototype.split=function(a){for(var b=a.bodies,c=this.nodes,e=this.equations;c.length;)this.nodePool.release(c.pop());for(var f=0;f!==b.length;f++){var g=this.nodePool.get();g.body=b[f],c.push(g)}for(var h=0;h!==e.length;h++){var i=e[h],f=b.indexOf(i.bodyA),j=b.indexOf(i.bodyB),k=c[f],l=c[j];k.neighbors.push(l),l.neighbors.push(k),k.equations.push(i),l.equations.push(i)}for(var m=this.islands,f=0;f<m.length;f++)this.islandPool.release(m[f]);m.length=0;for(var n;n=d.getUnvisitedNode(c);){var o=this.islandPool.get();this.bfs(n,o.bodies,o.equations),m.push(o)}return m}},{\"../math/vec2\":31,\"../objects/Body\":32,\"./../utils/IslandNodePool\":51,\"./../utils/IslandPool\":52,\"./Island\":59,\"./IslandNode\":61}],61:[function(a,b,c){function d(a){this.body=a,this.neighbors=[],this.equations=[],this.visited=!1}b.exports=d,d.prototype.reset=function(){this.equations.length=0,this.neighbors.length=0,this.visited=!1,this.body=null}},{}],62:[function(a,b,c){function d(a){m.apply(this),a=a||{},this.springs=[],this.bodies=[],this.disabledBodyCollisionPairs=[],this.solver=a.solver||new e,this.narrowphase=new r(this),this.islandManager=new u,this.gravity=g.fromValues(0,-9.78),a.gravity&&g.copy(this.gravity,a.gravity),this.frictionGravity=g.length(this.gravity)||10,this.useWorldGravityAsFrictionGravity=!0,this.useFrictionGravityOnZeroGravity=!0,this.broadphase=a.broadphase||new q,this.broadphase.setWorld(this),this.constraints=[],this.defaultMaterial=new o,this.defaultContactMaterial=new p(this.defaultMaterial,this.defaultMaterial),this.lastTimeStep=1/60,this.applySpringForces=!0,this.applyDamping=!0,this.applyGravity=!0,this.solveConstraints=!0,this.contactMaterials=[],this.time=0,this.accumulator=0,this.stepping=!1,this.bodiesToBeRemoved=[],this.islandSplit=\"undefined\"!=typeof a.islandSplit?!!a.islandSplit:!0,this.emitImpactEvent=!0,this._constraintIdCounter=0,this._bodyIdCounter=0,this.postStepEvent={type:\"postStep\"},this.addBodyEvent={type:\"addBody\",body:null},this.removeBodyEvent={type:\"removeBody\",body:null},this.addSpringEvent={type:\"addSpring\",spring:null},this.impactEvent={type:\"impact\",bodyA:null,bodyB:null,shapeA:null,shapeB:null,contactEquation:null},this.postBroadphaseEvent={type:\"postBroadphase\",pairs:null},this.sleepMode=d.NO_SLEEPING,this.beginContactEvent={type:\"beginContact\",shapeA:null,shapeB:null,bodyA:null,bodyB:null,contactEquations:[]},this.endContactEvent={type:\"endContact\",shapeA:null,shapeB:null,bodyA:null,bodyB:null},this.preSolveEvent={type:\"preSolve\",contactEquations:null,frictionEquations:null},this.overlappingShapesLastState={keys:[]},this.overlappingShapesCurrentState={keys:[]},this.overlapKeeper=new t}{var e=a(\"../solver/GSSolver\"),f=(a(\"../solver/Solver\"),a(\"../collision/Ray\")),g=a(\"../math/vec2\"),h=a(\"../shapes/Circle\"),i=(a(\"../shapes/Rectangle\"),a(\"../shapes/Convex\")),j=(a(\"../shapes/Line\"),a(\"../shapes/Plane\")),k=a(\"../shapes/Capsule\"),l=a(\"../shapes/Particle\"),m=a(\"../events/EventEmitter\"),n=a(\"../objects/Body\"),o=(a(\"../shapes/Shape\"),a(\"../objects/LinearSpring\"),a(\"../material/Material\")),p=a(\"../material/ContactMaterial\"),q=(a(\"../constraints/DistanceConstraint\"),a(\"../constraints/Constraint\"),a(\"../constraints/LockConstraint\"),a(\"../constraints/RevoluteConstraint\"),a(\"../constraints/PrismaticConstraint\"),a(\"../constraints/GearConstraint\"),a(\"../../package.json\"),a(\"../collision/Broadphase\"),a(\"../collision/SAPBroadphase\")),r=a(\"../collision/Narrowphase\"),s=a(\"../utils/Utils\"),t=a(\"../utils/OverlapKeeper\"),u=a(\"./IslandManager\");a(\"../objects/RotationalSpring\")}b.exports=d,d.prototype=new Object(m.prototype),d.prototype.constructor=d,d.NO_SLEEPING=1,d.BODY_SLEEPING=2,d.ISLAND_SLEEPING=4,d.prototype.addConstraint=function(a){this.constraints.push(a)},d.prototype.addContactMaterial=function(a){this.contactMaterials.push(a)},d.prototype.removeContactMaterial=function(a){var b=this.contactMaterials.indexOf(a);-1!==b&&s.splice(this.contactMaterials,b,1)},d.prototype.getContactMaterial=function(a,b){for(var c=this.contactMaterials,d=0,e=c.length;d!==e;d++){var f=c[d];if(f.materialA.id===a.id&&f.materialB.id===b.id||f.materialA.id===b.id&&f.materialB.id===a.id)return f}return!1},d.prototype.removeConstraint=function(a){var b=this.constraints.indexOf(a);-1!==b&&s.splice(this.constraints,b,1)};{var v=(g.create(),g.create(),g.create(),g.create(),g.create(),g.create(),g.create()),w=g.fromValues(0,0),x=g.fromValues(0,0);g.fromValues(0,0),g.fromValues(0,0)}d.prototype.step=function(a,b,c){if(c=c||10,b=b||0,0===b)this.internalStep(a),this.time+=a;else{this.accumulator+=b;for(var d=0;this.accumulator>=a&&c>d;)this.internalStep(a),this.time+=a,this.accumulator-=a,d++;for(var e=this.accumulator%a/a,f=0;f!==this.bodies.length;f++){var h=this.bodies[f];g.lerp(h.interpolatedPosition,h.previousPosition,h.position,e),h.interpolatedAngle=h.previousAngle+e*(h.angle-h.previousAngle)}}};var y=[];d.prototype.internalStep=function(a){this.stepping=!0;var b=this.springs.length,c=this.springs,e=this.bodies,f=this.gravity,h=this.solver,i=this.bodies.length,j=this.broadphase,k=this.narrowphase,l=this.constraints,m=v,o=(g.scale,g.add),p=(g.rotate,this.islandManager);if(this.overlapKeeper.tick(),this.lastTimeStep=a,this.useWorldGravityAsFrictionGravity){var q=g.length(this.gravity);0===q&&this.useFrictionGravityOnZeroGravity||(this.frictionGravity=q)}if(this.applyGravity)for(var r=0;r!==i;r++){var t=e[r],u=t.force;t.type===n.DYNAMIC&&t.sleepState!==n.SLEEPING&&(g.scale(m,f,t.mass*t.gravityScale),o(u,u,m))}if(this.applySpringForces)for(var r=0;r!==b;r++){var w=c[r];w.applyForce()}if(this.applyDamping)for(var r=0;r!==i;r++){var t=e[r];t.type===n.DYNAMIC&&t.applyDamping(a)}for(var x=j.getCollisionPairs(this),z=this.disabledBodyCollisionPairs,r=z.length-2;r>=0;r-=2)for(var A=x.length-2;A>=0;A-=2)(z[r]===x[A]&&z[r+1]===x[A+1]||z[r+1]===x[A]&&z[r]===x[A+1])&&x.splice(A,2);var B=l.length;for(r=0;r!==B;r++){var C=l[r];if(!C.collideConnected)for(var A=x.length-2;A>=0;A-=2)(C.bodyA===x[A]&&C.bodyB===x[A+1]||C.bodyB===x[A]&&C.bodyA===x[A+1])&&x.splice(A,2)}this.postBroadphaseEvent.pairs=x,this.emit(this.postBroadphaseEvent),k.reset(this);for(var r=0,D=x.length;r!==D;r+=2)for(var E=x[r],F=x[r+1],G=0,H=E.shapes.length;G!==H;G++)for(var I=E.shapes[G],J=E.shapeOffsets[G],K=E.shapeAngles[G],L=0,M=F.shapes.length;L!==M;L++){var N=F.shapes[L],O=F.shapeOffsets[L],P=F.shapeAngles[L],Q=this.defaultContactMaterial;if(I.material&&N.material){var R=this.getContactMaterial(I.material,N.material);R&&(Q=R)}this.runNarrowphase(k,E,I,J,K,F,N,O,P,Q,this.frictionGravity)}for(var r=0;r!==i;r++){var S=e[r];S._wakeUpAfterNarrowphase&&(S.wakeUp(),S._wakeUpAfterNarrowphase=!1)}if(this.has(\"endContact\")){this.overlapKeeper.getEndOverlaps(y);for(var T=this.endContactEvent,L=y.length;L--;){var U=y[L];T.shapeA=U.shapeA,T.shapeB=U.shapeB,T.bodyA=U.bodyA,T.bodyB=U.bodyB,this.emit(T)}y.length=0}var V=this.preSolveEvent;V.contactEquations=k.contactEquations,V.frictionEquations=k.frictionEquations,this.emit(V);var B=l.length;for(r=0;r!==B;r++)l[r].update();if(k.contactEquations.length||k.frictionEquations.length||l.length)if(this.islandSplit){for(p.equations.length=0,s.appendArray(p.equations,k.contactEquations),s.appendArray(p.equations,k.frictionEquations),r=0;r!==B;r++)s.appendArray(p.equations,l[r].equations);p.split(this);for(var r=0;r!==p.islands.length;r++){var W=p.islands[r];W.equations.length&&h.solveIsland(a,W)}}else{for(h.addEquations(k.contactEquations),h.addEquations(k.frictionEquations),r=0;r!==B;r++)h.addEquations(l[r].equations);this.solveConstraints&&h.solve(a,this),h.removeAllEquations()}for(var r=0;r!==i;r++){var S=e[r];S.integrate(a)}for(var r=0;r!==i;r++)e[r].setZeroForce();if(this.emitImpactEvent&&this.has(\"impact\"))for(var X=this.impactEvent,r=0;r!==k.contactEquations.length;r++){var Y=k.contactEquations[r];Y.firstImpact&&(X.bodyA=Y.bodyA,X.bodyB=Y.bodyB,X.shapeA=Y.shapeA,X.shapeB=Y.shapeB,X.contactEquation=Y,this.emit(X))}if(this.sleepMode===d.BODY_SLEEPING)for(r=0;r!==i;r++)e[r].sleepTick(this.time,!1,a);else if(this.sleepMode===d.ISLAND_SLEEPING&&this.islandSplit){for(r=0;r!==i;r++)e[r].sleepTick(this.time,!0,a);for(var r=0;r<this.islandManager.islands.length;r++){var W=this.islandManager.islands[r];W.wantsToSleep()&&W.sleep()}}this.stepping=!1;for(var Z=this.bodiesToBeRemoved,r=0;r!==Z.length;r++)this.removeBody(Z[r]);Z.length=0,this.emit(this.postStepEvent)},d.prototype.runNarrowphase=function(a,b,c,d,e,f,h,i,j,k,l){if(0!==(c.collisionGroup&h.collisionMask)&&0!==(h.collisionGroup&c.collisionMask)){g.rotate(w,d,b.angle),g.rotate(x,i,f.angle),g.add(w,w,b.position),g.add(x,x,f.position);var m=e+b.angle,o=j+f.angle;a.enableFriction=k.friction>0,a.frictionCoefficient=k.friction;var p;p=b.type===n.STATIC||b.type===n.KINEMATIC?f.mass:f.type===n.STATIC||f.type===n.KINEMATIC?b.mass:b.mass*f.mass/(b.mass+f.mass),a.slipForce=k.friction*l*p,a.restitution=k.restitution,a.surfaceVelocity=k.surfaceVelocity,a.frictionStiffness=k.frictionStiffness,a.frictionRelaxation=k.frictionRelaxation,a.stiffness=k.stiffness,a.relaxation=k.relaxation,a.contactSkinSize=k.contactSkinSize,a.enabledEquations=b.collisionResponse&&f.collisionResponse&&c.collisionResponse&&h.collisionResponse;var q=a[c.type|h.type],r=0;if(q){var s=c.sensor||h.sensor,t=a.frictionEquations.length;r=c.type<h.type?q.call(a,b,c,w,m,f,h,x,o,s):q.call(a,f,h,x,o,b,c,w,m,s);var u=a.frictionEquations.length-t;if(r){if(b.allowSleep&&b.type===n.DYNAMIC&&b.sleepState===n.SLEEPING&&f.sleepState===n.AWAKE&&f.type!==n.STATIC){var v=g.squaredLength(f.velocity)+Math.pow(f.angularVelocity,2),y=Math.pow(f.sleepSpeedLimit,2);v>=2*y&&(b._wakeUpAfterNarrowphase=!0)}if(f.allowSleep&&f.type===n.DYNAMIC&&f.sleepState===n.SLEEPING&&b.sleepState===n.AWAKE&&b.type!==n.STATIC){var z=g.squaredLength(b.velocity)+Math.pow(b.angularVelocity,2),A=Math.pow(b.sleepSpeedLimit,2);z>=2*A&&(f._wakeUpAfterNarrowphase=!0)}if(this.overlapKeeper.setOverlapping(b,c,f,h),this.has(\"beginContact\")&&this.overlapKeeper.isNewOverlap(c,h)){var B=this.beginContactEvent;if(B.shapeA=c,B.shapeB=h,B.bodyA=b,B.bodyB=f,B.contactEquations.length=0,\"number\"==typeof r)for(var C=a.contactEquations.length-r;C<a.contactEquations.length;C++)B.contactEquations.push(a.contactEquations[C]);this.emit(B)}if(\"number\"==typeof r&&u>1)for(var C=a.frictionEquations.length-u;C<a.frictionEquations.length;C++){var D=a.frictionEquations[C];D.setSlipForce(D.getSlipForce()/u)}}}}},d.prototype.addSpring=function(a){this.springs.push(a),this.addSpringEvent.spring=a,this.emit(this.addSpringEvent)},d.prototype.removeSpring=function(a){var b=this.springs.indexOf(a);-1!==b&&s.splice(this.springs,b,1)},d.prototype.addBody=function(a){-1===this.bodies.indexOf(a)&&(this.bodies.push(a),a.world=this,this.addBodyEvent.body=a,this.emit(this.addBodyEvent))},d.prototype.removeBody=function(a){if(this.stepping)this.bodiesToBeRemoved.push(a);else{a.world=null;var b=this.bodies.indexOf(a);-1!==b&&(s.splice(this.bodies,b,1),this.removeBodyEvent.body=a,a.resetConstraintVelocity(),this.emit(this.removeBodyEvent))}},d.prototype.getBodyById=function(a){for(var b=this.bodies,c=0;c<b.length;c++){var d=b[c];if(d.id===a)return d}return!1},d.prototype.disableBodyCollision=function(a,b){this.disabledBodyCollisionPairs.push(a,b)},d.prototype.enableBodyCollision=function(a,b){for(var c=this.disabledBodyCollisionPairs,d=0;d<c.length;d+=2)if(c[d]===a&&c[d+1]===b||c[d+1]===a&&c[d]===b)return void c.splice(d,2)},d.prototype.clear=function(){this.time=0,this.solver&&this.solver.equations.length&&this.solver.removeAllEquations();for(var a=this.constraints,b=a.length-1;b>=0;b--)this.removeConstraint(a[b]);for(var c=this.bodies,b=c.length-1;b>=0;b--)this.removeBody(c[b]);for(var e=this.springs,b=e.length-1;b>=0;b--)this.removeSpring(e[b]);for(var f=this.contactMaterials,b=f.length-1;b>=0;b--)this.removeContactMaterial(f[b]);d.apply(this)};var z=g.create(),A=g.fromValues(0,0),B=g.fromValues(0,0);d.prototype.hitTest=function(a,b,c){c=c||0;var d=new n({position:a}),e=new l,f=a,m=0,o=z,p=A,q=B;d.addShape(e);for(var r=this.narrowphase,s=[],t=0,u=b.length;t!==u;t++)for(var v=b[t],w=0,x=v.shapes.length;w!==x;w++){var y=v.shapes[w],C=v.shapeOffsets[w]||p,D=v.shapeAngles[w]||0;g.rotate(o,C,v.angle),g.add(o,o,v.position);var E=D+v.angle;(y instanceof h&&r.circleParticle(v,y,o,E,d,e,f,m,!0)||y instanceof i&&r.particleConvex(d,e,f,m,v,y,o,E,!0)||y instanceof j&&r.particlePlane(d,e,f,m,v,y,o,E,!0)||y instanceof k&&r.particleCapsule(d,e,f,m,v,y,o,E,!0)||y instanceof l&&g.squaredLength(g.sub(q,o,a))<c*c)&&s.push(v)}return s},d.prototype.setGlobalEquationParameters=function(a){a=a||{};for(var b=0;b!==this.constraints.length;b++)for(var c=this.constraints[b],d=0;d!==c.equations.length;d++){var e=c.equations[d];\"undefined\"!=typeof a.stiffness&&(e.stiffness=a.stiffness),\"undefined\"!=typeof a.relaxation&&(e.relaxation=a.relaxation),e.needsUpdate=!0}for(var b=0;b!==this.contactMaterials.length;b++){var c=this.contactMaterials[b];\"undefined\"!=typeof a.stiffness&&(c.stiffness=a.stiffness,c.frictionStiffness=a.stiffness),\"undefined\"!=typeof a.relaxation&&(c.relaxation=a.relaxation,c.frictionRelaxation=a.relaxation)}var c=this.defaultContactMaterial;\"undefined\"!=typeof a.stiffness&&(c.stiffness=a.stiffness,c.frictionStiffness=a.stiffness),\"undefined\"!=typeof a.relaxation&&(c.relaxation=a.relaxation,c.frictionRelaxation=a.relaxation)},d.prototype.setGlobalStiffness=function(a){this.setGlobalEquationParameters({stiffness:a})},d.prototype.setGlobalRelaxation=function(a){this.setGlobalEquationParameters({relaxation:a})};var C=new f;d.prototype.raycastAll=function(a,b,c,d){return c.mode=f.ALL,c.from=a,c.to=b,c.callback=d,C.intersectWorld(this,c)},d.prototype.raycastAny=function(a,b,c,d){return c.mode=f.ANY,c.from=a,c.to=b,c.result=d,C.intersectWorld(this,c)},d.prototype.raycastClosest=function(a,b,c,d){return c.mode=f.CLOSEST,c.from=a,c.to=b,c.result=d,C.intersectWorld(this,c)}},{\"../../package.json\":6,\"../collision/Broadphase\":8,\"../collision/Narrowphase\":11,\"../collision/Ray\":12,\"../collision/SAPBroadphase\":14,\"../constraints/Constraint\":15,\"../constraints/DistanceConstraint\":16,\"../constraints/GearConstraint\":17,\"../constraints/LockConstraint\":18,\"../constraints/PrismaticConstraint\":19,\"../constraints/RevoluteConstraint\":20,\"../events/EventEmitter\":27,\"../material/ContactMaterial\":28,\"../material/Material\":29,\"../math/vec2\":31,\"../objects/Body\":32,\"../objects/LinearSpring\":33,\"../objects/RotationalSpring\":34,\"../shapes/Capsule\":38,\"../shapes/Circle\":39,\"../shapes/Convex\":40,\"../shapes/Line\":42,\"../shapes/Particle\":43,\"../shapes/Plane\":44,\"../shapes/Rectangle\":45,\"../shapes/Shape\":46,\"../solver/GSSolver\":47,\"../solver/Solver\":48,\"../utils/OverlapKeeper\":53,\"../utils/Utils\":58,\"./IslandManager\":60}]},{},[37])(37)});",
    "created": "2015-06-22T19:30:03.897Z",
    "dataModelVersion": 2,
    "deleted": false,
    "dependencies": {},
    "id": "7023e9a8927b49dcaf9342347393eebe.script",
    "license": "CC0",
    "modified": "2015-06-22T19:30:12.072655+00:00",
    "name": "p2.min.js"
  },
  "726f3a88e8f445bc829cefec793a40dd.entity": {
    "components": {
      "meshData": {
        "shape": "Quad"
      },
      "meshRenderer": {
        "castShadows": true,
        "cullMode": "Dynamic",
        "materials": {
          "a7cb6adbf35a4eb0a9be19bd1c43d358.material": {
            "materialRef": "a7cb6adbf35a4eb0a9be19bd1c43d358.material",
            "sortValue": 0
          }
        },
        "receiveShadows": true,
        "reflectable": true
      },
      "script": {
        "scripts": {
          "b364119db80c494fae30921e39747651.scriptinstance": {
            "name": "Custom script",
            "options": {
              "enabled": true,
              "gotoGameState": "hint",
              "hoverCursor": "pointer",
              "hoverScale": [
                1,
                1,
                1
              ],
              "hoverScaleTime": 100,
              "hoverTexture": {},
              "isLevelButton": true
            },
            "scriptRef": "15cd9a6da347432bba16bca6ab3361e5.script",
            "sortValue": 0
          }
        }
      },
      "transform": {
        "children": {
          "3fe420746a554177b322d417db10a99e.entity": {
            "entityRef": "3fe420746a554177b322d417db10a99e.entity",
            "sortValue": 0
          }
        },
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          0.18290665745735168,
          0.1840209811925888,
          0.3852245509624481
        ],
        "translation": [
          -0.004024684429168701,
          -0.2716450095176697,
          0.39484453201293945
        ]
      }
    },
    "created": "2015-07-03T10:58:47.619Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "726f3a88e8f445bc829cefec793a40dd.entity",
    "license": "CC0",
    "modified": "2015-07-03T10:59:15.809169+00:00",
    "name": "Level 5",
    "static": false,
    "tags": {}
  },
  "7670c39aeab94f849ed42d8407283cac.script": {
    "body": "'use strict';\n\nvar setup = function(args, ctx, goo) {\n\tctx.domListeners = {\n\t\tresize: function(){\n\t\t\tctx.worldData.renderDirty += 10;\n\t\t}\n\t};\n\tfor(var key in ctx.domListeners){\n\t\twindow.addEventListener(key, ctx.domListeners[key]);\n\t}\n};\n\nvar cleanup = function(args, ctx, goo) {\n\tfor(var key in ctx.domListeners){\n\t\twindow.removeEventListener(key, ctx.domListeners[key]);\n\t}\n};\n\nvar update = function(args, ctx, goo) {\n\tvar currentResult = ctx.viewportWidth < ctx.viewportHeight;\n\tif(ctx.lastResult !== currentResult){\n\t\tif(currentResult){\n\t\t\tctx.entity.show();\n\t\t} else {\n\t\t\tctx.entity.hide();\n\t\t}\n\t\tctx.worldData.renderDirty += 10;\n\t\tctx.lastResult = currentResult;\n\t}\n};\n\nvar parameters = [];",
    "created": "2015-06-26T08:17:51.182Z",
    "dataModelVersion": 2,
    "deleted": false,
    "dependencies": {},
    "id": "7670c39aeab94f849ed42d8407283cac.script",
    "license": "CC0",
    "modified": "2015-06-26T12:36:51.934156+00:00",
    "name": "Show entity if portrait"
  },
  "7dc8afa865044fdf85269784d5193580.machine": {
    "created": "2015-07-03T11:19:39.191Z",
    "dataModelVersion": 2,
    "deleted": false,
    "id": "7dc8afa865044fdf85269784d5193580.machine",
    "initialState": "c9bb117a00ec45efb7c6d5ca61ebb65b.state",
    "license": "CC0",
    "modified": "2015-07-03T11:29:29.479643+00:00",
    "name": "Behavior",
    "states": {
      "7939ff41e9764ce38c031ca6e97e02d9.state": {
        "actions": {
          "6068ec64e4c646139e02dd33ec8b234b.action": {
            "id": "6068ec64e4c646139e02dd33ec8b234b.action",
            "name": "Sound Fade In",
            "options": {
              "onSoundEnd": false,
              "sound": "f27dac5506c042a28d9f42f218b4ee2e.sound",
              "time": "1000",
              "transitions": {
                "complete": "331d3c08a54d48cabdafa59926c28161.transition"
              }
            },
            "sortValue": 0,
            "type": "Sound Fade In"
          }
        },
        "id": "7939ff41e9764ce38c031ca6e97e02d9.state",
        "name": "State 1",
        "sortValue": 1,
        "transitions": {
          "331d3c08a54d48cabdafa59926c28161.transition": {
            "id": "331d3c08a54d48cabdafa59926c28161.transition",
            "name": "On Completion",
            "sortValue": 0
          }
        }
      },
      "c9bb117a00ec45efb7c6d5ca61ebb65b.state": {
        "actions": {
          "220abe08f19e49519f9c4112cfcc4bd3.action": {
            "id": "220abe08f19e49519f9c4112cfcc4bd3.action",
            "name": "Listen",
            "options": {
              "channel": "sound.unmute",
              "transitions": {
                "transition": "f5d7115d56e94e16b24126d7454dc556.transition"
              }
            },
            "sortValue": 0,
            "type": "Transition on Message"
          }
        },
        "id": "c9bb117a00ec45efb7c6d5ca61ebb65b.state",
        "name": "State",
        "sortValue": 0,
        "transitions": {
          "f5d7115d56e94e16b24126d7454dc556.transition": {
            "id": "f5d7115d56e94e16b24126d7454dc556.transition",
            "name": "To",
            "sortValue": 0,
            "targetState": "7939ff41e9764ce38c031ca6e97e02d9.state"
          }
        }
      }
    }
  },
  "7fcf03f06ac248058a6cd5d2e7abfb83.script": {
    "body": "'use strict';\n\nvar setup = function(args, ctx, goo) {\n\tctx.worldData.level = args.levelOffset;\n\tctx.worldData.gamestate = 'intro';\n\t\n};\n\nvar cleanup = function(args, ctx, goo) {\n\n};\n\nvar update = function(args, ctx, goo) {\n\tif(ctx.worldData.gamestate !== 'editing' && ((ctx.worldData.onGoal && !ctx.worldData.dragging && ctx.worldData.gamestate === 'playing'))){\n\t\t\n\t\tctx.worldData.gamestate = 'hint';\n\t\tif(ctx.worldData.level === ctx.worldData.levels.length)\n\t\t\tctx.worldData.gamestate = 'finish'; \n\t\tctx.worldData.level++;\n\t}\n\t\n\tif(ctx.lastState !== ctx.worldData.gamestate){\n\t\tif(ctx.worldData.gamestate === 'hint'){\n\t\t\tsetTimeout(function(){\n\t\t\t\tctx.worldData.gamestate = 'playing';\n\t\t\t}, 3000);\n\t\t}\n\t\tctx.lastState = ctx.worldData.gamestate;\n\t}\n};\n\nvar parameters = [{\n\tkey: 'levelOffset',\n\ttype: 'int',\n\t'default': 0\n}, {\n\tkey: 'hideIfVisible',\n\ttype: 'entity'\n}];",
    "created": "2015-06-25T20:29:27.787Z",
    "dataModelVersion": 2,
    "deleted": false,
    "dependencies": {},
    "id": "7fcf03f06ac248058a6cd5d2e7abfb83.script",
    "license": "CC0",
    "modified": "2015-07-03T12:09:36.897706+00:00",
    "name": "Hints Overlay"
  },
  "81fcab75bbe646c8bef85e5deaeeffe6.material": {
    "blendState": {
      "blendDst": "OneMinusSrcAlphaFactor",
      "blendEquation": "AddEquation",
      "blendSrc": "SrcAlphaFactor",
      "blending": "TransparencyBlending"
    },
    "created": "2015-06-25T20:02:42.422921+00:00",
    "cullState": {
      "cullFace": "Back",
      "enabled": true,
      "frontFace": "CCW"
    },
    "dataModelVersion": 2,
    "deleted": false,
    "depthState": {
      "enabled": true,
      "write": true
    },
    "dualTransparency": false,
    "flat": false,
    "id": "81fcab75bbe646c8bef85e5deaeeffe6.material",
    "license": "CC0",
    "modified": "2015-07-03T09:43:29.473627+00:00",
    "name": "Refractor Material",
    "renderQueue": -1,
    "shaderRef": "GOO_ENGINE_SHADERS/uber",
    "texturesMapping": {},
    "uniforms": {
      "discardThreshold": {
        "enabled": true,
        "value": 0.1
      },
      "etaRatio": {
        "enabled": true,
        "value": -0.5
      },
      "fresnel": {
        "enabled": true,
        "value": 0
      },
      "materialAmbient": {
        "enabled": true,
        "value": [
          0.5541666666666667,
          0.5541666666666667,
          0.5541666666666667,
          1
        ]
      },
      "materialDiffuse": {
        "enabled": true,
        "value": [
          0,
          0,
          0,
          1
        ]
      },
      "materialEmissive": {
        "enabled": true,
        "value": [
          0,
          0,
          0,
          1
        ]
      },
      "materialSpecular": {
        "enabled": true,
        "value": [
          0,
          0,
          0,
          1
        ]
      },
      "materialSpecularPower": {
        "enabled": true,
        "value": 64
      },
      "normalMultiplier": {
        "enabled": true,
        "value": 1
      },
      "opacity": {
        "enabled": true,
        "value": 0.6
      },
      "reflectivity": {
        "enabled": true,
        "value": 0
      },
      "refractivity": {
        "enabled": false,
        "value": 0
      },
      "vertexColorAmount": {
        "enabled": true,
        "value": 1
      },
      "wrapSettings": {
        "enabled": true,
        "value": [
          0,
          0
        ]
      }
    },
    "wireframe": false
  },
  "875c9d3f200a423c8ce2ff333317080e.entity": {
    "components": {
      "html": {
        "imageRefs": {},
        "innerHtml": "<p style=\"color: white; font-size: 10vh; padding: 4px; margin: 0;\">\n\tREFRACT\n</p>",
        "useTransformComponent": true
      },
      "script": {
        "scripts": {}
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          0,
          0.21197062730789185,
          0
        ]
      }
    },
    "created": "2015-07-02T19:39:23.586Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "875c9d3f200a423c8ce2ff333317080e.entity",
    "license": "CC0",
    "modified": "2015-07-03T13:12:37.007711+00:00",
    "name": "Refract title",
    "static": false,
    "tags": {}
  },
  "8a1b9628171d449d8e03393f24b1b9db.script": {
    "body": "'use strict';\n\nvar setup = function(args, ctx, goo) {\n\tctx.listeners = {\n\t\ttouchstart: function(){\n\t\t\tgoo.GameUtils.requestFullScreen();\n\t\t\tctx.worldData.renderDirty += 60;\n\t\t}\n\t};\n\tfor(var key in ctx.listeners){\n\t\tctx.domElement.addEventListener(key, ctx.listeners[key]);\n\t}\n};\n\t\nvar cleanup = function(args, ctx, goo) {\n\tfor(var key in ctx.listeners){\n\t\tctx.domElement.removeEventListener(key, ctx.listeners[key]);\n\t}\n};\n\nvar parameters = [];",
    "created": "2015-06-26T08:21:50.458Z",
    "dataModelVersion": 2,
    "deleted": false,
    "dependencies": {},
    "id": "8a1b9628171d449d8e03393f24b1b9db.script",
    "license": "CC0",
    "modified": "2015-06-26T13:01:55.799765+00:00",
    "name": "Fullscreen"
  },
  "8a7999c1d9df4079a966b3c194a244ef.script": {
    "body": "'use strict';\n\nvar setup = function(args, ctx, goo) {\n\tctx.oldHTML = ctx.entity.htmlComponent.domElement.innerHTML;\n\t\n\tctx.descriptions = [\n\t\t'The levels are randomly generated.',\n\t\t\n\t\t'If you can\\'t reach the goal, you\\'re pretty much screwed. In that case, reload the page.',\n\t\t\n\t\t'Overlapping shapes can help you refract in new ways.',\n\t\n\t\t'The refraction is computed using <a href=\"https://en.wikipedia.org/wiki/Snell\\'s_law\">Snells Law</a>.',\n\t\t\n\t\t'This game was made with <a href=\"http://goocreate.com\">Goo Create</a>.',\n\t\t\n\t\t'The backgrounds are randomly generated using <a href=\"https://github.com/mrdoob/texgen.js/\">texgen.js</a>',\n\t\t\n\t\t'Are you still playing, really?',\n\t\t\n\t\t'You probably wish there\\'s an end of this game but there isn\\'t. I\\'m very sorry.',\n\t\t\n\t\t'I\\'m out of these texts now. I\\'m going to repeat them from the beginning.'\n\t];\n};\n\nvar cleanup = function(args, ctx, goo) {\n\tctx.entity.htmlComponent.domElement.innerHTML = ctx.oldHTML;\n};\n\nvar update = function(args, ctx, goo) {\n\tif(ctx.level !== ctx.worldData.level){\n\t\tvar levelDescription = ctx.worldData.levels[ctx.worldData.level - 1] && ctx.worldData.levels[ctx.worldData.level - 1].hint;\n\t\tif(!levelDescription)\n\t\t\tlevelDescription = ctx.descriptions[(ctx.worldData.level - 1 - ctx.worldData.levels.length) % ctx.descriptions.length];\n\t\tctx.entity.htmlComponent.domElement.innerHTML = ctx.oldHTML.replace('placeholder', levelDescription);\n\t\tctx.level = ctx.worldData.level;\n\t}\n};\n\nvar parameters = [];",
    "created": "2015-06-26T08:43:52.509Z",
    "dataModelVersion": 2,
    "deleted": false,
    "dependencies": {},
    "id": "8a7999c1d9df4079a966b3c194a244ef.script",
    "license": "CC0",
    "modified": "2015-07-03T09:26:37.335312+00:00",
    "name": "Hint text setter"
  },
  "8db7f8fc2d4d413db9d84e8e9b6c9cd6.script": {
    "body": "'use strict';\n\nvar setup = function(args, ctx, goo) {\n\tvar MeshData = goo.MeshData;\n\tvar Shader = goo.Shader;\n\t\n\tctx.oldMat = ctx.entity.meshRendererComponent.materials[0];\n\tvar uniforms = ctx.oldMat.uniforms;\n\t\n\tvar shaderDef = {\n\t\tattributes : {\n\t\t\tvertexPosition : MeshData.POSITION\n\t\t},\n\t\tuniforms : {\n\t\t\tviewProjectionMatrix : Shader.VIEW_PROJECTION_MATRIX,\n\t\t\tworldMatrix : Shader.WORLD_MATRIX,\n\t\t\tcolor : args.color\n\t\t},\n\t\tvshader : [\n\t\t'attribute vec3 vertexPosition;',\n\t\t'uniform mat4 viewProjectionMatrix;',\n\t\t'uniform mat4 worldMatrix;',\n\t\t'void main(void) {',\n\t\t\t'gl_Position = viewProjectionMatrix * worldMatrix * vec4(vertexPosition, 1.0);',\n\t\t'}'\n\t\t].join('\\n'),\n\t\tfshader : [\n\t\t'uniform vec3 color;',\n\t\t'void main(void)',\n\t\t'{',\n\t\t\t'gl_FragColor = vec4(color, 1.0);',\n\t\t'}'\n\t\t].join('\\n')\n\t};\n\t\n\tctx.entity.meshRendererComponent.materials[0] = ctx.material = new goo.Material(shaderDef);\n};\n\nvar cleanup = function(args, ctx, goo) {\n\tctx.entity.meshRendererComponent.materials[0] = ctx.oldMat;\n};\n\nvar update = function(args, ctx, goo) {\n\n};\n\nvar parameters = [{\n\tkey: 'color',\n\ttype: 'vec3',\n\tcontrol: 'color',\n\t'default': [0,0,0]\n}];",
    "created": "2015-07-03T12:13:25.441Z",
    "dataModelVersion": 2,
    "deleted": false,
    "dependencies": {},
    "id": "8db7f8fc2d4d413db9d84e8e9b6c9cd6.script",
    "license": "CC0",
    "modified": "2015-07-03T12:15:13.420906+00:00",
    "name": "SimpleColored shader"
  },
  "91722558c5c54a57a0d0ca995e150e08.entity": {
    "components": {
      "meshData": {
        "shape": "Quad"
      },
      "meshRenderer": {
        "castShadows": true,
        "cullMode": "Dynamic",
        "materials": {
          "a7cb6adbf35a4eb0a9be19bd1c43d358.material": {
            "materialRef": "a7cb6adbf35a4eb0a9be19bd1c43d358.material",
            "sortValue": 0
          }
        },
        "receiveShadows": true,
        "reflectable": true
      },
      "script": {
        "scripts": {
          "6ca131964e0f4562bf04bfc98c8ab5d1.scriptinstance": {
            "name": "Custom script",
            "options": {
              "enabled": true,
              "gotoGameState": "hint",
              "hoverCursor": "pointer",
              "hoverScale": [
                1,
                1,
                1
              ],
              "hoverScaleTime": 100,
              "hoverTexture": {},
              "isLevelButton": true
            },
            "scriptRef": "15cd9a6da347432bba16bca6ab3361e5.script",
            "sortValue": 0
          }
        }
      },
      "transform": {
        "children": {
          "213f720f23ce4cf2bc95c129aab15676.entity": {
            "entityRef": "213f720f23ce4cf2bc95c129aab15676.entity",
            "sortValue": 0
          }
        },
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          0.18290665745735168,
          0.1840209811925888,
          0.3852245509624481
        ],
        "translation": [
          -0.22015976905822754,
          -0.4736246168613434,
          0.39484453201293945
        ]
      }
    },
    "created": "2015-07-03T11:48:03.642Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "91722558c5c54a57a0d0ca995e150e08.entity",
    "license": "CC0",
    "modified": "2015-07-03T12:43:22.085334+00:00",
    "name": "Level 7",
    "static": false,
    "tags": {}
  },
  "91ea7ecd562a440ab50365525db5e8c9.script": {
    "body": "'use strict';\n\nvar setup = function(args, ctx, goo) {\n\tctx.worldData.physicsWorld = new p2.World({\n\t\tgravity: [0, 0]\n\t});\n\tctx.worldData.updatePhysics = function(){\n\t\tctx.worldData.physicsWorld.step(1 / 60);\n\t};\n};\n\nvar cleanup = function(args, ctx, goo) {\n\n};\n\nvar update = function(args, ctx, goo) {\n\t\n};\n\nvar parameters = [];",
    "created": "2015-06-22T19:34:20.211Z",
    "dataModelVersion": 2,
    "deleted": false,
    "dependencies": {},
    "id": "91ea7ecd562a440ab50365525db5e8c9.script",
    "license": "CC0",
    "modified": "2015-06-29T19:07:58.612196+00:00",
    "name": "Physics"
  },
  "93100fe0e1434113bd225d9851ab6ca0.script": {
    "body": "'use strict';\n\nvar setup = function(args, ctx, goo) {\n\tvar r = Math.random;\n\tvar res = args.resolution;\n\tctx.updateBackground = function(){\n\t\tvar canvas = new TG.Texture( res, res )\n\t\t    //.add( new TG.XOR().tint( 1*r(), 0.5*r(), 0.7*r() ) )\n\t\t    .add( new TG.SinX().frequency( 0.02*r() ).tint( 0.2*r(), 0, 0 ) )\n\t\t    .mul( new TG.SinY().frequency( 0.02*r() ).tint( 0.2*r(), 0, 0 ) )\n\t\t    .add( new TG.SinX().frequency( 0.065*r() ).tint( 0.1*r(), 0.4*r(), 0.2*r() ) )\n\t\t    .add( new TG.SinY().frequency( 0.065*r() ).tint( 0.2*r(), 0.2*r(), 0.2*r() ) )\n\t\t    //.add( new TG.Noise().tint( 0.1*r(), 0.1*r(), 0.2*r() ) )\n\t\t    .toCanvas();\n\t\t    \n\t\tif(!ctx.texture){\n\t\t\tctx.texture = new goo.Texture(canvas,{},res,res);\n\t\t\tctx.material = ctx.entity.meshRendererComponent.materials[0] = new goo.Material(goo.ShaderLib.textured);\n\t\t\tctx.oldMat = ctx.entity.meshRendererComponent.materials[0];\n\t\t\tctx.material.setTexture('DIFFUSE_MAP', ctx.texture);\n\t\t}\n\t\t\n\t\tctx.texture.setImage(canvas);\n\t\tctx.texture.setNeedsUpdate();\n\t};\n};\n\nvar cleanup = function(args, ctx, goo) {\n\tctx.entity.meshRendererComponent.materials[0] = ctx.oldMat;\n};\n\nvar update = function(args, ctx, goo) {\n\tif(ctx.level !== ctx.worldData.level && !ctx.worldData.edit){\n\t\tctx.updateBackground();\n\t\tctx.level = ctx.worldData.level;\n\t} else if(ctx.worldData.edit){\n\t\tctx.entity.hide();\n\t}\n};\n\nvar parameters = [{\n\tkey: 'resolution',\n\ttype: 'int',\n\t'default': 128\n}];\n",
    "created": "2015-06-26T11:14:54.065Z",
    "dataModelVersion": 2,
    "deleted": false,
    "dependencies": {},
    "id": "93100fe0e1434113bd225d9851ab6ca0.script",
    "license": "CC0",
    "modified": "2015-06-29T19:05:34.346300+00:00",
    "name": "Background script"
  },
  "964d7c1fb7b54659806aff373807c01b.entity": {
    "components": {
      "html": {
        "imageRefs": {},
        "innerHtml": "<p style=\"font-size: 10vh\">\n\t2\n</p>",
        "useTransformComponent": true
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          0,
          0,
          0
        ]
      }
    },
    "created": "2015-07-03T08:36:52.939Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "964d7c1fb7b54659806aff373807c01b.entity",
    "license": "CC0",
    "modified": "2015-07-03T08:37:43.880131+00:00",
    "name": "Html Entity 2",
    "static": false,
    "tags": {}
  },
  "9738632b99eb407dbf68e7aa00ce460a.entity": {
    "components": {
      "meshData": {
        "shape": "Quad"
      },
      "meshRenderer": {
        "castShadows": true,
        "cullMode": "Dynamic",
        "materials": {
          "a7cb6adbf35a4eb0a9be19bd1c43d358.material": {
            "materialRef": "a7cb6adbf35a4eb0a9be19bd1c43d358.material",
            "sortValue": 0
          }
        },
        "receiveShadows": true,
        "reflectable": true
      },
      "script": {
        "scripts": {
          "11b0751c45664c10b83bc5c868f51609.scriptinstance": {
            "name": "Custom script",
            "options": {
              "enabled": true,
              "gotoGameState": "hint",
              "hoverCursor": "pointer",
              "hoverScale": [
                1,
                1,
                1
              ],
              "hoverScaleTime": 100,
              "hoverTexture": {},
              "isLevelButton": true
            },
            "scriptRef": "15cd9a6da347432bba16bca6ab3361e5.script",
            "sortValue": 0
          }
        }
      },
      "transform": {
        "children": {
          "1ab1314db05c46e1a6dd7618a6b04cca.entity": {
            "entityRef": "1ab1314db05c46e1a6dd7618a6b04cca.entity",
            "sortValue": 0
          }
        },
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          0.18290665745735168,
          0.1840209811925888,
          0.3852245509624481
        ],
        "translation": [
          0.20534682273864746,
          -0.4736246168613434,
          0.39484453201293945
        ]
      }
    },
    "created": "2015-07-03T12:57:54.359198+00:00",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "9738632b99eb407dbf68e7aa00ce460a.entity",
    "license": "CC0",
    "modified": "2015-07-03T12:57:54.359198+00:00",
    "name": "Level 9",
    "static": false,
    "tags": {}
  },
  "9d8c7bb147d14b14aedfea51b347d8fc.script": {
    "body": "'use strict';\n\nvar setup = function(args, ctx, goo) {\n\tvar uniforms = ctx.entity.meshRendererComponent.materials[0].uniforms;\n\tctx.initColor = uniforms.materialAmbient ? uniforms.materialAmbient.slice(0) : [1,0,0];\n};\n\nvar cleanup = function(args, ctx, goo) {\n\n};\n\nvar update = function(args, ctx, goo) {\n\tvar uniforms = ctx.entity.meshRendererComponent.materials[0].uniforms;\n\tif(!uniforms.materialAmbient)\n\t\tuniforms.materialAmbient = [];\n\t\t\n\tvar ambient = uniforms.materialAmbient;\n\tambient[0] = ctx.worldData.onGoal ? 0 : 1;\n\tambient[1] = ctx.worldData.onGoal ? 1 : 0;\n\tambient[2] = 0;\n};\n\nvar parameters = [];",
    "created": "2015-06-25T20:07:40.420Z",
    "dataModelVersion": 2,
    "deleted": false,
    "dependencies": {},
    "id": "9d8c7bb147d14b14aedfea51b347d8fc.script",
    "license": "CC0",
    "modified": "2015-06-29T18:59:10.084818+00:00",
    "name": "Set goal color"
  },
  "9e9d25350e064ad3ac8d42fe31f38749.entity": {
    "components": {
      "meshData": {
        "shape": "Disk",
        "shapeOptions": {
          "pointiness": 0,
          "radialSamples": 3,
          "radius": 0.5
        }
      },
      "meshRenderer": {
        "castShadows": true,
        "cullMode": "Dynamic",
        "materials": {
          "81fcab75bbe646c8bef85e5deaeeffe6.material": {
            "materialRef": "81fcab75bbe646c8bef85e5deaeeffe6.material",
            "sortValue": 0
          }
        },
        "receiveShadows": true,
        "reflectable": true
      },
      "script": {
        "scripts": {
          "efcbf5e115f3407fa34704356c61dc4c.scriptInstance": {
            "name": "Custom script",
            "options": {
              "enabled": true
            },
            "scriptRef": "b17eba7a171a4f7d98c39130e08f7b41.script",
            "sortValue": 0
          }
        }
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          0.25,
          0.25,
          0.25
        ],
        "translation": [
          0,
          0,
          0
        ]
      }
    },
    "created": "2015-06-26T07:34:49.876Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "9e9d25350e064ad3ac8d42fe31f38749.entity",
    "license": "CC0",
    "modified": "2015-07-03T10:34:09.850061+00:00",
    "name": "Refractor 4",
    "static": false,
    "tags": {
      "physics-prism": "physics-prism"
    }
  },
  "a01b5569c870490faf7c8887304b4a59.script": {
    "body": "// texgen.js - http://github.com/mrdoob/texgen.js\n'use strict';var TG=window.TG={OP:{SET:function(a,b){return b},ADD:function(a,b){return a+b},SUB:function(a,b){return a-b},MUL:function(a,b){return a*b},DIV:function(a,b){return a/b},AND:function(a,b){return a&b},XOR:function(a,b){return a^b},MIN:function(a,b){return Math.min(a,b)},MAX:function(a,b){return Math.max(a,b)}},Texture:function(a,b){this.color=new Float32Array(4);this.buffer=new TG.Buffer(a,b);this.bufferCopy=new TG.Buffer(a,b)}};\nTG.Texture.prototype={constructor:TG.Texture,set:function(a,b){void 0===b&&(b=TG.OP.SET);this.bufferCopy.copy(this.buffer);var c=[\"var x = 0, y = 0;\\nvar array = dst.array;\\nvar width = dst.width, height = dst.height;\\nfor ( var i = 0, il = array.length; i < il; i += 4 ) {\",\"\\t\"+a.getSource(),\"\\tarray[ i     ] = op( array[ i     ], color[ 0 ] * tint[ 0 ] );\\n\\tarray[ i + 1 ] = op( array[ i + 1 ], color[ 1 ] * tint[ 1 ] );\\n\\tarray[ i + 2 ] = op( array[ i + 2 ], color[ 2 ] * tint[ 2 ] );\\n\\tif ( ++x === width ) { x = 0; y ++; }\\n}\"].join(\"\\n\");\n(new Function(\"op, dst, src, color, params, tint\",c))(b,this.buffer,this.bufferCopy,this.color,a.getParams(),a.getTint());return this},add:function(a){return this.set(a,TG.OP.ADD)},sub:function(a){return this.set(a,TG.OP.SUB)},mul:function(a){return this.set(a,TG.OP.MUL)},div:function(a){return this.set(a,TG.OP.DIV)},and:function(a){return this.set(a,TG.OP.AND)},xor:function(a){return this.set(a,TG.OP.XOR)},min:function(a){return this.set(a,TG.OP.MIN)},max:function(a){return this.set(a,TG.OP.MAX)},\ntoImageData:function(a){var b=this.buffer,c=b.array;a=a.createImageData(b.width,b.height);for(var b=a.data,d=0,e=c.length;d<e;d+=4)b[d]=255*c[d],b[d+1]=255*c[d+1],b[d+2]=255*c[d+2],b[d+3]=255;return a},toCanvas:function(){var a=document.createElement(\"canvas\");a.width=this.buffer.width;a.height=this.buffer.height;var b=a.getContext(\"2d\"),c=this.toImageData(b);b.putImageData(c,0,0);return a}};\nTG.Program=function(a){var b=new Float32Array([1,1,1]);a.tint=function(a,d,e){b[0]=a;b[1]=d;b[2]=e;return this};a.getTint=function(){return b};return a};TG.Number=function(){return new TG.Program({getParams:function(){},getSource:function(){return\"color[ 0 ] = 1;\\ncolor[ 1 ] = 1;\\ncolor[ 2 ] = 1;\"}})};\nTG.SinX=function(){var a={frequency:1,offset:0};return new TG.Program({frequency:function(b){a.frequency=b*Math.PI;return this},offset:function(b){a.offset=b;return this},getParams:function(){return a},getSource:function(){return\"var value = Math.sin( ( x + params.offset ) * params.frequency );\\ncolor[ 0 ] = value;\\ncolor[ 1 ] = value;\\ncolor[ 2 ] = value;\"}})};\nTG.SinY=function(){var a={frequency:1,offset:0};return new TG.Program({frequency:function(b){a.frequency=b*Math.PI;return this},offset:function(b){a.offset=b;return this},getParams:function(){return a},getSource:function(){return\"var value = Math.sin( ( y + params.offset ) * params.frequency );\\ncolor[ 0 ] = value;\\ncolor[ 1 ] = value;\\ncolor[ 2 ] = value;\"}})};TG.OR=function(){return new TG.Program({getParams:function(){},getSource:function(){return\"var value = ( x | y ) / width;\\ncolor[ 0 ] = value;\\ncolor[ 1 ] = value;\\ncolor[ 2 ] = value;\"}})};\nTG.XOR=function(){return new TG.Program({getParams:function(){},getSource:function(){return\"var value = ( x ^ y ) / width;\\ncolor[ 0 ] = value;\\ncolor[ 1 ] = value;\\ncolor[ 2 ] = value;\"}})};TG.Noise=function(){return new TG.Program({getParams:function(){},getSource:function(){return\"var value = Math.random();\\ncolor[ 0 ] = value;\\ncolor[ 1 ] = value;\\ncolor[ 2 ] = value;\"}})};\nTG.CheckerBoard=function(){var a={size:[32,32],offset:[0,0],rowShift:0};return new TG.Program({size:function(b,c){a.size=[b,c];return this},offset:function(b,c){a.offset=[b,c];return this},rowShift:function(b){a.rowShift=b;return this},getParams:function(){return a},getSource:function(){return\"var value = ( ( ( y + params.offset[ 1 ] ) / params.size[ 1 ] ) & 1 ) ^ ( ( ( x + params.offset[ 0 ] + parseInt( y / params.size[ 1 ] ) * params.rowShift ) / params.size[ 0 ] ) & 1 ) ? 0 : 1\\ncolor[ 0 ] = value;\\ncolor[ 1 ] = value;\\ncolor[ 2 ] = value;\"}})};\nTG.Rect=function(){var a={position:[0,0],size:[32,32]};return new TG.Program({position:function(b,c){a.position=[b,c];return this},size:function(b,c){a.size=[b,c];return this},getParams:function(){return a},getSource:function(){return\"var value = ( x >= params.position[ 0 ] && x <= ( params.position[ 0 ] + params.size[ 0 ] ) && y <= ( params.position[ 1 ] + params.size[ 1 ] ) && y >= params.position[ 1 ] ) ? 1 : 0;\\ncolor[ 0 ] = value;\\ncolor[ 1 ] = value;\\ncolor[ 2 ] = value;\"}})};\nTG.Circle=function(){var a={position:[0,0],radius:50,delta:1};return new TG.Program({delta:function(b){a.delta=b;return this},position:function(b,c){a.position=[b,c];return this},radius:function(b){a.radius=b;return this},getParams:function(){return a},getSource:function(){return\"var dist = TG.Utils.distance( x, y, params.position[ 0 ], params.position[ 1 ] );\\nvar value = 1 - TG.Utils.smoothStep( params.radius - params.delta, params.radius, dist );\\ncolor[ 0 ] = value;\\ncolor[ 1 ] = value;\\ncolor[ 2 ] = value;\"}})};\nTG.SineDistort=function(){var a={sines:[4,4],offset:[0,0],amplitude:[16,16]};return new TG.Program({sines:function(b,c){a.sines=[b,c];return this},offset:function(b,c){a.offset=[b,c];return this},amplitude:function(b,c){a.amplitude=[b,c];return this},getParams:function(){return a},getSource:function(){return\"var s = Math.sin( params.sines[ 0 ] / 100 * y + params.offset[ 0 ] ) * params.amplitude[ 0 ] + x;\\nvar t = Math.sin( params.sines[ 1 ] / 100 * x + params.offset[ 1 ] ) * params.amplitude[ 1 ] + y;\\ncolor.set( src.getPixelBilinear( s, t ) );\"}})};\nTG.Twirl=function(){var a={strength:0,radius:120,position:[128,128]};return new TG.Program({strength:function(b){a.strength=b/100;return this},radius:function(b){a.radius=b;return this},position:function(b,c){a.position=[b,c];return this},getParams:function(){return a},getSource:function(){return\"var dist = TG.Utils.distance( x, y, params.position[ 0 ], params.position[ 1 ] );\\nif (dist < params.radius) {\\ndist = Math.pow(params.radius - dist, 2) / params.radius;\\nvar angle = 2.0 * Math.PI * (dist / (params.radius / params.strength));\\ns = (((x - params.position[ 0 ]) * Math.cos(angle)) - ((y - params.position[ 0 ]) * Math.sin(angle)) + params.position[ 0 ] + 0.5);\\nt = (((y - params.position[ 1 ]) * Math.cos(angle)) + ((x - params.position[ 1 ]) * Math.sin(angle)) + params.position[ 1 ] + 0.5);\\n} else {\\ns = x;\\nt = y;\\n}\\ncolor.set( src.getPixelBilinear( s, t ) );\"}})};\nTG.Transform=function(){var a={offset:[0,0],angle:0,scale:[1,1]};return new TG.Program({offset:function(b,c){a.offset=[b,c];return this},angle:function(b){a.angle=TG.Utils.deg2rad(b);return this},scale:function(b,c){if(0!==b&&0!==c)return a.scale=[b,c],this},getParams:function(){return a},getSource:function(){return\"var x2 = x - width / 2;\\nvar y2 = y - height / 2;\\nvar s = x2 * ( Math.cos( params.angle ) / params.scale[ 0 ] ) + y2 * -( Math.sin( params.angle ) / params.scale[ 0 ] );\\nvar t = x2 * ( Math.sin( params.angle ) / params.scale[ 1 ] ) + y2 *  ( Math.cos( params.angle ) / params.scale[ 1 ] );\\ns += params.offset[ 0 ] + width / 2;\\nt += params.offset[ 1 ] + height / 2;\\ncolor.set( src.getPixelBilinear( s, t ) );\"}})};\nTG.Pixelate=function(){var a={size:[1,1]};return new TG.Program({size:function(b,c){a.size=[b,c];return this},getParams:function(){return a},getSource:function(){return\"var s = params.size[ 0 ] * Math.floor(x/params.size[ 0 ]);\\nvar t = params.size[ 1 ] * Math.floor(y/params.size[ 1 ]);\\ncolor.set( src.getPixelNearest( s, t ) );\"}})};TG.Buffer=function(a,b){this.width=a;this.height=b;this.array=new Float32Array(a*b*4);this.color=new Float32Array(4)};\nTG.Buffer.prototype={constructor:TG.Buffer,copy:function(a){this.array.set(a.array)},getPixelNearest:function(a,b){b>=this.height&&(b-=this.height);0>b&&(b+=this.height);a>=this.width&&(a-=this.width);0>a&&(a+=this.width);var c=this.array,d=this.color,e=Math.round(b)*this.width*4+4*Math.round(a);d[0]=c[e];d[1]=c[e+1];d[2]=c[e+2];return this.color},getPixelBilinear:function(a,b){var c=Math.floor(a),d=Math.floor(b),e=c+d*this.width,f=this.array,p=this.color,m=a-c,g=b-d,n=1-m,c=1-g,d=n*c,c=m*c,n=n*g,\nm=m*g,g=4*e,k=4*(1+e),l=4*(1*this.width+e),e=4*(1+1*this.width+e),h=this.width*this.height*4;g>=h&&(g-=h);0>g&&(g+=h);k>=h&&(k-=h);0>k&&(k+=h);l>=h&&(l-=h);0>l&&(l+=h);e>=h&&(e-=h);0>e&&(e+=h);p[0]=f[g+0]*d+f[k+0]*c+f[l+0]*n+f[e+0]*m;p[1]=f[g+1]*d+f[k+1]*c+f[l+1]*n+f[e+1]*m;p[2]=f[g+2]*d+f[k+2]*c+f[l+2]*n+f[e+2]*m;p[3]=f[g+3]*d+f[k+3]*c+f[l+3]*n+f[e+3]*m;return this.color},getPixelOffset:function(a){var b=this.array,c=this.color;a=parseInt(4*a);c[0]=b[a];c[1]=b[a+1];c[2]=b[a+2];c[3]=b[a+3];return this.color}};\nTG.ColorInterpolatorMethod={STEP:0,LINEAR:1,SPLINE:2};TG.ColorInterpolator=function(){this.points=[];this.interpolation=TG.ColorInterpolator.SPLINE;this.repeat=!1;return this};\nTG.ColorInterpolator.prototype={set:function(a){this.points=a;return this},addPoint:function(a,b){this.points.push({pos:a,color:b});this.points.sort(function(a,b){return a.pos-b.pos});return this},setRepeat:function(a){this.repeat=a;return this},setInterpolation:function(a){this.interpolation=a;return this},getColorAt:function(a){1<a&&(a=this.repeat?a%1:1);for(var b=0,c=this.points;c[b+1].pos<a;)b++;var d=c[b],b=c[b+1],c=(a-d.pos)/(b.pos-d.pos);if(this.interpolation==TG.ColorInterpolatorMethod.STEP)return d.color;\nif(this.interpolation==TG.ColorInterpolatorMethod.LINEAR)return TG.Utils.mixColors(d.color,b.color,c);if(this.interpolation==TG.ColorInterpolatorMethod.SPLINE)return a=c*c,c*=a,[(2*d.color[0]-2*b.color[0])*c+(-3*d.color[0]+3*b.color[0])*a+d.color[0],(2*d.color[1]-2*b.color[1])*c+(-3*d.color[1]+3*b.color[1])*a+d.color[1],(2*d.color[2]-2*b.color[2])*c+(-3*d.color[2]+3*b.color[2])*a+d.color[2]]}};\nTG.RadialGradient=function(){var a={gradient:new TG.ColorInterpolator(TG.ColorInterpolator.LINEAR),radius:255,center:[128,128]};return new TG.Program({repeat:function(b){a.gradient.setRepeat(b);return this},radius:function(b){a.radius=b;return this},interpolation:function(b){a.gradient.setInterpolation(b);return this},center:function(b,c){a.center=[b,c];return this},getParams:function(){return a},point:function(b,c){a.gradient.addPoint(b,c);return this},getSource:function(){return\"var dist = TG.Utils.distance( x, y, params.center[ 0 ], params.center[ 1 ] );\\ncolor = params.gradient.getColorAt( dist / params.radius );\"}})};\nTG.LinearGradient=function(){var a={gradient:new TG.ColorInterpolator(TG.ColorInterpolator.LINEAR)};return new TG.Program({repeat:function(b){a.gradient.setRepeat(b);return this},interpolation:function(b){a.gradient.setInterpolation(b);return this},getParams:function(){return a},point:function(b,c){a.gradient.addPoint(b,c);return this},getSource:function(){return\"color = params.gradient.getColorAt( x / width );\"}})};\nTG.Utils={smoothStep:function(a,b,c){c=TG.Utils.clamp((c-a)/(b-a),0,1);return c*c*(3-2*c)},mixColors:function(a,b,c){return[a[0]*(1-c)+b[0]*c,a[1]*(1-c)+b[1]*c,a[2]*(1-c)+b[2]*c,a[3]*(1-c)+b[3]*c]},distance:function(a,b,c,d){a=c-a;b=d-b;return Math.sqrt(a*a+b*b)},clamp:function(a,b,c){return Math.min(Math.max(a,b),c)},deg2rad:function(a){return a*Math.PI/180}};",
    "created": "2015-06-26T13:13:29.828Z",
    "dataModelVersion": 2,
    "deleted": false,
    "dependencies": {},
    "id": "a01b5569c870490faf7c8887304b4a59.script",
    "license": "CC0",
    "modified": "2015-06-26T13:15:33.338117+00:00",
    "name": "texgen.js"
  },
  "a021079bf625499fb55405042a39fb60.script": {
    "body": "'use strict';\n\nvar setup = function(args, ctx, goo) {\n\tctx.oldHTML = ctx.entity.htmlComponent.domElement.innerHTML;\n};\n\nvar cleanup = function(args, ctx, goo) {\n\tctx.entity.htmlComponent.domElement.innerHTML = ctx.oldHTML;\n};\n\nvar update = function(args, ctx, goo) {\n\tif(ctx.level !== ctx.worldData.level){\n\t\tvar levelSymbol = ctx.worldData.level > ctx.worldData.levels.length ? 'âˆž' : ctx.worldData.level;\n\t\tctx.entity.htmlComponent.domElement.innerHTML = ctx.entity.htmlComponent.domElement.innerHTML.replace(/Level\\s\\d+/, 'Level ' + levelSymbol);\n\t\tctx.level = ctx.worldData.level;\n\t}\n};\n\nvar parameters = [];",
    "created": "2015-06-25T20:33:57.906Z",
    "dataModelVersion": 2,
    "deleted": false,
    "dependencies": {},
    "id": "a021079bf625499fb55405042a39fb60.script",
    "license": "CC0",
    "modified": "2015-07-03T11:51:42.506648+00:00",
    "name": "Level number set on HTML"
  },
  "a75105712a064b47aad9c89ae72b9207.material": {
    "blendState": {
      "blendDst": "OneMinusSrcAlphaFactor",
      "blendEquation": "AddEquation",
      "blendSrc": "SrcAlphaFactor",
      "blending": "NoBlending"
    },
    "created": "2015-07-02T20:02:05.600Z",
    "cullState": {
      "cullFace": "Back",
      "enabled": true,
      "frontFace": "CCW"
    },
    "dataModelVersion": 2,
    "deleted": false,
    "depthState": {
      "enabled": true,
      "write": true
    },
    "dualTransparency": false,
    "flat": false,
    "id": "a75105712a064b47aad9c89ae72b9207.material",
    "license": "CC0",
    "modified": "2015-07-02T20:02:45.173641+00:00",
    "name": "Material 14",
    "renderQueue": -1,
    "shaderRef": "GOO_ENGINE_SHADERS/uber",
    "texturesMapping": {},
    "uniforms": {
      "discardThreshold": {
        "enabled": true,
        "value": 0.1
      },
      "etaRatio": {
        "enabled": true,
        "value": -0.5
      },
      "fresnel": {
        "enabled": true,
        "value": 0
      },
      "materialAmbient": {
        "enabled": true,
        "value": [
          0.5942420959472656,
          0.5942420959472656,
          0.5942420959472656,
          1
        ]
      },
      "materialDiffuse": {
        "enabled": true,
        "value": [
          0.8,
          0.8,
          0.8,
          1
        ]
      },
      "materialEmissive": {
        "enabled": true,
        "value": [
          0,
          0,
          0,
          1
        ]
      },
      "materialSpecular": {
        "enabled": true,
        "value": [
          0.6,
          0.6,
          0.6,
          1
        ]
      },
      "materialSpecularPower": {
        "enabled": true,
        "value": 64
      },
      "normalMultiplier": {
        "enabled": true,
        "value": 1
      },
      "opacity": {
        "enabled": false,
        "value": 1
      },
      "reflectivity": {
        "enabled": true,
        "value": 0
      },
      "refractivity": {
        "enabled": false,
        "value": 0
      },
      "vertexColorAmount": {
        "enabled": true,
        "value": 1
      },
      "wrapSettings": {
        "enabled": true,
        "value": [
          0,
          0
        ]
      }
    },
    "wireframe": false
  },
  "a7cb6adbf35a4eb0a9be19bd1c43d358.material": {
    "blendState": {
      "blendDst": "OneMinusSrcAlphaFactor",
      "blendEquation": "AddEquation",
      "blendSrc": "SrcAlphaFactor",
      "blending": "NoBlending"
    },
    "created": "2015-07-02T20:11:59.523Z",
    "cullState": {
      "cullFace": "Back",
      "enabled": true,
      "frontFace": "CCW"
    },
    "dataModelVersion": 2,
    "deleted": false,
    "depthState": {
      "enabled": true,
      "write": true
    },
    "dualTransparency": false,
    "flat": false,
    "id": "a7cb6adbf35a4eb0a9be19bd1c43d358.material",
    "license": "CC0",
    "modified": "2015-07-02T20:12:37.146813+00:00",
    "name": "Material 15",
    "renderQueue": -1,
    "shaderRef": "GOO_ENGINE_SHADERS/uber",
    "texturesMapping": {},
    "uniforms": {
      "discardThreshold": {
        "enabled": true,
        "value": 0.1
      },
      "etaRatio": {
        "enabled": true,
        "value": -0.5
      },
      "fresnel": {
        "enabled": true,
        "value": 0
      },
      "materialAmbient": {
        "enabled": true,
        "value": [
          1,
          1,
          1,
          1
        ]
      },
      "materialDiffuse": {
        "enabled": true,
        "value": [
          0.8,
          0.8,
          0.8,
          1
        ]
      },
      "materialEmissive": {
        "enabled": true,
        "value": [
          0,
          0,
          0,
          1
        ]
      },
      "materialSpecular": {
        "enabled": true,
        "value": [
          0.6,
          0.6,
          0.6,
          1
        ]
      },
      "materialSpecularPower": {
        "enabled": true,
        "value": 64
      },
      "normalMultiplier": {
        "enabled": true,
        "value": 1
      },
      "opacity": {
        "enabled": false,
        "value": 1
      },
      "reflectivity": {
        "enabled": true,
        "value": 0
      },
      "refractivity": {
        "enabled": false,
        "value": 0
      },
      "vertexColorAmount": {
        "enabled": true,
        "value": 1
      },
      "wrapSettings": {
        "enabled": true,
        "value": [
          0,
          0
        ]
      }
    },
    "wireframe": false
  },
  "a8851b79fece45e4aafc9fc1f9a0a08d.posteffects": {
    "created": "2015-06-22T17:42:15.245805+00:00",
    "dataModelVersion": 2,
    "deleted": false,
    "id": "a8851b79fece45e4aafc9fc1f9a0a08d.posteffects",
    "license": "CC0",
    "modified": "2015-06-22T17:42:15.245805+00:00",
    "name": "Post effects",
    "posteffects": {}
  },
  "a8b1f2c1a10c46f581bf76ac6664a737.entity": {
    "components": {
      "meshData": {
        "shape": "Quad"
      },
      "meshRenderer": {
        "castShadows": true,
        "cullMode": "Dynamic",
        "materials": {
          "2c11ce481eef40fc898117046988fbfa.material": {
            "materialRef": "2c11ce481eef40fc898117046988fbfa.material",
            "sortValue": 0
          }
        },
        "receiveShadows": true,
        "reflectable": true
      },
      "script": {
        "scripts": {
          "c10dc02b5ac94d94a833ad4bb262e48b.scriptInstance": {
            "name": "Custom script",
            "options": {
              "enabled": true
            },
            "scriptRef": "9d8c7bb147d14b14aedfea51b347d8fc.script",
            "sortValue": 0
          }
        }
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          0.05,
          0.05,
          0.05
        ],
        "translation": [
          -0.09851640462875366,
          0.11461802572011948,
          2
        ]
      }
    },
    "created": "2015-06-25T19:57:32.567Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "a8b1f2c1a10c46f581bf76ac6664a737.entity",
    "license": "CC0",
    "modified": "2015-06-26T08:37:43.535159+00:00",
    "name": "Goal",
    "static": false,
    "tags": {
      "physics-rectangle": "physics-rectangle"
    }
  },
  "aac76e1a866341a8b63fd964fdac379f.material": {
    "blendState": {
      "blendDst": "OneMinusSrcAlphaFactor",
      "blendEquation": "AddEquation",
      "blendSrc": "SrcAlphaFactor",
      "blending": "NoBlending"
    },
    "created": "2015-06-25T20:03:10.643Z",
    "cullState": {
      "cullFace": "Back",
      "enabled": true,
      "frontFace": "CCW"
    },
    "dataModelVersion": 2,
    "deleted": false,
    "depthState": {
      "enabled": true,
      "write": true
    },
    "dualTransparency": false,
    "flat": false,
    "id": "aac76e1a866341a8b63fd964fdac379f.material",
    "license": "CC0",
    "modified": "2015-06-26T06:50:16.118077+00:00",
    "name": "Material 7",
    "renderQueue": -1,
    "shaderRef": "GOO_ENGINE_SHADERS/uber",
    "texturesMapping": {},
    "uniforms": {
      "discardThreshold": {
        "enabled": true,
        "value": 0.1
      },
      "etaRatio": {
        "enabled": true,
        "value": -0.5
      },
      "fresnel": {
        "enabled": true,
        "value": 0
      },
      "materialAmbient": {
        "enabled": true,
        "value": [
          1,
          1,
          1,
          1
        ]
      },
      "materialDiffuse": {
        "enabled": false,
        "value": [
          0.8,
          0.8,
          0.8,
          1
        ]
      },
      "materialEmissive": {
        "enabled": false,
        "value": [
          0,
          0,
          0,
          1
        ]
      },
      "materialSpecular": {
        "enabled": false,
        "value": [
          0,
          0,
          0,
          1
        ]
      },
      "materialSpecularPower": {
        "enabled": true,
        "value": 64
      },
      "normalMultiplier": {
        "enabled": true,
        "value": 1
      },
      "opacity": {
        "enabled": false,
        "value": 1
      },
      "reflectivity": {
        "enabled": true,
        "value": 0
      },
      "refractivity": {
        "enabled": false,
        "value": 0
      },
      "vertexColorAmount": {
        "enabled": true,
        "value": 1
      },
      "wrapSettings": {
        "enabled": true,
        "value": [
          0,
          0
        ]
      }
    },
    "wireframe": false
  },
  "adb850cdcae14b5aa37fda5faf32a6fb.script": {
    "body": "/* global p2 */\n\n'use strict';\n\nvar setup = function(args, ctx, goo) {\n\tctx.worldData.levels = [\n\t\t\n\t\t// 1 - prism\n\t\t{\n\t\t\t\"hint\": 'Place the <span style=\"color:#76b5f7\">prism</span> to guide the <span style=\"color:white\">beam</span> to the <span style=\"color:#FF8888\">goal</span>.',\n\t\t\t\"startX\":-0.17,\n\t\t\t\"startY\":-0.08,\n\t\t\t\"startAngle\":-0.94,\n\t\t\t\"shapes\":[{\"x\":0.24864870309829712,\"y\":-0.15833333134651184,\"angle\":0,\"type\":\"prism\"}],\"goalX\":0.4464215040206909,\"goalY\":0.10208762437105179},\n\t\t\n\t\t// 2 - circle\n\t\t{\"hint\":\"The circle shape can bend the beam with more precision.\",\"startX\":0.38,\"startY\":0.17,\"startAngle\":-4.2,\"shapes\":[{\"x\":0.2067568004131317,\"y\":-0.12454952299594879,\"angle\":0,\"type\":\"circle\"}],\"goalX\":-0.30053624510765076,\"goalY\":0.1809585839509964},\n\t\t\n\t\t// 3 - square\n\t\t{\"hint\":\"The square\",\"startX\":0.26,\"startY\":-0.15,\"startAngle\":0,\"shapes\":[{\"x\":-0.05067567527294159,\"y\":-0.03333333507180214,\"angle\":0.7853981212506008,\"type\":\"romb\"}],\"goalX\":-0.3032240569591522,\"goalY\":0.19620563089847565},\n\t\t\n\t\t// 4 - box\n\t\t{\"hint\":\"The box\",\"startX\":-0.3,\"startY\":-0.14,\"startAngle\":-0.78,\"shapes\":[{\"x\":0.022747762501239777,\"y\":0.5,\"angle\":0,\"type\":\"box\"}],\"goalX\":0.33333802223205566,\"goalY\":-0.13798260688781738},\n\t\t\n\t\t// 5: blocker\n\t\t{\n\t\t\"hint\": \"Blockers will not refract the beam.\",\n\t\t\"startX\": -0.43,\n\t\t\"startY\": -0.28,\n\t\t\"startAngle\": -1.58,\n\t\t\"shapes\": [\n\t\t{\n\t\t\"x\": 0.004630797542631626,\n\t\t\"y\": -0.28097623586654663,\n\t\t\"angle\": 0,\n\t\t\"type\": \"blocker\"\n\t\t},\n\t\t{\n\t\t\"x\": -0.1983729898929596,\n\t\t\"y\": -0.03316645324230194,\n\t\t\"angle\": 0.7853981212506008,\n\t\t\"type\": \"romb\"\n\t\t},\n\t\t{\n\t\t\"x\": 0.030663371086120605,\n\t\t\"y\": 0.1808510422706604,\n\t\t\"angle\": 0.7853981212506008,\n\t\t\"type\": \"romb\"\n\t\t},\n\t\t{\n\t\t\"x\": 0.3423027992248535,\n\t\t\"y\": -0.05569460988044739,\n\t\t\"angle\": 0.7853981212506008,\n\t\t\"type\": \"romb\"\n\t\t}\n\t\t],\n\t\t\"goalX\": 0.3759741485118866,\n\t\t\"goalY\": -0.27968984842300415\n\t\t},\n\t\t\n\t\t// avoid\n\t\t{\n\t\t\t\"hint\": \"You're doing great!\",\n\t\t\t\"startX\": 0.15,\n\t\t\t\"startY\": 0.13,\n\t\t\t\"startAngle\": 1.9,\n\t\t\t\"shapes\": [\n\t\t\t\t{\n\t\t\t\t\t\"x\": -0.22681766748428345,\n\t\t\t\t\t\"y\": -0.07926101237535477,\n\t\t\t\t\t\"angle\": 0,\n\t\t\t\t\t\"type\": \"blocker\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"x\": -0.21323001384735107,\n\t\t\t\t\t\"y\": 0.18414779007434845,\n\t\t\t\t\t\"angle\": 0,\n\t\t\t\t\t\"type\": \"box\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"x\": 0.06972599029541016,\n\t\t\t\t\t\"y\": -0.12693682312965393,\n\t\t\t\t\t\"angle\": 0.7853981212506008,\n\t\t\t\t\t\"type\": \"romb\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"x\": -0.2816448211669922,\n\t\t\t\t\t\"y\": -0.01609058678150177,\n\t\t\t\t\t\"angle\": 0,\n\t\t\t\t\t\"type\": \"blocker\"\n\t\t\t\t}\n\t\t\t],\n\t\t\t\"goalX\": -0.26979365944862366,\n\t\t\t\"goalY\": -0.3089972138404846\n\t\t},\n\t\t\n\t\t// 6 - cave\n\t\t{\n\t\t\t\"hint\": \"Now it's getting tricky...\",\n\t\t\t\"startX\": 0.08,\n\t\t\t\"startY\": 0.02,\n\t\t\t\"startAngle\": 1.59,\n\t\t\t\"shapes\": [\n\t\t\t\t{\n\t\t\t\t\t\"x\": 0.3704485297203064,\n\t\t\t\t\t\"y\": -0.026385245844721794,\n\t\t\t\t\t\"angle\": 0,\n\t\t\t\t\t\"type\": \"prism\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"x\": -0.33931398391723633,\n\t\t\t\t\t\"y\": -0.28496041893959045,\n\t\t\t\t\t\"angle\": 0,\n\t\t\t\t\t\"type\": \"prism\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"x\": -0.40395769476890564,\n\t\t\t\t\t\"y\": 0.1741424947977066,\n\t\t\t\t\t\"angle\": 0,\n\t\t\t\t\t\"type\": \"prism\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"x\": 0.04670186713337898,\n\t\t\t\t\t\"y\": 0.1569920778274536,\n\t\t\t\t\t\"angle\": 0,\n\t\t\t\t\t\"type\": \"blocker\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"x\": -0.056200526654720306,\n\t\t\t\t\t\"y\": 0.14643800258636475,\n\t\t\t\t\t\"angle\": 0,\n\t\t\t\t\t\"type\": \"blocker\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"x\": -0.1604221761226654,\n\t\t\t\t\t\"y\": 0.12928760051727295,\n\t\t\t\t\t\"angle\": 0,\n\t\t\t\t\t\"type\": \"blocker\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"x\": -0.2250659465789795,\n\t\t\t\t\t\"y\": 0.05277044698596001,\n\t\t\t\t\t\"angle\": 0,\n\t\t\t\t\t\"type\": \"blocker\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"x\": 0.14564643800258636,\n\t\t\t\t\t\"y\": 0.11477573215961456,\n\t\t\t\t\t\"angle\": 0,\n\t\t\t\t\t\"type\": \"blocker\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"x\": 0.17467020452022552,\n\t\t\t\t\t\"y\": 0.02242743782699108,\n\t\t\t\t\t\"angle\": 0,\n\t\t\t\t\t\"type\": \"blocker\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"x\": 0.11266492307186127,\n\t\t\t\t\t\"y\": -0.07651714980602264,\n\t\t\t\t\t\"angle\": 0,\n\t\t\t\t\t\"type\": \"blocker\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"x\": 0.053298160433769226,\n\t\t\t\t\t\"y\": -0.08839051425457001,\n\t\t\t\t\t\"angle\": 0,\n\t\t\t\t\t\"type\": \"blocker\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"x\": -0.22506596148014069,\n\t\t\t\t\t\"y\": -0.04749339073896408,\n\t\t\t\t\t\"angle\": 0,\n\t\t\t\t\t\"type\": \"blocker\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"x\": -0.22110815346240997,\n\t\t\t\t\t\"y\": -0.1543535590171814,\n\t\t\t\t\t\"angle\": 0,\n\t\t\t\t\t\"type\": \"blocker\"\n\t\t\t\t}\n\t\t\t],\n\t\t\t\"goalX\": 0.43426594138145447,\n\t\t\t\"goalY\": -0.26765942573547363\n\t\t},\n\t\t\n\t\t// 7: overlap\n\t\t{\n\t\t\t\"hint\": \"Hint: overlap the shapes.\",\n\t\t\t\"startX\": 0.25,\n\t\t\t\"startY\": 0.24,\n\t\t\t\"startAngle\": 1.57,\n\t\t\t\"shapes\": [\n\t\t\t\t{\n\t\t\t\t\t\"x\": 0.16412396728992462,\n\t\t\t\t\t\"y\": 0.14362336695194244,\n\t\t\t\t\t\"angle\": 0,\n\t\t\t\t\t\"type\": \"blocker\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"x\": 0.06758049130439758,\n\t\t\t\t\t\"y\": 0.14243146777153015,\n\t\t\t\t\t\"angle\": 0,\n\t\t\t\t\t\"type\": \"blocker\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"x\": -0.32145413756370544,\n\t\t\t\t\t\"y\": -0.18176402151584625,\n\t\t\t\t\t\"angle\": 0,\n\t\t\t\t\t\"type\": \"circle\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"x\": 0.09547082334756851,\n\t\t\t\t\t\"y\": -0.17818833887577057,\n\t\t\t\t\t\"angle\": 0,\n\t\t\t\t\t\"type\": \"box\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"x\": 0.2678188383579254,\n\t\t\t\t\t\"y\": 0.14362335205078125,\n\t\t\t\t\t\"angle\": 0,\n\t\t\t\t\t\"type\": \"blocker\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"x\": -0.031346868723630905,\n\t\t\t\t\t\"y\": 0.14243145287036896,\n\t\t\t\t\t\"angle\": 0,\n\t\t\t\t\t\"type\": \"blocker\"\n\t\t\t\t}\n\t\t\t],\n\t\t\t\"goalX\": 0.25680407881736755,\n\t\t\t\"goalY\": 0.048439811915159225\n\t\t}\n\t];\n\n\tctx.entities = [];\n\tctx.bodies = [];\n\t\n\tctx.maxPos = 0.8;\n\t\n\t// Add goal - will always be in the scene\n\tctx.worldData.goalEntity = args.goalEntity.setScale(0.05, 0.05, 0.05);\n\tvar body = ctx.worldData.goalBody = new p2.Body({\n\t\tmass: 0,\n\t\tposition: [\n\t\t\t(Math.random()-0.5)*ctx.maxPos,\n\t\t\t(Math.random()-0.5)*ctx.maxPos\n\t\t]\n\t});\n\tbody.addShape(new p2.Rectangle(0.05, 0.05));\n\tctx.worldData.physicsWorld.addBody(body);\n\t\n\tctx.worldData.startEntity = args.startEntity;\n\t\n\tctx.positionGoalBody = function(x,y){\n\t\tctx.worldData.goalBody.position.set([\n\t\t\tx !== undefined ? x : (Math.random()-0.5)*ctx.maxPos,\n\t\t\ty !== undefined ? y : (Math.random()-0.5)*ctx.maxPos\n\t\t]);\n\t};\n\t\n\tctx.positionStartBody = ctx.worldData.positionStartBody = function(x,y,angle){\n\t\targs.startEntity.setTranslation(\n\t\t\tx !== undefined ? x : (Math.random()-0.5)*ctx.maxPos,\n\t\t\ty !== undefined ? y : (Math.random()-0.5)*ctx.maxPos,\n\t\t\targs.startEntity.transformComponent.transform.translation.z\n\t\t);\n\t\targs.startEntity.setRotation(\n\t\t\t0, 0, angle !== undefined ? angle :  Math.random() * Math.PI / 2\n\t\t);\n\t};\n\t\n\tctx.refractorEntities = [];\n\tfor(var i=1, e; e = args['refractor' + i]; i++){\n\t\tctx.refractorEntities.push(e);\n\t}\n\t\n\tctx.createBodyFromEntity = function(entity, options){\n\t\tvar d = entity.transformComponent.transform.rotation.data;\n\t\tvar entityAngle = Math.PI / 2 + Math.atan2(-d[0], d[1]);\n\t\t\n\t\tvar body = new p2.Body({\n\t\t\tmass: 0,\n\t\t\ttype: options.type || p2.Body.KINEMATIC,\n\t\t\tangle: options.angle !== undefined ? options.angle : entityAngle,\n\t\t\tposition: options.position || [\n\t\t\t\t(Math.random()-0.5)*ctx.maxPos,\n\t\t\t\t(Math.random()-0.5)*ctx.maxPos\n\t\t\t]\n\t\t});\n\t\tbody.blocker = entity.hasTag('blocker');\n\t\t\n\t\tvar scale = entity.getScale();\n\t\tif(entity.hasTag('physics-circle')){\n\t\t\tbody.addShape(new p2.Circle(Math.max(scale.x, scale.y) * 0.5));\n\t\t} else if(entity.hasTag('physics-prism')){\n\t\t\tvar angle = 2 * Math.PI / 3;\n\t\t\tvar verts = [\n\t\t\t\t[0.5 * Math.cos(angle) * scale.x, 0.5 * Math.sin(angle) * scale.y],\n\t\t\t\t[0.5 * Math.cos(angle) * scale.x, -0.5 * Math.sin(angle) * scale.y],\n\t\t\t\t[0.5 * scale.x, 0]\n\t\t\t];\n\t\t\tbody.addShape(new p2.Convex(verts));\n\t\t} else {\n\t\t\tbody.addShape(new p2.Rectangle(scale.x, scale.y));\n\t\t}\n\t\treturn body;\n\t};\n\t\n\tctx.createPieces = function(){\n\t\tvar levelData = ctx.worldData.levels && ctx.worldData.levels[ctx.worldData.level - 1];\n\t\t\n\t\t// Add pieces\n\t\tif(ctx.worldData.gamestate !== 'editing'){\n\t\t\tif(levelData){\n\t\t\t\tctx.positionStartBody(levelData.startX,levelData.startY,levelData.startAngle);\n\t\t\t\tctx.positionGoalBody(levelData.goalX,levelData.goalY);\n\t\t\t\t\n\t\t\t\tlevelData.shapes.forEach(function(shape){\n\t\t\t\t\tvar idx = ['romb', 'circle', 'box', 'prism', 'blocker'].indexOf(shape.type);\n\t\t\t\t\tvar e = ctx.refractorEntities[idx];\n\t\t\t\t\tvar entity = goo.EntityUtils.clone(ctx.world, e, {}).addToWorld();\n\t\t\t\t\tentity.show();\n\t\t\t\t\tvar body = ctx.createBodyFromEntity(entity,{\n\t\t\t\t\t\tposition: [shape.x, shape.y],\n\t\t\t\t\t\tangle: shape.type === 'romb' ? Math.PI / 4 : 0\n\t\t\t\t\t});\n\t\t\t\t\tctx.worldData.physicsWorld.addBody(body);\n\t\t\t\t\tctx.entities.push(entity);\n\t\t\t\t\tctx.bodies.push(body);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// random!\n\t\t\t\tvar idx = Math.floor(Math.random() * (ctx.refractorEntities.length));\n\t\t\t\tfor(var i=0; i<3; i++){\n\t\t\t\t\tvar e = ctx.refractorEntities[(idx + i) % ctx.refractorEntities.length];\n\t\t\t\t\tvar entity = goo.EntityUtils.clone(ctx.world, e, {}).addToWorld();\n\t\t\t\t\tentity.show();\n\t\t\t\t\tvar body = ctx.createBodyFromEntity(entity,{});\n\t\t\t\t\tctx.worldData.physicsWorld.addBody(body);\n\t\t\t\t\tctx.entities.push(entity);\n\t\t\t\t\tctx.bodies.push(body);\n\t\t\t\t}\n\t\t\n\t\t\t\tctx.positionStartBody();\n\t\t\t\tctx.positionGoalBody();\n\t\t\t}\n\t\t} else {\n\t\t\t// Put all types at top\n\t\t\tfor(var i=0; i<ctx.refractorEntities.length; i++){\n\t\t\t\tvar e = ctx.refractorEntities[i];\n\t\t\t\tfor(var j=0; j<10; j++){\n\t\t\t\t\tvar entity = goo.EntityUtils.clone(ctx.world, e, {}).addToWorld();\n\t\t\t\t\tentity.show();\n\t\t\t\t\tvar body = ctx.createBodyFromEntity(entity,{\n\t\t\t\t\t\tposition: [i*0.2-0.5,0.5]\n\t\t\t\t\t});\n\t\t\t\t\tctx.worldData.physicsWorld.addBody(body);\n\t\t\t\t\tctx.entities.push(entity);\n\t\t\t\t\tctx.bodies.push(body);\n\t\t\t\t}\n\t\t\t}\n\t\t\n\t\t\tctx.positionStartBody();\n\t\t\tctx.positionGoalBody();\n\t\t}\n\t\tctx.worldData.updatePiecePositions();\n\t};\n\t\n\tctx.removePieces = function(){\n\t\tctx.entities.forEach(function(e){\n\t\t\te.removeFromWorld();\n\t\t});\n\t\tctx.bodies.forEach(function(body){\n\t\t\tctx.worldData.physicsWorld.removeBody(body);\n\t\t});\n\t};\n\t\n\tctx.syncPosition = function(entity, body){\n\t\tentity.setTranslation(\n\t\t\tbody.position[0],\n\t\t\tbody.position[1],\n\t\t\tentity.transformComponent.transform.translation.z\n\t\t);\n\t\tentity.setRotation(0,0,body.angle);\n\t\tentity.transformComponent.updateWorldTransform();\n\t\tentity.transformComponent.setUpdated();\n\t};\n\t\n\tctx.worldData.updatePiecePositions = function(entity, body){\n\t\tctx.entities.forEach(function(entity, i){\n\t\t\tvar body = ctx.bodies[i];\n\t\t\tctx.syncPosition(entity, body);\n\t\t});\n\t\tctx.syncPosition(ctx.worldData.goalEntity, ctx.worldData.goalBody);\n\t};\n};\n\nvar cleanup = function(args, ctx, goo) {\n\tctx.removePieces();\n\tctx.entities.forEach(function(e){\n\t\te.removeFromWorld();\n\t});\n\tctx.bodies.concat([ctx.worldData.goalBody]).forEach(function(body){\n\t\tctx.worldData.physicsWorld.removeBody(body);\n\t});\n};\n\nvar update = function(args, ctx, goo) {\n\tif(ctx.level !== ctx.worldData.level){\n\t\tctx.removePieces();\n\t\tctx.createPieces();\n\t\tctx.level = ctx.worldData.level;\n\t}\n};\n\nvar parameters = [{\n\tkey: 'goalEntity',\n\ttype: 'entity'\n}, {\n\tkey: 'startEntity',\n\ttype: 'entity'\n}, {\n\tkey: 'refractor1',\n\ttype: 'entity'\n}, {\n\tkey: 'refractor2',\n\ttype: 'entity'\n}, {\n\tkey: 'refractor3',\n\ttype: 'entity'\n}, {\n\tkey: 'refractor4',\n\ttype: 'entity'\n}, {\n\tkey: 'refractor5',\n\ttype: 'entity'\n}];",
    "created": "2015-06-22T19:57:38.369Z",
    "dataModelVersion": 2,
    "deleted": false,
    "dependencies": {},
    "id": "adb850cdcae14b5aa37fda5faf32a6fb.script",
    "license": "CC0",
    "modified": "2015-07-03T13:20:47.650241+00:00",
    "name": "Place pieces"
  },
  "b17eba7a171a4f7d98c39130e08f7b41.script": {
    "body": "'use strict';\n\nvar setup = function(args, ctx, goo) {\n\tvar MeshData = goo.MeshData;\n\tvar Shader = goo.Shader;\n\t\n\tctx.oldMat = ctx.entity.meshRendererComponent.materials[0];\n\tvar uniforms = ctx.oldMat.uniforms;\n\t\n\tvar shaderDef = {\n\t\tattributes : {\n\t\t\tvertexPosition : MeshData.POSITION\n\t\t},\n\t\tuniforms : {\n\t\t\tviewProjectionMatrix : Shader.VIEW_PROJECTION_MATRIX,\n\t\t\tworldMatrix : Shader.WORLD_MATRIX,\n\t\t\tcolor : ctx.entity.hasTag('blocker') ? [0.5, 0.5, 0.5] : [0.46519097222222217, 0.7130548747276689, 0.9708333333333333],\n\t\t\topacity : ctx.entity.hasTag('blocker') ? 1 : 0.5\n\t\t},\n\t\tvshader : [\n\t\t'attribute vec3 vertexPosition;',\n\n\t\t'uniform mat4 viewProjectionMatrix;',\n\t\t'uniform mat4 worldMatrix;',\n\n\t\t'void main(void) {',\n\t\t\t'gl_Position = viewProjectionMatrix * worldMatrix * vec4(vertexPosition, 1.0);',\n\t\t'}'\n\t\t].join('\\n'),\n\t\tfshader : [\n\t\t'uniform vec3 color;',\n\t\t'uniform float opacity;',\n\n\t\t'void main(void)',\n\t\t'{',\n\t\t\t'if (opacity == 0.0) {',\n\t\t\t\t'discard;',\n\t\t\t'}',\n\t\t\t'gl_FragColor = vec4(color, opacity);',\n\t\t'}'\n\t\t].join('\\n')\n\t};\n\t\n\tctx.entity.meshRendererComponent.materials[0] = ctx.material = new goo.Material(shaderDef);\n\tctx.material.blendState.blending = 'TransparencyBlending';\n\tctx.material.renderQueue = goo.RenderQueue.TRANSPARENT;\n};\n\nvar cleanup = function(args, ctx, goo) {\n\tctx.entity.meshRendererComponent.materials[0] = ctx.oldMat;\n};\n\nvar update = function(args, ctx, goo) {\n\n};\n\nvar parameters = [];",
    "created": "2015-06-29T19:18:24.458Z",
    "dataModelVersion": 2,
    "deleted": false,
    "dependencies": {},
    "id": "b17eba7a171a4f7d98c39130e08f7b41.script",
    "license": "CC0",
    "modified": "2015-07-03T09:44:25.508551+00:00",
    "name": "Refractor Shader"
  },
  "bcc387f6b99f44438453be1fe753a84b.script": {
    "body": "'use strict';\n\nvar setup = function(args, ctx, goo) {\n\tif(args.editModeOn)\n\t\tctx.worldData.gamestate = 'editing';\n\t\n\tif(ctx.worldData.gamestate === 'editing'){\n\t\tvar settings = {\n\t\t\thint: 'This is the pre-level hint.',\n\t\t\tstartX: 0.12345,\n\t\t\tstartY: 0.12345,\n\t\t\tstartAngle: 0.12345,\n\t\t\tsave: function(){\n\t\t\t\tvar data = {\n\t\t\t\t\thint: settings.hint,\n\t\t\t\t\tstartX: settings.startX,\n\t\t\t\t\tstartY: settings.startY,\n\t\t\t\t\tstartAngle: settings.startAngle,\n\t\t\t\t\tshapes: ctx.worldData.draggedBodies.map(function(body){\n\t\t\t\t\t\tvar shape = {\n\t\t\t\t\t\t\tx: body.position[0],\n\t\t\t\t\t\t\ty: body.position[1],\n\t\t\t\t\t\t\tangle: body.angle,\n\t\t\t\t\t\t\ttype: 0\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif(body.blocker){\n\t\t\t\t\t\t\tshape.type = 'blocker';\n\t\t\t\t\t\t} else if(body.shapes[0].type === p2.Shape.RECTANGLE && body.angle === 0){\n\t\t\t\t\t\t\tshape.type = 'box';\n\t\t\t\t\t\t} else if(body.shapes[0].type === p2.Shape.RECTANGLE && body.angle !== 0){\n\t\t\t\t\t\t\tshape.type = 'romb';\n\t\t\t\t\t\t} else if(body.shapes[0].type === p2.Shape.CONVEX){\n\t\t\t\t\t\t\tshape.type = 'prism';\n\t\t\t\t\t\t} else if(body.shapes[0].type === p2.Shape.CIRCLE){\n\t\t\t\t\t\t\tshape.type = 'circle';\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn shape;\n\t\t\t\t\t}),\n\t\t\t\t\tgoalX: ctx.worldData.goalEntity.transformComponent.transform.translation.x,\n\t\t\t\t\tgoalY: ctx.worldData.goalEntity.transformComponent.transform.translation.y\n\t\t\t\t};\n\t\t\t\twindow.level = data;\n\t\t\t\tconsole.log(JSON.stringify(data,2,2));\n\t\t\t}\n\t\t};\n\t\tctx.gui = new window.dat.GUI();\n\t\tctx.updateStart = function(){\n\t\t\tctx.worldData.positionStartBody(settings.startX, settings.startY, settings.startAngle);\n\t\t}\n\t\tctx.gui.add(settings, 'startX').onChange(ctx.updateStart);\n\t\tctx.gui.add(settings, 'startY').onChange(ctx.updateStart);\n\t\tctx.gui.add(settings, 'startAngle').onChange(ctx.updateStart);\n\t\tctx.gui.add(settings, 'hint');\n\t\tctx.gui.add(settings, 'save');\n\t}\n};\n\nvar cleanup = function(args, ctx, goo) {\n\tif(ctx.gui)\n\t\tctx.gui.destroy();\n};\n\nvar update = function(args, ctx, goo) {\n\t//console.log(ctx.worldData.gamestate)\n\tif(args.editModeOn)\n\t\tctx.worldData.gamestate = 'editing';\n};\n\nvar parameters = [{\n\tkey: 'editModeOn',\n\ttype: 'boolean',\n\t'default': false\n}];",
    "created": "2015-06-26T13:00:13.644Z",
    "dataModelVersion": 2,
    "deleted": false,
    "dependencies": {
      "lib/dat.gui.min.js": {
        "sortValue": 0,
        "url": "lib/dat.gui.min.js"
      }
    },
    "id": "bcc387f6b99f44438453be1fe753a84b.script",
    "license": "CC0",
    "modified": "2015-07-03T11:04:25.110310+00:00",
    "name": "Edit mode"
  },
  "c11af6cf21aa47c7b6f826cb5fce4a5f.script": {
    "body": "'use strict';\n\nvar setup = function(args, ctx, goo) {\n\tctx.setStyle = function(style){\n\t\tvar oldStyle = {};\n\t\tctx.world.by.component('HtmlComponent').toArray().forEach(function(entity){\n\t\t\tif(entity.hasTag('skip-style')) return;\n\t\t\tfor(var key in style){\n\t\t\t\toldStyle[key] = entity.htmlComponent.domElement.childNodes[0].style[key];\n\t\t\t\tentity.htmlComponent.domElement.childNodes[0].style[key] = style[key];\n\t\t\t}\n\t\t});\n\t\treturn oldStyle;\n\t};\n\tctx.oldStyle = ctx.setStyle({\n\t\tfontFamily: 'Arial',\n\t\tpointerEvents: 'none',\n\t\twebkitTouchCallout: 'none',\n\t\twebkitUserSelect: 'none',\n\t\tkhtmlUserSelect: 'none',\n\t\tmozUserSelect: 'none',\n\t\tmsUserSelect: 'none',\n\t\tuserSelect: 'none'\n\t});\n};\n\nvar cleanup = function(args, ctx, goo) {\n\tctx.setStyle(ctx.oldStyle);\n};\n\nvar update = function(args, ctx, goo) {\n\n};\n\nvar parameters = [];",
    "created": "2015-07-03T09:03:18.257Z",
    "dataModelVersion": 2,
    "deleted": false,
    "dependencies": {},
    "id": "c11af6cf21aa47c7b6f826cb5fce4a5f.script",
    "license": "CC0",
    "modified": "2015-07-03T13:15:28.494366+00:00",
    "name": "Set CSS on all texts"
  },
  "c2b1cd7e5e9d438c87365be19ffe09d8.script": {
    "body": "",
    "created": "2015-06-26T13:12:29.510Z",
    "dataModelVersion": 2,
    "deleted": false,
    "dependencies": {},
    "id": "c2b1cd7e5e9d438c87365be19ffe09d8.script",
    "license": "CC0",
    "modified": "2015-07-03T08:09:05.127790+00:00",
    "name": "dat.gui"
  },
  "c4420467bbb142b6bd873c926a91fdcf.entity": {
    "components": {
      "script": {
        "scripts": {
          "2240ee5d32a947f39cfe41ca83baa543.scriptInstance": {
            "name": "Custom script",
            "options": {
              "enabled": true
            },
            "scriptRef": "7670c39aeab94f849ed42d8407283cac.script",
            "sortValue": 0
          }
        }
      },
      "transform": {
        "children": {
          "4162b37f95d64630b293e44beb1045dd.entity": {
            "entityRef": "4162b37f95d64630b293e44beb1045dd.entity",
            "sortValue": 0
          },
          "d7fe8ff992ee4363be36ccae772998f3.entity": {
            "entityRef": "d7fe8ff992ee4363be36ccae772998f3.entity",
            "sortValue": 1
          }
        },
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          0,
          0,
          -5
        ]
      }
    },
    "created": "2015-06-26T08:15:58.239Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": true,
    "id": "c4420467bbb142b6bd873c926a91fdcf.entity",
    "license": "CC0",
    "modified": "2015-07-03T08:46:30.679730+00:00",
    "name": "Rotate device",
    "static": false,
    "tags": {}
  },
  "c4f8af0f2b4d4f9688133c826fc21695.scene": {
    "canvas": {
      "aspect": {
        "height": 1,
        "width": 1
      },
      "mode": "Stretch",
      "resolution": {
        "height": 1080,
        "width": 1920
      }
    },
    "created": "2015-06-22T17:42:14.571Z",
    "dataModelVersion": 2,
    "defaultPackRef": "4c2b28d95e67477e835cb0b3fd20ea15.pack",
    "deleted": false,
    "description": "Lead the laser beam to the goal using refractive shapes.\n<br><br>\nA game by @schteppe\n<br><br>\ntinyurl.com/goorefract - v1.6",
    "entities": {
      "018a5179eb0b4a65b28b447b6f6355e3.entity": {
        "entityRef": "018a5179eb0b4a65b28b447b6f6355e3.entity",
        "sortValue": 8
      },
      "0ad479660e064a3a818b799baf61b8c9.entity": {
        "entityRef": "0ad479660e064a3a818b799baf61b8c9.entity",
        "sortValue": 7
      },
      "a8b1f2c1a10c46f581bf76ac6664a737.entity": {
        "entityRef": "a8b1f2c1a10c46f581bf76ac6664a737.entity",
        "sortValue": 5
      },
      "caa62a397b9a4002b7576202e82207bf.entity": {
        "entityRef": "caa62a397b9a4002b7576202e82207bf.entity",
        "sortValue": 1
      },
      "cb19d7c08f45499a8698112075297f1b.entity": {
        "entityRef": "cb19d7c08f45499a8698112075297f1b.entity",
        "sortValue": 0
      },
      "d95e64bd6b384211ba4f20c70fc1fd18.entity": {
        "entityRef": "d95e64bd6b384211ba4f20c70fc1fd18.entity",
        "sortValue": 9
      },
      "e852fa4166b24970b7d0dd01181ee1a5.entity": {
        "entityRef": "e852fa4166b24970b7d0dd01181ee1a5.entity",
        "sortValue": 4
      }
    },
    "environmentRef": "3166a7ca726f4c588aa45bde12311483.environment",
    "id": "c4f8af0f2b4d4f9688133c826fc21695.scene",
    "initialCameraRef": "cb19d7c08f45499a8698112075297f1b.entity",
    "license": "CC0",
    "modified": "2015-07-06T12:57:25.890781+00:00",
    "name": "Refract",
    "packs": {
      "4c2b28d95e67477e835cb0b3fd20ea15.pack": {
        "packRef": "4c2b28d95e67477e835cb0b3fd20ea15.pack",
        "sortValue": 0
      },
      "c942dfb711e94165b97bd1fbf9e219a3.pack": {
        "packRef": "c942dfb711e94165b97bd1fbf9e219a3.pack",
        "sortValue": 2
      },
      "e3c23e8e53334620895b1665ec453cd7.pack": {
        "packRef": "e3c23e8e53334620895b1665ec453cd7.pack",
        "sortValue": 3
      },
      "e9609a4d55c645889538f4c1a26a503b.pack": {
        "packRef": "e9609a4d55c645889538f4c1a26a503b.pack",
        "sortValue": 1
      }
    },
    "posteffectsRef": "a8851b79fece45e4aafc9fc1f9a0a08d.posteffects",
    "published": "2015-07-03T13:34:32.783711+00:00",
    "publishedUrl": "https://c1.goote.ch/c4f8af0f2b4d4f9688133c826fc21695.scene",
    "publishedUrls": {
      "https://c1.goote.ch/0838b3e2286d78732790b21a892646d180d18838": "2015-07-03T13:17:16.322072+00:00",
      "https://c1.goote.ch/490d44a343f6750748f0dd2b1dad6a11127f115e": "2015-06-29T19:14:39.772034+00:00",
      "https://c1.goote.ch/ba6c7714c6a4f26558f56004cda5772624e6f6b6": "2015-07-03T11:07:02.186619+00:00",
      "https://c1.goote.ch/e93237aab0e5d6d5592738986878838e930b85b2": "2015-07-03T08:57:08.767542+00:00",
      "https://c1.goote.ch/f50bd77d528a67c8f99382900cc312d9f70f9c3d": "2015-06-22T20:24:43.787726+00:00"
    },
    "tags": {},
    "thumbnailRef": "3d0ef8e4eabcbf06c5a3f6ec2131198c51d81e45.jpg"
  },
  "c793f690b03b4e338e46b50d290b65c4.entity": {
    "components": {
      "html": {
        "imageRefs": {},
        "innerHtml": "<p style=\"font-size: 10vh\">\n\t6\n</p>",
        "useTransformComponent": true
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          0,
          0,
          0
        ]
      }
    },
    "created": "2015-07-03T08:47:50.826Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "c793f690b03b4e338e46b50d290b65c4.entity",
    "license": "CC0",
    "modified": "2015-07-03T11:48:22.970021+00:00",
    "name": "Html Entity 2",
    "static": false,
    "tags": {}
  },
  "caa62a397b9a4002b7576202e82207bf.entity": {
    "components": {
      "transform": {
        "children": {
          "11f4ddb63abd49e7812b9d27599b3cb5.entity": {
            "entityRef": "11f4ddb63abd49e7812b9d27599b3cb5.entity",
            "sortValue": 1
          },
          "ed101a66e7534532a12dad6c19bb0199.entity": {
            "entityRef": "ed101a66e7534532a12dad6c19bb0199.entity",
            "sortValue": 0
          }
        },
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          0,
          0,
          0
        ]
      }
    },
    "created": "2015-06-22T17:42:15.186222+00:00",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": true,
    "id": "caa62a397b9a4002b7576202e82207bf.entity",
    "license": "CC0",
    "modified": "2015-06-29T18:55:57.436552+00:00",
    "name": "Default Lights",
    "static": false,
    "tags": {}
  },
  "cb19d7c08f45499a8698112075297f1b.entity": {
    "components": {
      "camera": {
        "aspect": 1,
        "far": 1000,
        "followEditorCam": false,
        "fov": 45,
        "lockedRatio": false,
        "near": 0.01,
        "projectionMode": "Parallel",
        "size": 0.5
      },
      "script": {
        "scripts": {
          "ac89832fa28e408ab3423b6dff62296f.scriptInstance": {
            "name": "Custom script",
            "options": {
              "enabled": true
            },
            "scriptRef": "e6df39a992b149ff85766d6b93fb7428.script",
            "sortValue": 0
          }
        }
      },
      "sound": {
        "sounds": {
          "f27dac5506c042a28d9f42f218b4ee2e.sound": {
            "sortValue": 0,
            "soundRef": "f27dac5506c042a28d9f42f218b4ee2e.sound"
          }
        },
        "volume": 1
      },
      "stateMachine": {
        "machines": {
          "7dc8afa865044fdf85269784d5193580.machine": {
            "machineRef": "7dc8afa865044fdf85269784d5193580.machine",
            "sortValue": 0
          }
        }
      },
      "transform": {
        "children": {
          "2aadb0d3c5eb426fb3d3bd72c1cb0a95.entity": {
            "entityRef": "2aadb0d3c5eb426fb3d3bd72c1cb0a95.entity",
            "sortValue": 5
          },
          "58ce183ee56748508af13304a4939bfa.entity": {
            "entityRef": "58ce183ee56748508af13304a4939bfa.entity",
            "sortValue": 6
          },
          "632c81696c4e44b88a4cb8bd4bda731f.entity": {
            "entityRef": "632c81696c4e44b88a4cb8bd4bda731f.entity",
            "sortValue": 7
          },
          "c4420467bbb142b6bd873c926a91fdcf.entity": {
            "entityRef": "c4420467bbb142b6bd873c926a91fdcf.entity",
            "sortValue": 4
          },
          "e2b7cc899ef341bf8d6bd16b002d399e.entity": {
            "entityRef": "e2b7cc899ef341bf8d6bd16b002d399e.entity",
            "sortValue": 2
          }
        },
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          0,
          0,
          5
        ]
      }
    },
    "created": "2015-06-22T17:42:14.577Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "cb19d7c08f45499a8698112075297f1b.entity",
    "license": "CC0",
    "modified": "2015-07-03T11:57:05.590148+00:00",
    "name": "Default Camera",
    "static": false,
    "tags": {}
  },
  "cce1eb88465b4322bae1e090a7ea1d80.entity": {
    "components": {
      "meshData": {
        "shape": "Quad"
      },
      "meshRenderer": {
        "castShadows": true,
        "cullMode": "Dynamic",
        "materials": {
          "a7cb6adbf35a4eb0a9be19bd1c43d358.material": {
            "materialRef": "a7cb6adbf35a4eb0a9be19bd1c43d358.material",
            "sortValue": 0
          }
        },
        "receiveShadows": true,
        "reflectable": true
      },
      "script": {
        "scripts": {
          "e77b6d4628db45ac82fb1d715f6108cc.scriptinstance": {
            "name": "Custom script",
            "options": {
              "enabled": true,
              "gotoGameState": "hint",
              "hoverCursor": "pointer",
              "hoverScale": [
                1,
                1,
                1
              ],
              "hoverScaleTime": 100,
              "hoverTexture": {},
              "isLevelButton": true
            },
            "scriptRef": "15cd9a6da347432bba16bca6ab3361e5.script",
            "sortValue": 0
          }
        }
      },
      "transform": {
        "children": {
          "07f70ee258ae4d139b55d31514d1ffb6.entity": {
            "entityRef": "07f70ee258ae4d139b55d31514d1ffb6.entity",
            "sortValue": 0
          }
        },
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          0.18290665745735168,
          0.1840209811925888,
          0.3852245509624481
        ],
        "translation": [
          0.2062603235244751,
          -0.0684739500284195,
          0.39484453201293945
        ]
      }
    },
    "created": "2015-07-03T07:56:48.960Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "cce1eb88465b4322bae1e090a7ea1d80.entity",
    "license": "CC0",
    "modified": "2015-07-03T08:36:59.810929+00:00",
    "name": "Level 3",
    "static": false,
    "tags": {}
  },
  "d298c54123b243499e278422c83012b7.entity": {
    "components": {
      "meshData": {
        "shape": "Disk",
        "shapeOptions": {
          "pointiness": 0,
          "radialSamples": 64,
          "radius": 0.5
        }
      },
      "meshRenderer": {
        "castShadows": true,
        "cullMode": "Dynamic",
        "materials": {
          "81fcab75bbe646c8bef85e5deaeeffe6.material": {
            "materialRef": "81fcab75bbe646c8bef85e5deaeeffe6.material",
            "sortValue": 0
          }
        },
        "receiveShadows": true,
        "reflectable": true
      },
      "script": {
        "scripts": {
          "79473ca373e347faac46c37238354b36.scriptInstance": {
            "name": "Custom script",
            "options": {
              "enabled": true
            },
            "scriptRef": "b17eba7a171a4f7d98c39130e08f7b41.script",
            "sortValue": 0
          }
        }
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          0.25,
          0.25,
          0.25
        ],
        "translation": [
          0,
          0,
          1
        ]
      }
    },
    "created": "2015-06-26T07:08:38.439Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "d298c54123b243499e278422c83012b7.entity",
    "license": "CC0",
    "modified": "2015-06-29T19:25:42.752227+00:00",
    "name": "Refractor 2",
    "static": false,
    "tags": {
      "physics-circle": "physics-circle"
    }
  },
  "d419bcb384d644aeb88eca53b9be6e05.entity": {
    "components": {
      "meshData": {
        "shape": "Quad"
      },
      "meshRenderer": {
        "castShadows": true,
        "cullMode": "Dynamic",
        "materials": {
          "2e5ca405e1eb4cb9825ddbc32c0dc530.material": {
            "materialRef": "2e5ca405e1eb4cb9825ddbc32c0dc530.material",
            "sortValue": 0
          }
        },
        "receiveShadows": true,
        "reflectable": true
      },
      "script": {
        "scripts": {}
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1.7,
          1.1,
          1.1
        ],
        "translation": [
          0,
          -0.025974005460739136,
          0
        ]
      }
    },
    "created": "2015-07-02T19:39:23.585Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "d419bcb384d644aeb88eca53b9be6e05.entity",
    "license": "CC0",
    "modified": "2015-07-03T13:10:50.496433+00:00",
    "name": "Background",
    "static": false,
    "tags": {}
  },
  "d7fe8ff992ee4363be36ccae772998f3.entity": {
    "components": {
      "html": {
        "imageRefs": {},
        "innerHtml": "<p style=\"color: white; font-size: 7vh; padding: 4px; margin: 0;\">\n\tPlease rotate device\n</p>",
        "useTransformComponent": true
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          0,
          -0.021008163690567017,
          0
        ]
      }
    },
    "created": "2015-06-26T08:16:24.630Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "d7fe8ff992ee4363be36ccae772998f3.entity",
    "license": "CC0",
    "modified": "2015-07-03T13:33:59.239802+00:00",
    "name": "Rotate device instruction",
    "static": false,
    "tags": {}
  },
  "d95e64bd6b384211ba4f20c70fc1fd18.entity": {
    "components": {
      "meshData": {
        "shape": "Quad"
      },
      "meshRenderer": {
        "castShadows": true,
        "cullMode": "Dynamic",
        "materials": {
          "e58b8b5d75f44738a8fee2c1358374fa.material": {
            "materialRef": "e58b8b5d75f44738a8fee2c1358374fa.material",
            "sortValue": 0
          }
        },
        "receiveShadows": true,
        "reflectable": true
      },
      "script": {
        "scripts": {
          "6e9ac0695ab240e3aad3f21e67ee9715.scriptInstance": {
            "name": "Custom script",
            "options": {
              "enabled": true
            },
            "scriptRef": "a01b5569c870490faf7c8887304b4a59.script",
            "sortValue": 1
          },
          "ad81a288f4844221a46905bc1a332f63.scriptInstance": {
            "name": "Custom script",
            "options": {
              "enabled": true,
              "resolution": 128
            },
            "scriptRef": "93100fe0e1434113bd225d9851ab6ca0.script",
            "sortValue": 2
          }
        }
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          2.1,
          2.1,
          2.1
        ],
        "translation": [
          0,
          0,
          -2
        ]
      }
    },
    "created": "2015-06-26T11:14:10.903Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "d95e64bd6b384211ba4f20c70fc1fd18.entity",
    "license": "CC0",
    "modified": "2015-06-29T19:55:23.474555+00:00",
    "name": "Background",
    "static": false,
    "tags": {}
  },
  "dddfdece49364bb09550eb6702a093e9.entity": {
    "components": {
      "meshData": {
        "shape": "Quad"
      },
      "meshRenderer": {
        "castShadows": true,
        "cullMode": "Dynamic",
        "materials": {
          "2e5ca405e1eb4cb9825ddbc32c0dc530.material": {
            "materialRef": "2e5ca405e1eb4cb9825ddbc32c0dc530.material",
            "sortValue": 0
          }
        },
        "receiveShadows": true,
        "reflectable": true
      },
      "script": {
        "scripts": {
          "707075739d0d49caa1d92655d12bfdf1.scriptInstance": {
            "name": "Custom script",
            "options": {
              "color": [
                0,
                0,
                0
              ],
              "enabled": true
            },
            "scriptRef": "8db7f8fc2d4d413db9d84e8e9b6c9cd6.script",
            "sortValue": 0
          }
        }
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          5,
          5,
          5
        ],
        "translation": [
          0,
          0,
          0
        ]
      }
    },
    "created": "2015-07-03T11:57:05.607181+00:00",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "dddfdece49364bb09550eb6702a093e9.entity",
    "license": "CC0",
    "modified": "2015-07-03T12:18:15.898326+00:00",
    "name": "Background",
    "static": false,
    "tags": {}
  },
  "e2b7cc899ef341bf8d6bd16b002d399e.entity": {
    "components": {
      "script": {
        "scripts": {
          "7f058a2842ed41f29ee68d3480330744.scriptInstance": {
            "name": "Custom script",
            "options": {
              "enabled": true,
              "hideIfVisible": {},
              "levelOffset": 0
            },
            "scriptRef": "7fcf03f06ac248058a6cd5d2e7abfb83.script",
            "sortValue": 0
          },
          "b259477eb1864a2e8dda83af4d15d131.scriptInstance": {
            "name": "Custom script",
            "options": {
              "enabled": true,
              "stateName": "hint",
              "transitionState": "levelselect",
              "transitionTimeout": -1
            },
            "scriptRef": "4e6ae469a0c74d5487739bdf6e7d2bc7.script",
            "sortValue": 1
          }
        }
      },
      "transform": {
        "children": {
          "46e9de38f1ec4eb084ee958c17a4a063.entity": {
            "entityRef": "46e9de38f1ec4eb084ee958c17a4a063.entity",
            "sortValue": 2
          },
          "e4b5f66314cb4f8d9680808902a07139.entity": {
            "entityRef": "e4b5f66314cb4f8d9680808902a07139.entity",
            "sortValue": 1
          },
          "fcbf8481dd254ef9835f8dcb6d597b0c.entity": {
            "entityRef": "fcbf8481dd254ef9835f8dcb6d597b0c.entity",
            "sortValue": 0
          }
        },
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          0,
          0,
          -2
        ]
      }
    },
    "created": "2015-06-25T20:32:26.391Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": true,
    "id": "e2b7cc899ef341bf8d6bd16b002d399e.entity",
    "license": "CC0",
    "modified": "2015-07-03T12:03:02.584465+00:00",
    "name": "Hints overlay",
    "static": false,
    "tags": {}
  },
  "e4b5f66314cb4f8d9680808902a07139.entity": {
    "components": {
      "meshData": {
        "shape": "Quad"
      },
      "meshRenderer": {
        "castShadows": true,
        "cullMode": "Dynamic",
        "materials": {
          "2e5ca405e1eb4cb9825ddbc32c0dc530.material": {
            "materialRef": "2e5ca405e1eb4cb9825ddbc32c0dc530.material",
            "sortValue": 0
          }
        },
        "receiveShadows": true,
        "reflectable": true
      },
      "script": {
        "scripts": {
          "f6b992ca303744f58274c236b39d395d.scriptInstance": {
            "name": "Custom script",
            "options": {
              "color": [
                0,
                0,
                0
              ],
              "enabled": true
            },
            "scriptRef": "8db7f8fc2d4d413db9d84e8e9b6c9cd6.script",
            "sortValue": 0
          }
        }
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          5,
          5,
          5
        ],
        "translation": [
          0,
          0,
          0
        ]
      }
    },
    "created": "2015-06-25T20:28:36.541Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "e4b5f66314cb4f8d9680808902a07139.entity",
    "license": "CC0",
    "modified": "2015-07-03T12:16:24.208995+00:00",
    "name": "Background",
    "static": false,
    "tags": {}
  },
  "e58b8b5d75f44738a8fee2c1358374fa.material": {
    "blendState": {
      "blendDst": "OneMinusSrcAlphaFactor",
      "blendEquation": "AddEquation",
      "blendSrc": "SrcAlphaFactor",
      "blending": "NoBlending"
    },
    "created": "2015-06-26T11:14:10.905Z",
    "cullState": {
      "cullFace": "Back",
      "enabled": true,
      "frontFace": "CCW"
    },
    "dataModelVersion": 2,
    "deleted": false,
    "depthState": {
      "enabled": true,
      "write": true
    },
    "dualTransparency": false,
    "flat": false,
    "id": "e58b8b5d75f44738a8fee2c1358374fa.material",
    "license": "CC0",
    "modified": "2015-06-26T11:49:00.593225+00:00",
    "name": "Material 12",
    "renderQueue": -1,
    "shaderRef": "GOO_ENGINE_SHADERS/uber",
    "texturesMapping": {},
    "uniforms": {
      "discardThreshold": {
        "enabled": true,
        "value": 0.1
      },
      "etaRatio": {
        "enabled": true,
        "value": -0.5
      },
      "fresnel": {
        "enabled": true,
        "value": 0
      },
      "materialAmbient": {
        "enabled": true,
        "value": [
          1,
          1,
          1,
          1
        ]
      },
      "materialDiffuse": {
        "enabled": true,
        "value": [
          0,
          0,
          0,
          1
        ]
      },
      "materialEmissive": {
        "enabled": true,
        "value": [
          0,
          0,
          0,
          1
        ]
      },
      "materialSpecular": {
        "enabled": true,
        "value": [
          0,
          0,
          0,
          1
        ]
      },
      "materialSpecularPower": {
        "enabled": true,
        "value": 64
      },
      "normalMultiplier": {
        "enabled": true,
        "value": 1
      },
      "opacity": {
        "enabled": false,
        "value": 1
      },
      "reflectivity": {
        "enabled": true,
        "value": 0
      },
      "refractivity": {
        "enabled": false,
        "value": 0
      },
      "vertexColorAmount": {
        "enabled": true,
        "value": 1
      },
      "wrapSettings": {
        "enabled": true,
        "value": [
          0,
          0
        ]
      }
    },
    "wireframe": false
  },
  "e68ca73940f542f18dd77329262834f9.entity": {
    "components": {
      "html": {
        "imageRefs": {},
        "innerHtml": "<p style=\"color: white; font-size: 5vh; padding: 4px; margin: 0;\">\n\tby <a href=\"https://twitter.com/schteppe\" style=\"text-decoration:none;color:white\">@schteppe</a>\n</p>",
        "useTransformComponent": true
      },
      "script": {
        "scripts": {}
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          0,
          0.13022884726524353,
          0
        ]
      }
    },
    "created": "2015-07-03T13:12:38.727Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "e68ca73940f542f18dd77329262834f9.entity",
    "license": "CC0",
    "modified": "2015-07-03T13:15:38.017801+00:00",
    "name": "Refract subtitle",
    "static": false,
    "tags": {
      "skip-style": "skip-style"
    }
  },
  "e6df39a992b149ff85766d6b93fb7428.script": {
    "body": "'use strict';\n\nvar setup = function(args, ctx, goo) {\n\tctx.iOS = ( navigator.userAgent.match(/iPad|iPhone|iPod/g) ? true : false );\n\t\n\tif(ctx.iOS)\n\t\tctx.domElement.addEventListener('touchstart', ctx.unmute = function() {\n\t\t\tvar sound = new goo.Sound();\n\t\t\tvar buffer = goo.AudioContext.getContext().createBuffer(1,2,44100);\n\t\t\tsound.setAudioBuffer(buffer);\n\t\t\tsound.play();\n\t\t\tgoo.SystemBus.emit('sound.unmute');\n\t\t});\n\telse {\n\t\tsetTimeout(function(){\n\t\t\tgoo.SystemBus.emit('sound.unmute');\n\t\t\tconsole.log('unmute')\n\t\t}, 1000);\n\t}\n};\n\nvar cleanup = function(args, ctx, goo) {\n\tif(ctx.unmute)\n\t\tctx.domElement.removeEventListener('touchstart', ctx.unmute);\n};",
    "created": "2015-07-03T11:19:32.743470+00:00",
    "dataModelVersion": 2,
    "deleted": false,
    "dependencies": {},
    "id": "e6df39a992b149ff85766d6b93fb7428.script",
    "license": "CC0",
    "modified": "2015-07-03T11:25:04.420355+00:00",
    "name": "Unmute script"
  },
  "e852fa4166b24970b7d0dd01181ee1a5.entity": {
    "components": {
      "script": {
        "scripts": {
          "3b6e175cd556478aa9d3a3ba6b634be1.scriptInstance": {
            "name": "Custom script",
            "options": {
              "enabled": true
            },
            "scriptRef": "8a1b9628171d449d8e03393f24b1b9db.script",
            "sortValue": 8
          },
          "62edc778e5f24b7abf8cfc8b1b2621dd.scriptInstance": {
            "name": "Custom script",
            "options": {
              "enabled": true
            },
            "scriptRef": "1377c4c8462645928bfd37ac0971f93f.script",
            "sortValue": 9
          },
          "7e677de0315647abae3b14e2f511cf6a.scriptInstance": {
            "name": "Custom script",
            "options": {
              "enabled": true
            },
            "scriptRef": "c11af6cf21aa47c7b6f826cb5fce4a5f.script",
            "sortValue": 10
          },
          "9c153fba33d14661afafd2532c8b6264.scriptInstance": {
            "name": "Custom script",
            "options": {
              "editModeOn": false,
              "enabled": true
            },
            "scriptRef": "bcc387f6b99f44438453be1fe753a84b.script",
            "sortValue": 2
          },
          "b4e1a2baf4034107b0e24f54b051aaae.scriptInstance": {
            "name": "Custom script",
            "options": {
              "enabled": true
            },
            "scriptRef": "2e1f52bffedd42d4ba90bd064cf2a686.script",
            "sortValue": 6
          },
          "d649e8d82c6e4605881d6bc0eb15361d.scriptInstance": {
            "name": "Custom script",
            "options": {
              "enabled": true,
              "goalEntity": {
                "entityRef": "a8b1f2c1a10c46f581bf76ac6664a737.entity"
              },
              "refractor1": {
                "entityRef": "66f3a41b8b9f421ab5be66895fcb26a2.entity"
              },
              "refractor2": {
                "entityRef": "d298c54123b243499e278422c83012b7.entity"
              },
              "refractor3": {
                "entityRef": "fc6e9482700045dd97127269d9a3cf09.entity"
              },
              "refractor4": {
                "entityRef": "9e9d25350e064ad3ac8d42fe31f38749.entity"
              },
              "refractor5": {
                "entityRef": "49db0b325efe45538922859601fb4300.entity"
              },
              "startEntity": {
                "entityRef": "0ad479660e064a3a818b799baf61b8c9.entity"
              }
            },
            "scriptRef": "adb850cdcae14b5aa37fda5faf32a6fb.script",
            "sortValue": 7
          },
          "efff236550d9441f802fe8b90f88228d.scriptInstance": {
            "name": "Custom script",
            "options": {
              "enabled": true
            },
            "scriptRef": "91ea7ecd562a440ab50365525db5e8c9.script",
            "sortValue": 4
          },
          "f3cd13b7852e48e8b0005a8a76c7e9a0.scriptInstance": {
            "name": "Custom script",
            "options": {
              "enabled": true
            },
            "scriptRef": "7023e9a8927b49dcaf9342347393eebe.script",
            "sortValue": 3
          },
          "f77b0e6b2bfa44b2a6602bef8d3bde42.scriptInstance": {
            "name": "Custom script",
            "options": {
              "enabled": true
            },
            "scriptRef": "c2b1cd7e5e9d438c87365be19ffe09d8.script",
            "sortValue": 1
          },
          "f819b5278187404c8bc8a31a10727169.scriptInstance": {
            "name": "Custom script",
            "options": {
              "enabled": true
            },
            "scriptRef": "305f237171f147c2819fc8a1666cec95.script",
            "sortValue": 5
          }
        }
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          0,
          0,
          0
        ]
      }
    },
    "created": "2015-06-22T19:05:10.913Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "e852fa4166b24970b7d0dd01181ee1a5.entity",
    "license": "CC0",
    "modified": "2015-07-03T12:58:21.251730+00:00",
    "name": "Script runner",
    "static": false,
    "tags": {}
  },
  "eb032dcc8a584c6d961f22dae8a28b8b.entity": {
    "components": {
      "meshData": {
        "shape": "Quad"
      },
      "meshRenderer": {
        "castShadows": true,
        "cullMode": "Dynamic",
        "materials": {
          "a7cb6adbf35a4eb0a9be19bd1c43d358.material": {
            "materialRef": "a7cb6adbf35a4eb0a9be19bd1c43d358.material",
            "sortValue": 0
          }
        },
        "receiveShadows": true,
        "reflectable": true
      },
      "script": {
        "scripts": {
          "dd3c396800014e359ce130592d40d74c.scriptinstance": {
            "name": "Custom script",
            "options": {
              "enabled": true,
              "gotoGameState": "hint",
              "hoverCursor": "pointer",
              "hoverScale": [
                1,
                1,
                1
              ],
              "hoverScaleTime": 100,
              "hoverTexture": {},
              "isLevelButton": true
            },
            "scriptRef": "15cd9a6da347432bba16bca6ab3361e5.script",
            "sortValue": 0
          }
        }
      },
      "transform": {
        "children": {
          "65cddc7e198c4a82b6d586474a04c18d.entity": {
            "entityRef": "65cddc7e198c4a82b6d586474a04c18d.entity",
            "sortValue": 0
          }
        },
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          0.18290665745735168,
          0.1840209811925888,
          0.3852245509624481
        ],
        "translation": [
          -0.22141490876674652,
          -0.2716450095176697,
          0.39484453201293945
        ]
      }
    },
    "created": "2015-07-03T07:58:42.205Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "eb032dcc8a584c6d961f22dae8a28b8b.entity",
    "license": "CC0",
    "modified": "2015-07-03T08:37:05.220689+00:00",
    "name": "Level 4",
    "static": false,
    "tags": {}
  },
  "ed101a66e7534532a12dad6c19bb0199.entity": {
    "components": {
      "light": {
        "angle": 30,
        "color": [
          1,
          1,
          1,
          1
        ],
        "direction": [
          0,
          0,
          0
        ],
        "intensity": 0.8,
        "penumbra": 5,
        "range": 60,
        "shadowCaster": false,
        "shadowSettings": {
          "darkness": 1,
          "far": 60,
          "fov": 55,
          "near": 1,
          "resolution": [
            256,
            256
          ],
          "shadowType": "Basic",
          "size": 100
        },
        "specularIntensity": 1,
        "type": "DirectionalLight"
      },
      "transform": {
        "rotation": [
          -38,
          21,
          -18
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          16,
          20.5,
          23.3
        ]
      }
    },
    "created": "2015-06-22T17:42:15.166444+00:00",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "ed101a66e7534532a12dad6c19bb0199.entity",
    "license": "CC0",
    "modified": "2015-06-22T17:42:15.166444+00:00",
    "name": "Directional 0",
    "static": false,
    "tags": {}
  },
  "ef8e2ae273964270a9740518c9c275b0.entity": {
    "components": {
      "meshData": {
        "shape": "Quad"
      },
      "meshRenderer": {
        "castShadows": true,
        "cullMode": "Dynamic",
        "materials": {
          "a7cb6adbf35a4eb0a9be19bd1c43d358.material": {
            "materialRef": "a7cb6adbf35a4eb0a9be19bd1c43d358.material",
            "sortValue": 0
          }
        },
        "receiveShadows": true,
        "reflectable": true
      },
      "script": {
        "scripts": {
          "8ff177717aa0469cbd6110f5d191c38b.scriptinstance": {
            "name": "Custom script",
            "options": {
              "enabled": true,
              "gotoGameState": "hint",
              "hoverCursor": "pointer",
              "hoverScale": [
                1,
                1,
                1
              ],
              "hoverScaleTime": 100,
              "hoverTexture": {},
              "isLevelButton": true
            },
            "scriptRef": "15cd9a6da347432bba16bca6ab3361e5.script",
            "sortValue": 0
          }
        }
      },
      "transform": {
        "children": {
          "964d7c1fb7b54659806aff373807c01b.entity": {
            "entityRef": "964d7c1fb7b54659806aff373807c01b.entity",
            "sortValue": 0
          }
        },
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          0.18290665745735168,
          0.1840209811925888,
          0.3852245509624481
        ],
        "translation": [
          -0.000974312424659729,
          -0.0684739500284195,
          0.39484453201293945
        ]
      }
    },
    "created": "2015-07-03T07:56:29.142Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "ef8e2ae273964270a9740518c9c275b0.entity",
    "license": "CC0",
    "modified": "2015-07-03T08:36:55.678204+00:00",
    "name": "Level 2",
    "static": false,
    "tags": {}
  },
  "f27dac5506c042a28d9f42f218b4ee2e.sound": {
    "audioRefs": {
      "mp3": "f0007ac42efb0f513cf77f3779389f85c226a79a.mp3"
    },
    "created": "2015-07-03T11:18:21.092Z",
    "dataModelVersion": 2,
    "deleted": false,
    "id": "f27dac5506c042a28d9f42f218b4ee2e.sound",
    "license": "CC0",
    "loop": true,
    "modified": "2015-07-03T11:31:02.558573+00:00",
    "name": "starfreak",
    "volume": 1
  },
  "fc6e9482700045dd97127269d9a3cf09.entity": {
    "components": {
      "meshData": {
        "shape": "Quad"
      },
      "meshRenderer": {
        "castShadows": true,
        "cullMode": "Dynamic",
        "materials": {
          "81fcab75bbe646c8bef85e5deaeeffe6.material": {
            "materialRef": "81fcab75bbe646c8bef85e5deaeeffe6.material",
            "sortValue": 0
          }
        },
        "receiveShadows": true,
        "reflectable": true
      },
      "script": {
        "scripts": {
          "bf32f77209cd4abd9757dd5a1434f52a.scriptInstance": {
            "name": "Custom script",
            "options": {
              "enabled": true
            },
            "scriptRef": "b17eba7a171a4f7d98c39130e08f7b41.script",
            "sortValue": 0
          }
        }
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          0.25,
          0.25,
          0.25
        ],
        "translation": [
          0,
          0,
          0
        ]
      }
    },
    "created": "2015-06-26T07:24:37.834Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "fc6e9482700045dd97127269d9a3cf09.entity",
    "license": "CC0",
    "modified": "2015-06-29T19:25:58.530226+00:00",
    "name": "Refractor 3",
    "static": false,
    "tags": {
      "physics-rectangle": "physics-rectangle"
    }
  },
  "fcbf8481dd254ef9835f8dcb6d597b0c.entity": {
    "components": {
      "html": {
        "imageRefs": {},
        "innerHtml": "<p style=\"color: white; font-size: 10vh; padding: 4px; margin: 0; text-transform:uppercase\">\n\tLevel 1\n</p>",
        "useTransformComponent": true
      },
      "script": {
        "scripts": {
          "5f894e84f8d84cab9769aef7af7bbb8a.scriptInstance": {
            "name": "Custom script",
            "options": {
              "enabled": true
            },
            "scriptRef": "a021079bf625499fb55405042a39fb60.script",
            "sortValue": 0
          }
        }
      },
      "transform": {
        "rotation": [
          0,
          0,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "translation": [
          0,
          0.1317567527294159,
          0
        ]
      }
    },
    "created": "2015-06-25T20:31:23.570Z",
    "dataModelVersion": 2,
    "deleted": false,
    "hidden": false,
    "id": "fcbf8481dd254ef9835f8dcb6d597b0c.entity",
    "license": "CC0",
    "modified": "2015-07-03T08:47:23.862286+00:00",
    "name": "Level number",
    "static": false,
    "tags": {}
  }
}